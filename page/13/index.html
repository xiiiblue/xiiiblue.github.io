<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.bluexiii.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="IT技术类文章、笔记分享">
<meta property="og:type" content="website">
<meta property="og:title" content="BlueXIII&#39;s Blog">
<meta property="og:url" content="http://www.bluexiii.com/page/13/index.html">
<meta property="og:site_name" content="BlueXIII&#39;s Blog">
<meta property="og:description" content="IT技术类文章、笔记分享">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="BlueXIII">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.bluexiii.com/page/13/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>BlueXIII's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BlueXIII's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">热爱技术,持续学习</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201702/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8SSH/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201702/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E4%BD%BF%E7%94%A8SSH/" class="post-title-link" itemprop="url">如何优(zhe)雅(teng)的使用SSH</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>SSH连接是我们与服务器交互的主要手段，每个程序员每天都会用到，就像喝白开水一样普通。<br>就是这样一个简单而又高频的动作，如果配置得当，或许能极大的提高我们工作的幸福感吧。  </p>
<p>前不久一个同事刚从Windows切换到macOS平台，问我SecureCRT有没有mac下的版本，我说即然都用上了基于BSD的mac了，应该不再需要SecureCRT这样的东西了才对，SSH如果配置好了，体验应该完爆Windows。于是就有了写下这篇文章的念头，填一下之前的坑。  </p>
<h2 id="选择终端GUI工具"><a href="#选择终端GUI工具" class="headerlink" title="选择终端GUI工具"></a>选择终端GUI工具</h2><p>首先第一步是选择一个好用的GUI工具，毕竟大多数人都是在DE下工作，极少人会喜欢工作在tty1这样的文字介面下。  </p>
<h3 id="Windows平台"><a href="#Windows平台" class="headerlink" title="Windows平台"></a>Windows平台</h3><p>Windows平台下的工具比较多，下面捡几个主要的来说一说优缺点：  </p>
<ul>
<li>SecureCRT - 老牌的商业软件，同时也提供Mac和Linux版本，功能强大，费用昂贵，但貌似身边所有人都在用盗版，PASS  </li>
<li>Xshell - 有免费的License，但只允许非商业场景下使用，这个也PASS  </li>
<li>Putty - 好吧，只能是它了，免费，功能简单，但是也足够用了  </li>
<li>Cygwin - 差点把这个忘了，严格来说它并不仅仅是一个SSH工具，也值得推荐  </li>
</ul>
<h3 id="macOS平台"><a href="#macOS平台" class="headerlink" title="macOS平台"></a>macOS平台</h3><p>macOS平台的终端工具比较好选，公认的只有iTerm2一个：  </p>
<ul>
<li>原生Terminal - 开箱即用，功能上也不过不失，但抛弃它，只是因为有更好的iTerm2。。。  </li>
<li>iTerm2 - 免费，支持众多的自定义选项，可以完全替代原生Terminal，没得选，就是它了</li>
</ul>
<h3 id="Ubuntu平台"><a href="#Ubuntu平台" class="headerlink" title="Ubuntu平台"></a>Ubuntu平台</h3><p>Ubuntu默认自带一个gnome-terminal，虽然不像iTerm2那样讨喜，但胜在简洁，个人认为是最优的选择吧：  </p>
<ul>
<li>Terminator - 支持窗口拆分，但界面丑，不能忍，PASS  </li>
<li>Guake - 支持下拉式的呼出，但界面更丑，PASS  </li>
<li>原生Terminal - 界面简洁，功能够用，最终还是用回了它</li>
</ul>
<h2 id="iTerm2使用简介"><a href="#iTerm2使用简介" class="headerlink" title="iTerm2使用简介"></a>iTerm2使用简介</h2><p>Putty和gnome-terminal的配置都比较简单，记住几个快捷键就可以了，macOS下的iTerm2配置和使用都要麻烦些，这里单独拿出来写一下。   </p>
<h3 id="配置呼出快捷键"><a href="#配置呼出快捷键" class="headerlink" title="配置呼出快捷键"></a>配置呼出快捷键</h3><p>使用<code>Cmd+,</code>打开设置界面，切换到<code>Keys</code>一栏<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/dtu48.jpg"><br>在左下方可以设置 <strong>呼出/隐藏</strong> iTerm2的快捷键，这里我设置成了<code>Cmd+ESC</code>，瞬间呼出，比Alfred/Spotlight还要方便。<br>另外还可以在Profile一栏中修改窗口为全屏+半透明，完美。  </p>
<h3 id="选中即复制"><a href="#选中即复制" class="headerlink" title="选中即复制"></a>选中即复制</h3><p>使用鼠标选中一段文字后，默认就已经复制到剪贴板了，直接用<code>Cmd+V</code>粘帖即可。  </p>
<h3 id="Profile设置"><a href="#Profile设置" class="headerlink" title="Profile设置"></a>Profile设置</h3><p>使用<code>Cmd+,</code>打开设置界面，切换到<code>Profile</code>一栏<br>在这里可以配置远程服务器的连接参数<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/6rl7i.jpg"></p>
<p>配合sshpass这个命令，可以实现类似SecureCRT的Session管理的功能。<br>注意，sshpass直接使用明文保存密码（SecureCRT是加密后存在本地），已经不推荐使用，下面会介绍一个更好的方式。  </p>
<h3 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h3><p>分屏功能相当好用，例如我们可以在屏幕左侧查看日志，右侧进行常规操作<br><code>Cmd+D</code> 垂直分割<br><code>Cmd+Shift+D </code>水平分割<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/a4e4b.jpg">  </p>
<h3 id="自动完成"><a href="#自动完成" class="headerlink" title="自动完成"></a>自动完成</h3><p>输入前几个关键字后，按<code>Cmd+;</code>，会有一个自动补全功能<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/cl4f4.jpg"></p>
<h3 id="命令历史记录"><a href="#命令历史记录" class="headerlink" title="命令历史记录"></a>命令历史记录</h3><p>使用<code>Cmd+shift+H</code>可以打开命令历史记录<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/7t5al.jpg"></p>
<h2 id="使用Tmux窗口管理工具"><a href="#使用Tmux窗口管理工具" class="headerlink" title="使用Tmux窗口管理工具"></a>使用Tmux窗口管理工具</h2><p>GUI工具有了，我们还缺一个通用的窗口管理工具–<strong>Tmux</strong>。  </p>
<p>Tmux是一个终端复用器，它可以激活多个终端或窗口, 还可以将屏幕水平或纵向切分成多个窗口。<br>类似于screen，它可以关闭窗口将程序放在后台运行，需要的时候再重新连接。  </p>
<p>其实iTerm2等GUI工具也可以实现类似的功能，但Tmux的好处是:  </p>
<ol>
<li>它是一个字符终端软件，不需要任何GUI的支持，通用性更好  </li>
<li>tmux可以 <strong>保持多个会话</strong> ，只要不关机，就可以随时恢复Session  </li>
</ol>
<p>macOS下的安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tmux</span><br></pre></td></tr></table></figure>
<p>Ubuntu下的安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install tmux</span><br></pre></td></tr></table></figure>
<p>tmux的主要元素分为三层：</p>
<ul>
<li>Session 一组窗口的集合，通常用来概括同一个任务</li>
<li>Window 单个可见窗口，和ITerm2中的Tab类似</li>
<li>Pane 窗格，被划分成小块的窗口</li>
</ul>
<p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/uf00l.jpg"></p>
<p>tmux默认的前置操作是<code>CTRL+b</code>。例如，我们想要新建一个窗体，就需要先在键盘上摁下CTRL+b，松开后再摁下n键。<br>下面所有的<code>prefix</code>均代表<code>CTRL+b</code></p>
<ul>
<li>查看/切换session    <code>prefix s</code>  </li>
<li>离开Session    <code>prefix d</code>  </li>
<li>重命名当前Session    <code>prefix $</code>  </li>
</ul>
<ul>
<li>新建窗口    <code>prefix c</code>  </li>
<li>切换到上一个活动的窗口     <code>prefix space</code>  </li>
<li>关闭一个窗口    <code>prefix &amp;</code>  </li>
<li>使用窗口号切换    <code>prefix 窗口号</code>  </li>
</ul>
<ul>
<li>切换到下一个窗格    <code>prefix o</code></li>
<li>查看所有窗格的编号    <code>prefix q</code></li>
<li>垂直拆分出一个新窗格    <code>prefix “</code></li>
<li>水平拆分出一个新窗格    <code>prefix %</code></li>
<li>暂时把一个窗体放到最大    <code>prefix z</code></li>
</ul>
<h2 id="使用oh-my-zsh"><a href="#使用oh-my-zsh" class="headerlink" title="使用oh my zsh"></a>使用oh my zsh</h2><p>工具已经齐全，但攘外必先安内，在连接远程服务器之前，我们先优化一下本机的Shell。  </p>
<p>Linux系统中已经内置了几种shell，一般默认的是bash<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/akhn0.jpg">  </p>
<p>zsh比bash更加好用，且完全兼容bash，但它配置繁琐。幸亏有了oh-my-zsh，让zsh的配置难度大大降低。  </p>
<p>首先安装一下zsh，mac系统无需安装，Ubuntu可以通过apt安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zsh</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://ohmyz.sh/">这里是oh my zsh官网</a></p>
<p>根据官网的介绍，安装相当的简单，只需要一行命令即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.github.com&#x2F;robbyrussell&#x2F;oh-my-zsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>zsh的配置文件是<code>~/.zshrc</code>，各项配置都有对应的注释，非常清晰，在这里可以修改主题，其实默认的已经很好看了<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/70dnw.jpg"></p>
<p>以下是zsh的一些使用技巧，请尽量记住，因为都很常用：</p>
<ul>
<li>连按两次Tab会列出所有的补全列表并直接开始选择，补全项可以使用 ctrl+n/p/f/b上下左右切换</li>
<li>命令选项补全。在zsh中只需要键入 tar -<tab> 就会列出所有的选项和帮助说明</li>
<li>命令参数补全。键入 kill <tab> 就会列出所有的进程名和对应的进程号</li>
<li>更智能的历史命令。在用或者方向上键查找历史命令时，zsh支持限制查找。比如，输入ls,然后再按方向上键，则只会查找用过的ls命令。而此时使用则会仍然按之前的方式查找，忽略 ls</li>
<li>智能跳转，安装了 autojump 之后，zsh 会自动记录你访问过的目录，通过 <code>j 目录名</code> 可以直接进行目录跳转，而且目录名支持模糊匹配和自动补全，例如你访问过 hadoop-1.0.0 目录，输入<code>j hado</code> 即可正确跳转。<code>j --stat</code> 可以看你的历史路径库。</li>
<li>目录浏览和跳转：输入 <code>d</code>，即可列出你在这个会话里访问的目录列表，输入列表前的序号，即可直接跳转。</li>
<li>在当前目录下输入 <code>..</code> 或 <code>...</code> ，或直接输入当前目录名都可以跳转，你甚至不再需要输入 <code>cd</code> 命令了。在你知道路径的情况下，比如 /usr/local/bin 你可以输入 <code>cd /u/l/b</code> 然后按进行补全快速输入</li>
<li>通配符搜索：<code>ls -l **/*.sh</code>，可以递归显示当前目录下的 shell 文件，文件少时可以代替 find。使用 <code>**/</code> 来递归搜索</li>
<li>扩展环境变量，输入环境变量然后按 就可以转换成表达的值</li>
</ul>
<h2 id="使用config记录远程连接"><a href="#使用config记录远程连接" class="headerlink" title="使用config记录远程连接"></a>使用config记录远程连接</h2><p>现在开始，我们再看一下如何连接远程服务器。</p>
<p>如果要管理几十台至上百台的主机，那么有没有什么方法能实现类似SecureCRT中Session管理那样的功能呢？  </p>
<p>最简单的是使用iTerm2中的profile功能，它可以配置多台主机的连接，并可以使用tag进行归类。<br>但这种方式首先太依赖于GUI工具，离开了iTerm2就完全用不了。<br>其次是通用性不够好，配置文件不能跨平台，我们辛辛苦苦在Mac上配好了一份主机清单，但回家扔到Ubuntu下就没法用了。  </p>
<p>有没有一种更为通用的方法呢？答案是直接使用openssh自带的config功能</p>
<p>配置文件的路径是：<code>~/.ssh/config</code>，如果不存在，可以新建一个</p>
<p>内容非常简单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host demohost</span><br><span class="line">  HostName 192.168.1.1</span><br><span class="line">  User username</span><br><span class="line">  Port 10022</span><br></pre></td></tr></table></figure>
<p>第一行<code>Host</code>后面，可以为这个连接起一个简单的名字<br>后面几行记得缩进，<code>HostName</code>后面是IP地址，<code>User</code>后面是用户名，这两项是必填的。如果端口不是标准的22，还可以用<code>Port</code>指定端口。</p>
<p>配置好后，我们只需要输入<code>ssh demohost</code>，即可快速打开SSH连接了。</p>
<p>如果记不清连接名也没有关系，利用zsh的自动补全功能，输入<code>ssh 关键字</code>，再按一下<code>TAB</code>键，会列出所有包含关键字的连接，使用方向键选择后，回车确认即可。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/swlk8.jpg">  </p>
<h2 id="使用ssh-copy-id免密码登录"><a href="#使用ssh-copy-id免密码登录" class="headerlink" title="使用ssh-copy-id免密码登录"></a>使用ssh-copy-id免密码登录</h2><p>接着再看一下，如何实现免密码登录远程主机。</p>
<p>之前我们提到过使用sshpass这个工具，可以直接将密码写进命令行中，从而实现非交互式的免密码登录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshpass -p password ssh demouser@92.168.1.1</span><br></pre></td></tr></table></figure>
<p>但这种方式使用明文保存密码，非常不安全，不建议使用。</p>
<p>其实还有一种更好更直接的方式，那就是使用<code>ssh-copy-id</code>建立ssh信任关系，从而免密码登录。</p>
<ol>
<li><p>首先，在本地机器上使用ssh-keygen产生公钥私钥对</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>
<p>一路回车即可，会在<code>~/.ssh</code>目录下生成公钥私钥对。此命令只需执行一次即可。  </p>
</li>
<li><p>然后，用ssh-copy-id将公钥复制到远程机器中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i demouser@192.168.1.1</span><br></pre></td></tr></table></figure>
<p>按提示输入一次密码，ssh-copy-id就会自动将刚才生成的公钥<code>id_rsa.pub</code>追加到远程主机的<code>~/.ssh/authorized_keys</code>后面了，以后的 <strong>ssh</strong> 以及 <strong>sftp</strong> 连接，都不用输入密码了。  </p>
</li>
</ol>
<p>至此，我们只要输入<code>ssh demouser</code>或<code>sftp demouser</code>，回车，就可以直接登录远程主机了。  </p>
<h2 id="安利一个小工具"><a href="#安利一个小工具" class="headerlink" title="安利一个小工具"></a>安利一个小工具</h2><p>最后的最后，再介绍一个很恶搞，但相当有用的小工具，<strong>thefuck</strong>  <a target="_blank" rel="noopener" href="https://github.com/nvbn/thefuck">GitHub页面</a>  </p>
<p>当我们敲错了命令，比如忘记加<code>sudo</code>时，只需要输入<code>fuck</code>并大力敲下回车，它就会非常智能的帮助我们更正了，非常有趣。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜ apt-get install vim</span><br><span class="line">E: Could not open lock file &#x2F;var&#x2F;lib&#x2F;dpkg&#x2F;lock - open (13: Permission denied)</span><br><span class="line">E: Unable to lock the administration directory (&#x2F;var&#x2F;lib&#x2F;dpkg&#x2F;), are you root?</span><br><span class="line"></span><br><span class="line">➜ fuck</span><br><span class="line">sudo apt-get install vim [enter&#x2F;↑&#x2F;↓&#x2F;ctrl+c]</span><br><span class="line">[sudo] password for nvbn:</span><br><span class="line">Reading package lists... Done</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a target="_blank" rel="noopener" href="http://cenalulu.github.io/linux/tmux/">http://cenalulu.github.io/linux/tmux/</a><br><a target="_blank" rel="noopener" href="http://harttle.com/2015/11/06/tmux-startup.html">http://harttle.com/2015/11/06/tmux-startup.html</a><br><a target="_blank" rel="noopener" href="http://wulfric.me/2015/08/iterm2/">http://wulfric.me/2015/08/iterm2/</a><br><a target="_blank" rel="noopener" href="http://yijiebuyi.com/blog/e310fc437f32006eb6aa42cad1783587.html">http://yijiebuyi.com/blog/e310fc437f32006eb6aa42cad1783587.html</a><br><a target="_blank" rel="noopener" href="http://wdxtub.com/2016/02/18/oh-my-zsh/">http://wdxtub.com/2016/02/18/oh-my-zsh/</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201702/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Redmine%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201702/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Redmine%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C/" class="post-title-link" itemprop="url">项目管理工具Redmine操作手册</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是Redmine"><a href="#什么是Redmine" class="headerlink" title="什么是Redmine"></a>什么是Redmine</h2><p>Redmine是用Ruby On Rails开发的一款基于WEB的项目管理软件。<br>它集成了项目管理所需的各项功能，可以同时处理多个项目。<br>请重点关注 <strong>问题</strong>、<strong>甘特图</strong>、<strong>日历</strong> 三个功能模块。  </p>
<h2 id="我的工作台"><a href="#我的工作台" class="headerlink" title="我的工作台"></a>我的工作台</h2><p>点击左上角 <strong>我的工作台</strong> 按钮</p>
<p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/exphn.jpg"></p>
<ul>
<li><strong>指派给我的问题</strong><br>提供一个跨项目的指派给当前用户的问题列表，显示问题的ID，项目，跟踪标类型签和主题。</li>
<li><strong>已报告的问题</strong><br>提供一个跨项目的由当前用户报告的问题列表，显示问题的ID，项目，跟踪标签类型和主题。 每一个用户可以通过点击”个性化定制本页”的链接个性化我的工作台。 然后用户可以选择哪些可用的模块被显示:</li>
<li><strong>日历</strong><br>提供一个跨项目的每周日历概述</li>
<li><strong>文档</strong><br>提供一个跨项目的最近文档概述</li>
<li><strong>最近的新闻</strong><br>提供一个跨项目的最近新闻概述</li>
<li><strong>耗时</strong><br>提供一个跨项目的关于当前用户最近7天工时的概述</li>
<li><strong>跟踪的问题</strong><br>提供一个跨项目的由当前用户跟踪的问题列表</li>
</ul>
<h2 id="项目概述"><a href="#项目概述" class="headerlink" title="项目概述"></a>项目概述</h2><p>点击左上角 <strong>项目</strong> 按钮，再点击 <strong>渠道移动营销</strong> 项目</p>
<p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/zdths.jpg"></p>
<p>即可查看 <strong>项目概述</strong> 页面<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/6hcy3.jpg"></p>
<h2 id="项目活动"><a href="#项目活动" class="headerlink" title="项目活动"></a>项目活动</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/qryvj.jpg"><br>该页面列出了该项目所有活动的历史记录, 这些活动包括:</p>
<ul>
<li>问题</li>
<li>变更</li>
<li>新闻</li>
<li>文档</li>
<li>文件</li>
<li>Wiki编辑记录</li>
<li>帖子</li>
<li>耗时</li>
</ul>
<p>该页面的右边栏允许你选择具体显示哪类活动</p>
<h2 id="问题跟踪"><a href="#问题跟踪" class="headerlink" title="问题跟踪"></a>问题跟踪</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/0qe5i.jpg"></p>
<p>问题是Redmine的核心业务。 一个问题绑定到一个项目, 由某一用于创建, 可以关联到某一版本, 等等。</p>
<ul>
<li><p><strong>查看某一问题</strong><br>在问题列表页面点击某一问题的链接, 可以查看该问题的具体描述。</p>
</li>
<li><p><strong>过滤器的应用</strong><br>默认情况下, 问题列表显示了所有处于打开状态的问题。 你可以添加过滤器, 点击”应用”链接刷新问题列表, 点击”清除”链接删除设置的滤器。<br>可以通过点击”+”号按钮, 为过滤器字段选择多个值。 这时会出现一个选择列表, 按住”ctrl”后, 可选择多个值。</p>
</li>
<li><p><strong>自定义查询</strong><br>当刷新页面后, 刚设置的过滤器就会消失, 可以通过点击”保存”链接保存你设置的过滤器, 从而建立自定义查询。<br>在新建自定义查询的界面输入自定义查询的名称, 以及过滤器和其他属性的设置。<br>点击保存之后, 新建的自定义查询将会出现在问题列表界面的右边栏中。</p>
</li>
<li><p><strong>快捷菜单</strong><br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/7z5vr.jpg"><br>在问题列表的某一个问题上, 点击鼠标右键, 将弹出一个快捷菜单, 用于便捷编辑问题。<br>通过快捷菜单可以快修改问题的进度。  </p>
</li>
<li><p><strong>新建问题</strong><br>要创建新的问题, 需要有新建问题的权限。<br>创建问题时, 最重要的字段是跟踪标签字段, 它决定了问题的类型。<br>默认情况下, Redmine有三种跟踪标签:<br>功能 feature<br>缺陷 bug<br>支持 support  </p>
</li>
</ul>
<h2 id="日历"><a href="#日历" class="headerlink" title="日历"></a>日历</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/16h73.jpg">  </p>
<p>在问题列表页面, 点击右边栏的”日历”链接, 即可进入日历界面。<br>日历提供了一个按月份显示的项目预览。 在这里你可以看到一个任务状态的起止日期。<br>像Redmine提供的其他视图一样, 可以通过设置过滤器从而决定日历图上显示的内容。</p>
<p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/10hlp.jpg"><br>注意3种图标的含义</p>
<h2 id="甘特图"><a href="#甘特图" class="headerlink" title="甘特图"></a>甘特图</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/6gsd0.jpg"></p>
<p>在问题列表页面, 点击右边栏的”甘特图”链接, 即可进入甘特图界面。<br>甘特图显示问题的起止日期以及版本的截至日期</p>
<h2 id="新闻"><a href="#新闻" class="headerlink" title="新闻"></a>新闻</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/3kvy8.jpg"></p>
<p>在”新闻”选项卡下, 你可以发布关于项目的新闻条目, 甚至任何你喜欢的新闻条目。</p>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/qjsf1.jpg"></p>
<p>在这里可以书写不同类型的文档, 默认有两种文档类型:</p>
<ul>
<li>用户文档</li>
<li>技术文档</li>
</ul>
<p>管理员可以添加文档类型</p>
<h2 id="Wiki"><a href="#Wiki" class="headerlink" title="Wiki"></a>Wiki</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/my2co.jpg"></p>
<p>在这里可以查看或编辑WIKI页面</p>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/x21ds.jpg"></p>
<p>在这里可以共享项目需要用到的其他资源</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a target="_blank" rel="noopener" href="https://www.oschina.net/question/84514_9314#id49">Redmine 用户手册</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201703/%E4%B8%83%E7%89%9B%E4%BA%91%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201703/%E4%B8%83%E7%89%9B%E4%BA%91%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">qiniu-imgup七牛云图片上传工具分享</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="qiniu-imgup简介"><a href="#qiniu-imgup简介" class="headerlink" title="qiniu-imgup简介"></a>qiniu-imgup简介</h2><p>qiniu-imgup是一个七牛云图片上传工具，目标是简化MarkDown写作中的贴图的繁琐步骤，可以快速将剪贴板中的图片上传至七牛云，并返回MarkDown格式的链接。<br>适用人群：使用七牛云做为图床的MarkDown编写者。  </p>
<p>由于平时工作主要是用macOS 10.12及Ubuntu 16.04两台笔记本，macOS下之前一直在用一个名为iPic的收费软件（30RMB/年，UX做的非常好），Ubuntu下直接找不到类似工具，于是分别针对两个平台各写了一个小工具。  </p>
<p>两个版本在思路及实现上的差异还是比较大的，Mac版偏重于用Python原生实现，Linux版则借用了一些第三方系统工具，下面简单做一下分享，有需要的同学可以直接拿去用。  </p>
<blockquote>
<p>Linux版本的整体思路及部分代码来自 博客 <a target="_blank" rel="noopener" href="http://nfeng.cc/2016/07/19/markdown-img-tool/">77695的自留地</a> ，侵删  </p>
</blockquote>
<h2 id="使用方法介绍"><a href="#使用方法介绍" class="headerlink" title="使用方法介绍"></a>使用方法介绍</h2><p>在编写MarkDown文档时，如果使用七牛云做图床，插入一张图片需要以下几个繁琐的步骤：</p>
<ol>
<li>截图</li>
<li>保存为文件</li>
<li>打开浏览器，在七牛云后台上传图片</li>
<li>复制图片的HTTP URL</li>
<li>在编辑器中将URL拼接为MarkDown的链接格式</li>
<li>粘帖链接</li>
</ol>
<p>mac版本将整个操作简化为了3个快捷键操作：</p>
<ol>
<li><code>cmd+shift+ctrl+4</code>  -  截图到剪贴板</li>
<li><code>cmd+shift+u</code>  -  使用自定义热键，上传并获取MarkDown链接</li>
<li><code>cmd+v</code>  -  粘帖MarkDown链接</li>
</ol>
<p>linux版本整个操作简化为了2个快捷键操作：</p>
<ul>
<li><code>alt+shift+s</code>  调用<code>simg</code>截图</li>
<li><code>alt+shift+u</code>  调用<code>uimg</code>上传并自动粘帖MarkDown链接</li>
</ul>
<h2 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h2><h3 id="Mac版实现思路"><a href="#Mac版实现思路" class="headerlink" title="Mac版实现思路"></a>Mac版实现思路</h3><ol>
<li>使用系统自带截图工具，或QQ截图工具，截图至剪贴板</li>
<li>使用PIL库中的ImageGrab，将剪贴板中的图片保存</li>
<li>使用qiniu库，生成token，并上传图片</li>
<li>将七牛云返回的URL拼接为MarkDown格式链接</li>
<li>使用clipboard库，将链接放到剪贴板中</li>
<li>使用os.system库，调用<code>osascript</code>发送系统通知，在屏幕右上角提示成功/失败</li>
<li>CMD+V粘帖链接至编辑器</li>
</ol>
<blockquote>
<p>其中2-6步，是由qiniu-imgup来实现的。<br>可以用Automator工具，将shell脚本封装成一个APP，在系统设置中就可以指定一个快捷键了。  </p>
</blockquote>
<h3 id="Linux版实现思路"><a href="#Linux版实现思路" class="headerlink" title="Linux版实现思路"></a>Linux版实现思路</h3><ol>
<li>使用shell脚本，调用第三方截图工具shutter，并将图片保存至临时目录。  </li>
<li>使用qiniu库，生成token，并上传图片</li>
<li>将七牛云返回的URL拼接为MarkDown格式链接</li>
<li>直接使用print打印链接至console</li>
<li>调用libnotify-bin，发送系统通知，在屏幕右上角提示成功/失败</li>
<li>使用shell脚本，将Python输出结果传递给第三方工具xclip，复制到剪贴板</li>
<li>使用shell脚本，调用第三方工具xdotool，模拟键盘Ctrl+V操作，直接进行粘帖</li>
</ol>
<blockquote>
<p>其中2-5步，是由qiniu-imgup来实现的。<br>过程中使用到了第三方工具shutter、xclip及xdotool。<br>由于使用了xdotool，无须手工Ctrl+V粘帖了，节省了一个操作步骤。  </p>
</blockquote>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><h3 id="Mac版安装与配置"><a href="#Mac版安装与配置" class="headerlink" title="Mac版安装与配置"></a>Mac版安装与配置</h3><ol>
<li>安装依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install -r requirement.txt</span><br></pre></td></tr></table></figure></li>
<li>配置<code>config.py</code>，填入七牛云的AK、SK等参数</li>
<li>使用Automator将shell脚本uimg封装为APP<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/k6cwa.jpg"></li>
<li>在系统设置中（System Preference-&gt;Keyboard-&gt;Shortcuts-&gt;App Shortcuts），为APP分配快捷键<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/oknvx.jpg"></li>
</ol>
<h3 id="Linux版安装与配置"><a href="#Linux版安装与配置" class="headerlink" title="Linux版安装与配置"></a>Linux版安装与配置</h3><ol>
<li>依赖及工具安装<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install qiniu</span><br><span class="line">sudo apt-get install shutter</span><br><span class="line">sudo apt-get install xclip</span><br><span class="line">sudo apt-get install parcellite</span><br><span class="line">sudo apt-get install xdotool</span><br><span class="line">sudo apt-get install libnotify-bin</span><br></pre></td></tr></table></figure></li>
<li>将程序目录拷贝至/opt/qimg下</li>
<li>设置环境变量 <code>export PATH=/opt/qimg:$PATH</code></li>
<li>在Shutter设置中，将图片自动保存位置设为<code>/tmp/snap_shutter</code></li>
<li>在System Setting - Keyboard中，设置快捷键分别指向<code>simg</code>截图和<code>uimg</code>上传</li>
</ol>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><ul>
<li><p>macOS版本GitHub源码：<br><a target="_blank" rel="noopener" href="https://github.com/xiiiblue/qiniu-imgup-mac.git">https://github.com/xiiiblue/qiniu-imgup-mac.git</a>  </p>
<blockquote>
<p>目前只支持macOS，有时间会把这个改成for Mac &amp; Win双平台的，先挖个坑  </p>
</blockquote>
</li>
<li><p>Linux版本GitHub源码：<br><a target="_blank" rel="noopener" href="https://github.com/xiiiblue/qiniu-imgup-linux.git">https://github.com/xiiiblue/qiniu-imgup-linux.git</a>  </p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201703/%E4%BD%BF%E7%94%A8virtualenv%E9%9A%94%E7%A6%BBPython%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201703/%E4%BD%BF%E7%94%A8virtualenv%E9%9A%94%E7%A6%BBPython%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">使用virtualenv创建Python虚拟环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是virtualenv"><a href="#什么是virtualenv" class="headerlink" title="什么是virtualenv"></a>什么是virtualenv</h2><p>virtualenv是一个用于创建Python虚拟环境的工具。  </p>
<p>虚拟环境又是什么呢？它是Python解释器的一个私有副本，在这个环境中可以安装私有包，而不会影响到系统中安装的全局Python解释器。<br>当一台主机上运行着多个Python应用时，使用虚拟环境可以有效的避免包的混乱和版本的冲突。  </p>
<h2 id="virtualenv官网"><a href="#virtualenv官网" class="headerlink" title="virtualenv官网"></a>virtualenv官网</h2><p>如果懒得看作者瞎BB，可以跳过下面的章节，直接访问官网：<br><a target="_blank" rel="noopener" href="https://virtualenv.pypa.io/">https://virtualenv.pypa.io</a>  </p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>在Linux或Mac中，可以使用<code>pip</code>或<code>easy_install</code>来快速安装virturlenv：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install virtualenv</span><br></pre></td></tr></table></figure>
<p>或：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo easy_install virutalenv</span><br></pre></td></tr></table></figure>
<p>测试安装是否成功：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --version</span><br><span class="line">15.1.0</span><br></pre></td></tr></table></figure>
<h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><p>下面以macOS为例，创建一个python3的虚拟环境。<br>假设已经有一个工程目录pyapp，进入工程目录中，执行以下命令：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd pyapp</span><br><span class="line">virtualenv venv</span><br><span class="line"></span><br><span class="line">Using base prefix &#39;&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.5&#39;</span><br><span class="line">New python executable in &#x2F;Users&#x2F;foobar&#x2F;tmp&#x2F;pyapp&#x2F;venv&#x2F;bin&#x2F;python3.5</span><br><span class="line">Also creating executable in &#x2F;Users&#x2F;foobar&#x2F;tmp&#x2F;pyapp&#x2F;venv&#x2F;bin&#x2F;python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br></pre></td></tr></table></figure>
<p>现在，virtualenv为我们在工程目录中，创建了一个名为<code>venv</code>的子目录，它里面保存了一个全新的虚拟环境，非常简单。  </p>
<p>现在可以进入ven/bin目录下，看看里面都有些什么东西：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cd venv&#x2F;bin</span><br><span class="line">ls -al</span><br><span class="line">total 160</span><br><span class="line">drwxr-xr-x  16 foobar  staff    544 Mar 13 09:44 .</span><br><span class="line">drwxr-xr-x   7 foobar  staff    238 Mar 13 09:44 ..</span><br><span class="line">-rw-r--r--   1 foobar  staff   2089 Mar 13 09:44 activate</span><br><span class="line">-rw-r--r--   1 foobar  staff   1031 Mar 13 09:44 activate.csh</span><br><span class="line">-rw-r--r--   1 foobar  staff   2185 Mar 13 09:44 activate.fish</span><br><span class="line">-rw-r--r--   1 foobar  staff   1137 Mar 13 09:44 activate_this.py</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    262 Mar 13 09:44 easy_install</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    262 Mar 13 09:44 easy_install-3.5</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    234 Mar 13 09:44 pip</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    234 Mar 13 09:44 pip3</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    234 Mar 13 09:44 pip3.5</span><br><span class="line">lrwxr-xr-x   1 foobar  staff      9 Mar 13 09:43 python -&gt; python3.5</span><br><span class="line">-rwxr-xr-x   1 foobar  staff   2348 Mar 13 09:44 python-config</span><br><span class="line">lrwxr-xr-x   1 foobar  staff      9 Mar 13 09:43 python3 -&gt; python3.5</span><br><span class="line">-rwxrwxr-x   1 foobar  staff  25384 Mar 13 09:43 python3.5</span><br><span class="line">-rwxr-xr-x   1 foobar  staff    241 Mar 13 09:44 wheel</span><br></pre></td></tr></table></figure>
<p>可以看到virtuanenv为我们创建了一个python3的虚拟环境。  </p>
<p>但在Ubuntu16.04下，virtualenv默认会创建python2.7的虚拟环境。这时，只要在创建时加入<code>-p python3</code>参数即可解决。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv -p python3 venv</span><br></pre></td></tr></table></figure>
<h2 id="激活和退出虚拟环境"><a href="#激活和退出虚拟环境" class="headerlink" title="激活和退出虚拟环境"></a>激活和退出虚拟环境</h2><p>在使用虚拟环境之前，必须将其激活，命令如下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source venv&#x2F;bin&#x2F;activate</span><br><span class="line">或</span><br><span class="line">. venv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>
<p>这时，可以看到shell提示符前面加上了<code>(venv)</code>前缀，说明已经工作在虚拟环境之下了  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(venv)➜pyapp</span><br></pre></td></tr></table></figure>
<p>退出虚拟环境只要执行：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>
<h2 id="在虚拟环境中安装依赖"><a href="#在虚拟环境中安装依赖" class="headerlink" title="在虚拟环境中安装依赖"></a>在虚拟环境中安装依赖</h2><p>在虚拟环境中，可以像平时一样使用pip安装依赖，操作完全没有区别：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pip3 install requests</span><br><span class="line"></span><br><span class="line">Collecting requests</span><br><span class="line">  Downloading requests-2.13.0-py2.py3-none-any.whl (584kB)</span><br><span class="line">    100% |████████████████████████████████| 593kB 13kB&#x2F;s</span><br><span class="line">Installing collected packages: requests</span><br><span class="line">Successfully installed requests-2.13.0</span><br></pre></td></tr></table></figure>
<p>但依赖会安装到<code>venv/lib/python3.5/site-packages</code>目录下，可以进去看一下：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd venv&#x2F;lib&#x2F;python3.5&#x2F;site-packages</span><br><span class="line">ls -al</span><br></pre></td></tr></table></figure>
<p>当然还可以使用<code>-r requirements.txt</code>来批量安装依赖，也是没有问题的：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br><span class="line">Collecting beautifulsoup4 (from -r requirements.txt (line 1))</span><br><span class="line">  Downloading beautifulsoup4-4.5.3-py3-none-any.whl (85kB)</span><br><span class="line">    100% |████████████████████████████████| 92kB 13kB&#x2F;s</span><br><span class="line">Installing collected packages: beautifulsoup4</span><br><span class="line">Successfully installed beautifulsoup4-4.5.3</span><br></pre></td></tr></table></figure>
<h2 id="删除虚拟环境"><a href="#删除虚拟环境" class="headerlink" title="删除虚拟环境"></a>删除虚拟环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmvirtualenv venv</span><br></pre></td></tr></table></figure>
<h2 id="在PyCharm中使用virtualenv"><a href="#在PyCharm中使用virtualenv" class="headerlink" title="在PyCharm中使用virtualenv"></a>在PyCharm中使用virtualenv</h2><p>PyCharm已经提供了对virtualenv的支持，详情可查看官方文档：<br><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/pycharm/2016.1/creating-virtual-environment.html">https://www.jetbrains.com/help/pycharm/2016.1/creating-virtual-environment.html</a></p>
<p>首先是设置virtualenv的路径，PyCharm应该会自动发现并配置上，查看一下即可。  </p>
<p>位置：  <code>CMD+,</code>  –&gt;  Project  –&gt;  Project Interpreter，点击右上角的齿轮图标，选择<code>Create VirtualEnv</code>：<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/8hspu.jpg">  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201704/flask-adminlte-handler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201704/flask-adminlte-handler/" class="post-title-link" itemprop="url">flask-adminlte-handler</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>继续接着上次的话题，上周整理出来的flask-rest脚手架，用于快速构建Restful API。虽然后端的代码量很少，但前端会变得很重，所以总体开发速度并不算太快，不太适合小型项目。<br>于是又整理了一套flask-adminlte脚手架，目标是用较传统的方式，减少整体的代码量，加快开发速度，以应对一些比较极端的需求。大体估算，开发时间可以做到SpringBoot全家桶的30%左右。  </p>
<h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><p><a target="_blank" rel="noopener" href="http://git.si-tech.com.cn/guolei/flask-adminlte-handler">http://git.si-tech.com.cn/guolei/flask-adminlte-handler</a><br><a target="_blank" rel="noopener" href="https://github.com/xiiiblue/flask-adminlte-handler">https://github.com/xiiiblue/flask-rest-sample</a>  </p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>flask-adminlte-handler是一个Python环境下的WEB后台管理系统脚手架，目标是用极少量的代码，快速构建小型WEB应用。请勿在大中型项目中进行尝试。  </p>
<ol>
<li>使用较传统的重后端+轻前端的方式，降低总体代码量</li>
<li>Web框架使用Flask，默认Jinja模版</li>
<li>ORM框架使用Peewee</li>
<li>前端套用基于BootStrap的AdminLTE模板</li>
</ol>
<h2 id="系统截图"><a href="#系统截图" class="headerlink" title="系统截图"></a>系统截图</h2><ul>
<li><p>登录页<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/0ot1s.jpg"></p>
</li>
<li><p>主页<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/644d6.jpg"></p>
</li>
<li><p>编辑界面<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/fojv1.jpg">  </p>
</li>
<li><p>查询界面<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/vvelb.jpg"></p>
</li>
</ul>
<h2 id="第三方依赖"><a href="#第三方依赖" class="headerlink" title="第三方依赖"></a>第三方依赖</h2><ul>
<li>peewee</li>
<li>pymysql</li>
<li>flask</li>
<li>flask-script</li>
<li>flask-wtf</li>
<li>flask-login</li>
</ul>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="venv虚拟环境安装配置"><a href="#venv虚拟环境安装配置" class="headerlink" title="venv虚拟环境安装配置"></a>venv虚拟环境安装配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install virtualenv</span><br><span class="line">virtualenv venv</span><br><span class="line">. venv&#x2F;bin&#x2F;activate</span><br></pre></td></tr></table></figure>
<h3 id="第三方依赖安装"><a href="#第三方依赖安装" class="headerlink" title="第三方依赖安装"></a>第三方依赖安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="系统参数配置"><a href="#系统参数配置" class="headerlink" title="系统参数配置"></a>系统参数配置</h3><ol>
<li><p>编辑<code>config.py</code>， 修改SECRET_KEY及MySQL数据库相关参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SECRET_KEY &#x3D; os.environ.get(&#39;SECRET_KEY&#39;) or &#39;your-secret&#39;</span><br><span class="line">DB_HOST &#x3D; &#39;127.0.0.1&#39;</span><br><span class="line">DB_USER &#x3D; &#39;foobar&#39;</span><br><span class="line">DB_PASSWD &#x3D; &#39;foobar&#39;</span><br><span class="line">DB_DATABASE &#x3D; &#39;foobar&#39;</span><br></pre></td></tr></table></figure></li>
<li><p>编辑log-app.conf，修改日志路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">args&#x3D;(&#39;&#x2F;path&#x2F;to&#x2F;log&#x2F;flask-rest-sample.log&#39;,&#39;a&#39;,&#39;utf8&#39;)</span><br></pre></td></tr></table></figure>
<h3 id="数据库初始化"><a href="#数据库初始化" class="headerlink" title="数据库初始化"></a>数据库初始化</h3></li>
<li><p>自动建表<br>直接运行<code>python3 models.py</code></p>
</li>
<li><p>插入管理员用户（默认admin/admin)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO &#96;user&#96; (&#96;id&#96;, &#96;username&#96;, &#96;password&#96;, &#96;fullname&#96;, &#96;email&#96;, &#96;phone&#96;, &#96;status&#96;)</span><br><span class="line">VALUES</span><br><span class="line">	(1, &#39;admin&#39;, &#39;pbkdf2:sha1:1000$Km1vdx3W$9aa07d3b79ab88aae53e45d26d0d4d4e097a6cd3&#39;, &#39;管理员&#39;, &#39;admin@admin.com&#39;, &#39;18612341234&#39;, 1);</span><br></pre></td></tr></table></figure>
<h3 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nohup .&#x2F;manage.py runserver 2&gt;&amp;1 &amp;</span><br><span class="line">或</span><br><span class="line">.&#x2F;run_app_dev.py (仅限测试)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="项目目录结构"><a href="#项目目录结构" class="headerlink" title="项目目录结构"></a>项目目录结构</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/963uh.jpg">  </p>
<ul>
<li>/app/auth  用户认证相关代码</li>
<li>/app/main  主要功能点相关代码</li>
<li>/app/static  JS、CSS等静态文件</li>
<li>/app/template  页面模版</li>
<li>/app/models.py  Peewee模型</li>
<li>/app/utils.py  工具模块</li>
<li>/conf  系统参数及日志配置</li>
</ul>
<h2 id="相关学习文档"><a href="#相关学习文档" class="headerlink" title="相关学习文档"></a>相关学习文档</h2><ul>
<li><a target="_blank" rel="noopener" href="http://flask.pocoo.org/">http://flask.pocoo.org</a></li>
<li><a target="_blank" rel="noopener" href="https://flask-login.readthedocs.io/">https://flask-login.readthedocs.io</a></li>
<li><a target="_blank" rel="noopener" href="https://flask-script.readthedocs.io/">https://flask-script.readthedocs.io</a></li>
<li><a target="_blank" rel="noopener" href="https://flask-wtf.readthedocs.io/">https://flask-wtf.readthedocs.io</a></li>
<li><a target="_blank" rel="noopener" href="http://docs.peewee-orm.com/">http://docs.peewee-orm.com</a></li>
<li><a target="_blank" rel="noopener" href="https://almsaeedstudio.com/preview">https://almsaeedstudio.com/preview</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201704/python%E4%BD%BF%E7%94%A8cx_Oracle%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E5%9D%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201704/python%E4%BD%BF%E7%94%A8cx_Oracle%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E5%9D%91/" class="post-title-link" itemprop="url">Python使用cx_Oracle的几个小坑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>cx_Oracle是Python环境下的一个（好像也是唯一的一个）用于操作Oracle的第三方模块。<br>最近在写某个对帐程序时，不得已要连接一台Oracle库，于是用到了cx_Oracle，总的来说还是比较顺利的，期间遇到几个有意思的小坑写出来分享一下。</p>
<h2 id="RHEL-6-4下安装cx-Oracle"><a href="#RHEL-6-4下安装cx-Oracle" class="headerlink" title="RHEL 6.4下安装cx_Oracle"></a>RHEL 6.4下安装cx_Oracle</h2><p>RHEL6.4和cx_Oracle比较搭，安装时应该不会遇到什么挫折，使用RPM安装好instantclient后，直接用pip3安装cx_Oracle即可。</p>
<p>需要注意地方：</p>
<ol>
<li>尽量使用RPM方式安装instantclient，安装更方便，而且比zip更好管理。  </li>
<li>instantclient的版本选择的是11.2.0.4.0，没有选择12。对于Oracle/WebLogic这类闭源的东西，还是选择次最新版本的比较稳妥。  </li>
</ol>
<p>安装步骤：</p>
<ol>
<li><p>下载Linux版本的instantclient<br>这里是 <a target="_blank" rel="noopener" href="http://www.oracle.com/technetwork/cn/database/features/instant-client/index-097480.html">Oracle官网 instantclient下载页面</a> ，下载以下3个RPM包：<br>oracle-instantclient11.2-basic-11.2.0.4.0-1.x86_64.rpm<br>oracle-instantclient11.2-devel-11.2.0.4.0-1.x86_64.rpm<br>oracle-instantclient11.2-sqlplus-11.2.0.4.0-1.x86_64.rpm  </p>
</li>
<li><p>安装instantclient并设置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libaio bc flex</span><br><span class="line">rpm -ivh oracle-instantclient11.2-basic-11.2.0.4.0-1.x86_64.rpm</span><br><span class="line">rpm -ivh oracle-instantclient11.2-devel-11.2.0.4.0-1.x86_64.rpm</span><br><span class="line">rpm -ivh oracle-instantclient11.2-sqlplus-11.2.0.4.0-1.x86_64.rpm</span><br></pre></td></tr></table></figure></li>
<li><p>设置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &#39;export ORACLE_VERSION&#x3D;&quot;11.2&quot;&#39; &gt;&gt; $HOME&#x2F;.bashrc</span><br><span class="line">echo &#39;export ORACLE_HOME&#x3D;&quot;&#x2F;usr&#x2F;lib&#x2F;oracle&#x2F;$ORACLE_VERSION&#x2F;client64&#x2F;&quot;&#39; &gt;&gt; $HOME&#x2F;.bashrc</span><br><span class="line">echo &#39;export PATH&#x3D;$PATH:&quot;$ORACLE_HOME&#x2F;bin&quot;&#39; &gt;&gt; $HOME&#x2F;.bashrc</span><br><span class="line">echo &#39;export LD_LIBRARY_PATH&#x3D;$LD_LIBRARY_PATH:&quot;$ORACLE_HOME&#x2F;lib&quot;&#39; &gt;&gt; $HOME&#x2F;.bashrc</span><br><span class="line">source $HOME&#x2F;.bashrc</span><br></pre></td></tr></table></figure></li>
<li><p>使用pip安装cx_Oracle</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install cx_Oracle</span><br></pre></td></tr></table></figure>
<h2 id="macOS-12下安装cx-Oracle"><a href="#macOS-12下安装cx-Oracle" class="headerlink" title="macOS 12下安装cx_Oracle"></a>macOS 12下安装cx_Oracle</h2><p>macOS下，安装cx_Oracle后的编译过程有可能会报错，一般是因为instantclient安装有误造成的。</p>
</li>
</ol>
<p>需要注意的地方：</p>
<ol>
<li>mac下的instantclient只有zip包一种安装方式，要注意手工建两个软链接。  </li>
<li>pip安装前，注意导入LD_LIBRARY_PATH与DYLD_LIBRARY_PATH两个环境变量。  </li>
</ol>
<p>安装过程：</p>
<ol>
<li><p>下载Mac版本的instantclient<br>下载以下3个zip包，并<code>unzip</code>解压至同一目录：<br>instantclient-basic-macos.x64-11.2.0.4.0.zip<br>instantclient-sdk-macos.x64-11.2.0.4.0.zip<br>instantclient-sqlplus-macos.x64-11.2.0.4.0.zip</p>
</li>
<li><p>建立软链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;path&#x2F;to&#x2F;instant</span><br><span class="line">ln -s libclntsh.dylib.11.2 libclntsh.dylib</span><br><span class="line">ln -s libocci.dylib.11.2 libocci.dylib</span><br></pre></td></tr></table></figure></li>
<li><p>设置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export ORACLE_VERSION&#x3D;&quot;11.2&quot;</span><br><span class="line">export ORACLE_HOME&#x3D;&quot;&#x2F;path&#x2F;to&#x2F;instantclient_11_2&quot;</span><br><span class="line">export PATH&#x3D;$PATH:&quot;$ORACLE_HOME&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>使用pip安装cx_Oracle，注意提前导入DYLD_LIBRARY_PATH与LD_LIBRARY_PATH</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export DYLD_LIBRARY_PATH&#x3D;&quot;$ORACLE_HOME&quot;</span><br><span class="line">export LD_LIBRARY_PATH&#x3D;&quot;$ORACLE_HOME&quot;</span><br><span class="line">pip3 install cx_Oracle</span><br></pre></td></tr></table></figure>
<h2 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h2><p>Oracle中文乱码问题存在已久，使用cx_Oracle时也不例外，解决方法还是设置NLS_LANG环境变量。<br>有两种方式，一是在系统中设置永久环境变量，二是直接在代码中使用<code>os.environ</code>设置环境变量，这里推荐后者。  </p>
</li>
<li><p>方法一：在Shell中设置环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export NLS_LANG&#x3D;&quot;SIMPLIFIED CHINESE_CHINA.UTF8&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>方法二：直接在代码中加入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">os.environ[&#39;NLS_LANG&#39;] &#x3D; &#39;SIMPLIFIED CHINESE_CHINA.UTF8&#39;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="PyCharm下不识别cx-Oracle问题"><a href="#PyCharm下不识别cx-Oracle问题" class="headerlink" title="PyCharm下不识别cx_Oracle问题"></a>PyCharm下不识别cx_Oracle问题</h3><p>安装安成后，在python的console中已经可以<code>import cx_Oracle</code>了，但在PyCharm中却提示找不到cx_Oracle。这是一个比较大的坑，可以详细讲一下处理过程。  </p>
<p>首先初步定位到原因，是由于PyCharm中没有定义LD_LIBRARY_PATH与DYLD_LIBRARY_PATH两个环境变量造成的。<br>PyCharm会自动读取系统中的环境变量设置并导入，但唯独这两个没有导进来。不深究原因，先尝试手工在PyCharm中配置这两个环境变量，总共有两处可以配置：</p>
<p>第一处：<br><code>CMD+,</code>打开Preference，找到 Build,Execution,Deployment -&gt; Console -&gt; Python Console -&gt;Enviroment Variables<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/r61vs.jpg"><br>此处的配置会修复PyCharm中的Console。</p>
<p>第二处：<br>右上角 Run -&gt; Edit Configurations，添加两条环境变量<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/09u0q.jpg"><br>此处的配置会修复PyCharm中<code>Ctrl+Shift+R</code>运行代码时的报错。</p>
<p>在以上两处手工添加环境变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DYLD_LIBRARY_PATH&#x3D;&#x2F;path&#x2F;to&#x2F;instantclient</span><br><span class="line">LD_LIBRARY_PATH&#x2F;path&#x2F;to&#x2F;instantclient</span><br></pre></td></tr></table></figure>
<p>两处的环境变量配置完成后，虽然console中可以正常使用cx_Oracle了，代码也可以正常运行了，但编辑界面中的inspection还是有问题的，提示有Error，并且不能使用自动完成功能。</p>
<p>于是回到之前的问题，为什么明明已经定义了，但PyCharm却没有找到LD_LIBRARY_PATH与DYLD_LIBRARY_PATH？<br>同时偶然发现，在执行<code>env</code>命令查看已定义的环境变量时，也是找不到LD_LIBRARY_PATH与DYLD_LIBRARY_PATH的。<br>这貌似已经不是PyCharm自身的问题了，需要从macOS系统来着手了。  </p>
<p>于是在stackoverflow上找到了这么一段话：  </p>
<blockquote>
<p>El Capitan added system integrity protection (SIP), and one side effect of that is that exporting DYLD_LIBRARY_PATH doesn’t work. That could affect running SQL*Plus from a shell script, for example. There are workarounds for the 11g instant client. The installation notes at the bottom of the download page have changed since I last did this, and it now says to hard link the library files to the user’s ~/lib directory to avoid that issue. Fortunately it looks like you don’t need to worry about that with the 12c client - they’ve fixed the way it’s built.</p>
</blockquote>
<p>看来根本原因是OSX 10.11之后加入的这个SIP引发的了。  </p>
<p>首先想到的最简单的方法，将所有的<code>.dylib</code>和<code>.h</code>都拷贝到系统默认的目录就可以了。<br>但很杯具，<code>/usr/lib</code>和<code>/user/include</code>这两个目录也被SIP保护了。因为不想强制关闭SIP，继续再想别的办法。<br>接着发现<code>/usr/local/lib</code>和<code>/user/local/include</code>目录还是可以操作的，于是拷到这两个目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;path&#x2F;to&#x2F;instantclient</span><br><span class="line">cp *.dylib &#x2F;usr&#x2F;local&#x2F;lib</span><br><span class="line">cp .&#x2F;sdk&#x2F;include&#x2F;*.h &#x2F;usr&#x2F;local&#x2F;include</span><br></pre></td></tr></table></figure>
<p>再将cx_Oracle卸载后重新编译安装：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 uninstall cx_Oracle</span><br><span class="line">sudo pip3 install cx_Oracle</span><br></pre></td></tr></table></figure>
<p>重启PyCharm后，问题解决。</p>
<h2 id="cx-Oracle的简单使用"><a href="#cx-Oracle的简单使用" class="headerlink" title="cx_Oracle的简单使用"></a>cx_Oracle的简单使用</h2><p>cx_Oracle的使用上没有什么问题，一切按套路来写就可以了。贴一个简单的示例：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import cx_Oracle</span><br><span class="line">conn &#x3D; cx_Oracle.connect(&#39;username&#39;, &#39;password&#39;,&#39;host:port&#x2F;sid&#39;)</span><br><span class="line">cursor &#x3D; conn.cursor()</span><br><span class="line">cursor.execute(&#39;select column from table&#39;)</span><br><span class="line">result &#x3D; cursor.fetchall()</span><br><span class="line">for row in result:</span><br><span class="line">    print(row)</span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>
<p>更加详细的内容请参考官方文档：<br><a target="_blank" rel="noopener" href="https://cx-oracle.readthedocs.io/en/latest/">https://cx-oracle.readthedocs.io/en/latest/</a><br><a target="_blank" rel="noopener" href="https://oracle.github.io/python-cx_Oracle/">https://oracle.github.io/python-cx_Oracle/</a>  </p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a target="_blank" rel="noopener" href="https://gist.github.com/thom-nic/6011715">https://gist.github.com/thom-nic/6011715</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/37711482/how-to-install-oracle-instant-client-on-a-mac">http://stackoverflow.com/questions/37711482/how-to-install-oracle-instant-client-on-a-mac</a>  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201707/%E9%98%BF%E9%87%8C%E4%BA%91RDS&DRDS%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201707/%E9%98%BF%E9%87%8C%E4%BA%91RDS&DRDS%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">阿里云RDS&DRDS初探</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="RDS"><a href="#RDS" class="headerlink" title="RDS"></a>RDS</h3><blockquote>
<p>阿里云关系型数据库（Relational Database Service，简称 RDS）是一种稳定可靠、可弹性伸缩的在线数据库服务。基于阿里云分布式文件系统和高性能存储，RDS 支持 MySQL、SQL Server、PostgreSQL 和 PPAS（Postgre Plus Advanced Server，一种高度兼容 Oracle 的数据库）引擎，并且提供了容灾、备份、恢复、监控、迁移等方面的全套解决方案，彻底解决数据库运维的烦恼。</p>
</blockquote>
<p><strong>RDS for MySQL</strong> 可以认为是云上的MySQL。目前可选的版本有5.5/5.6，部分区域可选择5.7。  </p>
<h3 id="DRDS"><a href="#DRDS" class="headerlink" title="DRDS"></a>DRDS</h3><blockquote>
<p>分布式关系型数据库服务（Distributed Relational Database Service，简称 DRDS）是阿里巴巴致力于解决单机数据库服务瓶颈问题而自主研发推出的分布式数据库产品。DRDS 高度兼容 MySQL 协议和语法，支持自动化水平拆分、在线平滑扩缩容、弹性扩展、透明读写分离，具备数据库全生命周期运维管控能力。DRDS 前身为淘宝 TDDL，是近千核心应用首选组件。</p>
</blockquote>
<p><strong>DRDS</strong> 可以认为是云上的TDDL中间件。DRDS必须依赖RDS。  </p>
<h2 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h2><h3 id="RDS首页"><a href="#RDS首页" class="headerlink" title="RDS首页"></a>RDS首页</h3><p><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/rds/mysql">https://www.aliyun.com/product/rds/mysql</a></p>
<h3 id="RDS控制台"><a href="#RDS控制台" class="headerlink" title="RDS控制台"></a>RDS控制台</h3><p><a target="_blank" rel="noopener" href="https://rdsnew.console.aliyun.com/">https://rdsnew.console.aliyun.com</a></p>
<h3 id="RDS文档"><a href="#RDS文档" class="headerlink" title="RDS文档"></a>RDS文档</h3><p><a target="_blank" rel="noopener" href="https://help.aliyun.com/product/26090.html">https://help.aliyun.com/product/26090.html</a></p>
<h3 id="DRDS首页"><a href="#DRDS首页" class="headerlink" title="DRDS首页"></a>DRDS首页</h3><p><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/drds">https://www.aliyun.com/product/drds</a></p>
<h3 id="DRDS控制台"><a href="#DRDS控制台" class="headerlink" title="DRDS控制台"></a>DRDS控制台</h3><p><a target="_blank" rel="noopener" href="https://drds.console.aliyun.com/prectrl/home/index">https://drds.console.aliyun.com/prectrl/home/index</a></p>
<blockquote>
<p>DRDS控制台不在左侧快捷菜单中，可以直接通过链接进入</p>
</blockquote>
<h3 id="DRDS文档"><a href="#DRDS文档" class="headerlink" title="DRDS文档"></a>DRDS文档</h3><p><a target="_blank" rel="noopener" href="https://help.aliyun.com/product/29657.html">https://help.aliyun.com/product/29657.html</a></p>
<h2 id="RDS初探"><a href="#RDS初探" class="headerlink" title="RDS初探"></a>RDS初探</h2><ol>
<li><p>进入控制台，点击右侧的”创建实例”<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/98xvs.jpg">  </p>
<blockquote>
<p>创建RDS实例需要几分钟的时间</p>
</blockquote>
</li>
<li><p>按量付费，最低配置的RDS实例，目前为0.324元/小时<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/etmui.jpg"></p>
<blockquote>
<p>这里选择5.6版本，猜测在工具的支持上BUG会少一些    </p>
</blockquote>
</li>
<li><p>在实例列表中可以看到已创建的实例<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/e34py.jpg"><br>点击进入详情页可以进行实例状态查看以及管理<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/d3t0z.jpg">  </p>
</li>
<li><p>创建数据库、创建帐号的操作比较简单，不再赘述。  </p>
</li>
<li><p>添加IP白名单<br>首先，在数据安全性中，将default分组中的127.0.0.1临时改为0.0.0.0/0，允许所有地址访问<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/seljp.jpg"><br>登录数据库：<br>mysql -hrm-xxxxxxxxxxx.mysql.rds.aliyuncs.com -P3306 -utestuser -p<br>查询当前IP：<br>show processlist;<br>在数据安全性中，尽快将default分组中的IP由0.0.0.0/0改回当前的真实的IP。  </p>
</li>
<li><p>登录数据库<br>接下来可以用命令行或第三方工具进行登录。RDS不提供root用户。  </p>
</li>
<li><p>其它功能<br>另外可以添加只读实例、灾备实例，按需购买即可，猜测原理应该是基于主从复制的。<br>另外可以在WEB界面中进行数据迁移、导入等操作。<br>WEB控制台中提供了比较完善的日志查询、慢SQL分析、监控与告警功能点，有时间可以慢慢探索。  </p>
</li>
</ol>
<h2 id="DRDS初探"><a href="#DRDS初探" class="headerlink" title="DRDS初探"></a>DRDS初探</h2><ol>
<li><p>进入控制台，点击右侧的”创建实例”。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/dnf0x.jpg">  </p>
</li>
<li><p>按量付费，共享实例的DRDS，目前价格为0.2元/小时。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/murxc.jpg">  </p>
<blockquote>
<p>按量后付费的需要提前向帐户中充值  </p>
</blockquote>
</li>
<li><p>购买后创建过程非常快，马上就可以在概览中看到。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/2anc1.jpg">  </p>
</li>
<li><p>进入”详情”页面后，目前DRDS下还没有数据库，可以点击下方链接进行创建。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/pk7r3.jpg">  </p>
<blockquote>
<p>请注意： 此步骤依赖于RDS，需要先进行RDS的购买。<br>RDS购买时，请注意需要在同一个区域中，尽量不要跨区。  </p>
</blockquote>
</li>
<li><p>如果已经购买过RDS，并创建了一个实例，就在左侧的实例清单中就可以选择到了。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/3yyc2.jpg">  </p>
</li>
<li><p>填写基本信息，创建类型这里选择”拆分”。设置好数据库名及密码。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/a083z.jpg">  </p>
<blockquote>
<p>拆分：即分库分表，将数据按照拆分规则分拆到多个库表中，由 DRDS 代理 SQL 执行。拆分涉及到数据导入导出、SQL 功能/性能测试和改造，对应用功能和性能会有一定的影响。  </p>
<p>非拆分：将已有的 RDS 数据库交由 DRDS 进行代理访问，实现读写分离的功能。无需进行数据导入，无需修改程序代码，修改数据库连接串和用户名密码即可。  </p>
</blockquote>
</li>
<li><p>系统会自动在RDS实例上创建8个分库，直接点”下一步”创建成功。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/3aiuf.jpg">  </p>
<blockquote>
<p>创建数据库需要几分钟的时间  </p>
</blockquote>
</li>
<li><p>创建完成后，可以在DRDS数库列表中看到<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/gfi7s.jpg"><br>在RDS控制台中也可以看到自动创建的8+1个库，绑定帐号名随机生成，密码与DRDS密码是不同的，估计也是随机生成，所以无法直接登录查看RDS库，只能在DRDS中统一管理。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/e2o0b.jpg"></p>
</li>
<li><p>点击”管理”，可以查看详情页面<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/b0klv.jpg"></p>
</li>
<li><p>WEB界面登录<br>详情页面，点击上方的”登录数据库”按钮，有一个WEB图形化控制台<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/3wmvn.jpg"><br>但点击登录后，会报错：Access denied for user ‘ xx’@’xx.xx.xx.xx’<br>原因未知，有可能是IP限制。官方文档中也未给出示例。  </p>
</li>
<li><p>命令行登录<br>可以使用命令行登录<br><code>mysql -hdrdsxxxxxxxxpublic.drds.aliyuncs.com -P3306 -uyourname -p</code><br>版本显示为 5.6.29-TDDL-5.1.27-1217986  </p>
</li>
<li><p>第三方客户端登录<br>可以使用第三方客户端登录，如Sequel Pro，也可以正常登录。<br>（之前用过的的Cobar/MyCat都是比较挑客户端的）<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/0n8ti.jpg">  </p>
</li>
<li><p>在DRDS执行一个简单的建表语句测试  </p>
<p>建一个普通表：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> normal_table(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line"><span class="keyword">primary</span> <span class="keyword">key</span>(id)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>
<p>建一个分库表：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> shard_table(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line"><span class="keyword">primary</span> <span class="keyword">key</span>(id)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 dbpartition <span class="keyword">by</span> hash(id) tbpartition <span class="keyword">by</span> hash(id) tbpartitions <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>在WEB控制台中可以查看表的基本信息：<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/rbjed.jpg"></p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201709/swagger2markup%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81API%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201709/swagger2markup%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81API%E6%96%87%E6%A1%A3/" class="post-title-link" itemprop="url">swagger2markup生成静态API文档</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>swagger我们已经不陌生了，另外可以借助于swagger-ui，可以实现动态的、可测试的API文档。  </p>
<p>本文主要介绍如何使用swagger2markup生成静态的HTML及PDF文档。  </p>
<p>生成的文档样式如下：<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/29fxd.jpg"></p>
<h2 id="swagger2markup主页"><a href="#swagger2markup主页" class="headerlink" title="swagger2markup主页"></a>swagger2markup主页</h2><p>GitHub主页：<br><a target="_blank" rel="noopener" href="https://github.com/Swagger2Markup/swagger2markup">https://github.com/Swagger2Markup/swagger2markup</a></p>
<h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><p><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/qlz5j.jpg"></p>
<p>swagger2markup的实现方式比较绕，pom.xml里的依赖也比较多，而且每次构建都生成文档的话，需要耗费较长的时间。<br>所以<strong>不建议直接集成到工程内部</strong>，可以将它独立成一个工程出来，专门用于生成文档。  </p>
<h2 id="配置及代码"><a href="#配置及代码" class="headerlink" title="配置及代码"></a>配置及代码</h2><p>配置及代码不多，就不上传github了，在下面直接贴出来。</p>
<p>实现方式大体是：</p>
<ol>
<li>运行单元测试采集远程的swagger.json文件并保存到本地</li>
<li>maven插件将swagger.json转换为asciidoc</li>
<li>将asciidoc再转为html+pdf。  </li>
</ol>
<p>用到了custom.baseurl这个JVM自定义的参数。默认情况下采集127.0.0.1:8080下的应用。<br>也可以在mvn后面指定<code>-Dcustom.baseurl=xx.xx.xx.xx</code>来实现自定义的采集，如果微服务较多，可以用start.sh脚本来进行批量采集</p>
<h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.foo.bar<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>apidocs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>apidocs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>ApiDocs<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">custom.baseurl</span>&gt;</span>127.0.0.1:8080<span class="tag">&lt;/<span class="name">custom.baseurl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger2markup.version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">swagger2markup.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">asciidoctor.input.directory</span>&gt;</span>$&#123;project.basedir&#125;/src/docs/asciidoc<span class="tag">&lt;/<span class="name">asciidoctor.input.directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger.output.dir</span>&gt;</span>$&#123;project.build.directory&#125;/swagger<span class="tag">&lt;/<span class="name">swagger.output.dir</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger.snippetOutput.dir</span>&gt;</span>$&#123;project.build.directory&#125;/asciidoc/snippets<span class="tag">&lt;/<span class="name">swagger.snippetOutput.dir</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generated.asciidoc.directory</span>&gt;</span>$&#123;project.build.directory&#125;/asciidoc/generated<span class="tag">&lt;/<span class="name">generated.asciidoc.directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">asciidoctor.html.output.directory</span>&gt;</span>$&#123;project.build.directory&#125;/asciidoc/html<span class="tag">&lt;/<span class="name">asciidoctor.html.output.directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">asciidoctor.pdf.output.directory</span>&gt;</span>$&#123;project.build.directory&#125;/asciidoc/pdf<span class="tag">&lt;/<span class="name">asciidoctor.pdf.output.directory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger.input</span>&gt;</span>$&#123;swagger.output.dir&#125;/swagger.json<span class="tag">&lt;/<span class="name">swagger.input</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--springboot--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--swagger2markup--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.swagger2markup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger2markup-spring-restdocs-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger2markup.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-staticdocs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.robwin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>assertj-swagger<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.restdocs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-restdocs-mockmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">compilerVersion</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">compilerVersion</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">source</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">target</span>&gt;</span>$&#123;java.version&#125;<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- prevents endPosTable exception for maven compile --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">useIncrementalCompilation</span>&gt;</span>false<span class="tag">&lt;/<span class="name">useIncrementalCompilation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">systemPropertyVariables</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">io.springfox.staticdocs.outputDir</span>&gt;</span>$&#123;swagger.output.dir&#125;<span class="tag">&lt;/<span class="name">io.springfox.staticdocs.outputDir</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">io.springfox.staticdocs.snippetsOutputDir</span>&gt;</span>$&#123;swagger.snippetOutput.dir&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">io.springfox.staticdocs.snippetsOutputDir</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">custom.baseurl</span>&gt;</span>$&#123;custom.baseurl&#125;<span class="tag">&lt;/<span class="name">custom.baseurl</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">systemPropertyVariables</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- First, use the swagger2markup plugin to generate asciidoc --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.swagger2markup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger2markup-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger2markup.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.swagger2markup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger2markup-import-files-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger2markup.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.swagger2markup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger2markup-spring-restdocs-ext<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger2markup.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">swaggerInput</span>&gt;</span>$&#123;swagger.input&#125;<span class="tag">&lt;/<span class="name">swaggerInput</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">outputDir</span>&gt;</span>$&#123;generated.asciidoc.directory&#125;<span class="tag">&lt;/<span class="name">outputDir</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.markupLanguage</span>&gt;</span>ASCIIDOC<span class="tag">&lt;/<span class="name">swagger2markup.markupLanguage</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.pathsGroupedBy</span>&gt;</span>TAGS<span class="tag">&lt;/<span class="name">swagger2markup.pathsGroupedBy</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.dynamicOverview.contentPath</span>&gt;</span></span><br><span class="line">              $&#123;project.basedir&#125;/src/docs/asciidoc/extensions/overview</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.dynamicOverview.contentPath</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.dynamicDefinitions.contentPath</span>&gt;</span></span><br><span class="line">              $&#123;project.basedir&#125;/src/docs/asciidoc/extensions/definitions</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.dynamicDefinitions.contentPath</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.dynamicPaths.contentPath</span>&gt;</span>$&#123;project.basedir&#125;/src/docs/asciidoc/extensions/paths</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.dynamicPaths.contentPath</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.dynamicSecurity.contentPath</span>&gt;</span></span><br><span class="line">              $&#123;project.basedir&#125;src/docs/asciidoc/extensions/security/</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.dynamicSecurity.contentPath</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.springRestDocs.snippetBaseUri</span>&gt;</span>$&#123;swagger.snippetOutput.dir&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.springRestDocs.snippetBaseUri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swagger2markup.extensions.springRestDocs.defaultSnippets</span>&gt;</span>true</span><br><span class="line">            <span class="tag">&lt;/<span class="name">swagger2markup.extensions.springRestDocs.defaultSnippets</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>test<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>convertSwagger2markup<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- Run the generated asciidoc through Asciidoctor to generate</span></span><br><span class="line"><span class="comment">           other documentation types, such as PDFs or HTML5 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.asciidoctor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>asciidoctor-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Include Asciidoctor PDF for pdf generation --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.asciidoctor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>asciidoctorj-pdf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.0-alpha.10.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jruby<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jruby-complete<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Configure generic document generation settings --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>$&#123;asciidoctor.input.directory&#125;<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">sourceDocumentName</span>&gt;</span>index.adoc<span class="tag">&lt;/<span class="name">sourceDocumentName</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">doctype</span>&gt;</span>book<span class="tag">&lt;/<span class="name">doctype</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">toc</span>&gt;</span>left<span class="tag">&lt;/<span class="name">toc</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">toclevels</span>&gt;</span>3<span class="tag">&lt;/<span class="name">toclevels</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">numbered</span>&gt;</span><span class="tag">&lt;/<span class="name">numbered</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hardbreaks</span>&gt;</span><span class="tag">&lt;/<span class="name">hardbreaks</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sectlinks</span>&gt;</span><span class="tag">&lt;/<span class="name">sectlinks</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sectanchors</span>&gt;</span><span class="tag">&lt;/<span class="name">sectanchors</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generated</span>&gt;</span>$&#123;generated.asciidoc.directory&#125;<span class="tag">&lt;/<span class="name">generated</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Since each execution can only handle one backend, run</span></span><br><span class="line"><span class="comment">             separate executions for each desired output type --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>output-html<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>test<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>process-asciidoc<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">backend</span>&gt;</span>html5<span class="tag">&lt;/<span class="name">backend</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;asciidoctor.html.output.directory&#125;<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>output-pdf<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>test<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>process-asciidoc<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">backend</span>&gt;</span>pdf<span class="tag">&lt;/<span class="name">backend</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;asciidoctor.pdf.output.directory&#125;<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- specify the main class for the manifest --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>io.github.robwin.swagger2markup.petstore.Application<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- copy dependencies to the lib directory --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- copy the generated documents --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>prepare-package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.outputDirectory&#125;/static/docs<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;asciidoctor.html.output.directory&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;asciidoctor.pdf.output.directory&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="JUnit测试类"><a href="#JUnit测试类" class="headerlink" title="JUnit测试类"></a>JUnit测试类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sitech.sdtools;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.autoconfigure.restdocs.AutoConfigureRestDocs;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureRestDocs(outputDir = &quot;build/asciidoc/snippets&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Swagger2MarkupTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createSpringfoxSwaggerJson</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String baseurl = System.getProperty(<span class="string">&quot;custom.baseurl&quot;</span>);</span><br><span class="line">        String swaggerUrl = <span class="string">&quot;http://&quot;</span> + baseurl + <span class="string">&quot;/v2/api-docs&quot;</span>;</span><br><span class="line">        String outputDir = System.getProperty(<span class="string">&quot;io.springfox.staticdocs.outputDir&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;swaggerUrl: &quot;</span> + swaggerUrl);</span><br><span class="line">        System.out.println(<span class="string">&quot;outputDir: &quot;</span> + outputDir);</span><br><span class="line"></span><br><span class="line">        String swaggerJson = restTemplate.getForObject(swaggerUrl, String.class);</span><br><span class="line"></span><br><span class="line">        Files.createDirectories(Paths.get(outputDir));</span><br><span class="line">        <span class="keyword">try</span> (BufferedWriter writer = Files.newBufferedWriter(Paths.get(outputDir, <span class="string">&quot;swagger.json&quot;</span>), StandardCharsets.UTF_8)) &#123;</span><br><span class="line">            writer.write(swaggerJson);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="批量shell脚本"><a href="#批量shell脚本" class="headerlink" title="批量shell脚本"></a>批量shell脚本</h3><p>start.sh  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/env bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 自定义工程名及URL</span></span><br><span class="line">prjnames=(&quot;project1&quot; &quot;project2&quot; &quot;project3&quot;)</span><br><span class="line">prjurls=(&quot;xx.xx.xx.xx:7477&quot; &quot;xx.xx.xx.xx:23053&quot; &quot;xx.xx.xx.xx:24275&quot;)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 默认参数</span></span><br><span class="line">datestr=`date +%Y%m%d`</span><br><span class="line">srcdir=./target/asciidoc/html</span><br><span class="line">destdir=./src/docs/html/$&#123;datestr&#125;</span><br><span class="line">mkdir $&#123;destdir&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 循环生成文档</span></span><br><span class="line">for prjname in $&#123;prjnames[@]&#125;</span><br><span class="line">do</span><br><span class="line">    prjurl=$&#123;prjurls[$&#123;i&#125;]&#125;</span><br><span class="line">    echo &quot;文档生成开始 - $&#123;prjname&#125; - $&#123;prjurl&#125;&quot;</span><br><span class="line"></span><br><span class="line">    mvn clean test -Dcustom.baseurl=$&#123;prjurl&#125;</span><br><span class="line">    cp $&#123;srcdir&#125;/index.html $&#123;destdir&#125;/$&#123;prjname&#125;.html</span><br><span class="line"></span><br><span class="line">    i=$((i+1))</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="单文档生成步骤"><a href="#单文档生成步骤" class="headerlink" title="单文档生成步骤"></a>单文档生成步骤</h2><ol>
<li>先本机将需要生成API文档的工程启动，IP及端口指定为127.0.0.1:8080</li>
<li>在本工程下运行<code>mvn clean test</code></li>
<li>在target/asciidoc/html中查看API文档并拷贝出来</li>
</ol>
<h2 id="批量文档生成步骤"><a href="#批量文档生成步骤" class="headerlink" title="批量文档生成步骤"></a>批量文档生成步骤</h2><ol>
<li>在DCOS中将所有服务启动</li>
<li>修改start.sh中的prjurls</li>
<li>执行<code>./start.sh</code></li>
<li>在<code>src/docs/html/日期/</code>中查看生成的API文档</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201709/%E4%BD%BF%E7%94%A8Postman+Newman+Jenkins%E5%AE%9E%E7%8E%B0%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201709/%E4%BD%BF%E7%94%A8Postman+Newman+Jenkins%E5%AE%9E%E7%8E%B0%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">Postman+Newman+Jenkins实现REST自动回归测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>本文主要介绍如何使用Postman+Newman+Jenkins，实现微服务自动化的回归测试。  </p>
<h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><ul>
<li>Postman：用于编写测试用例，导出.json格式的测试脚本</li>
<li>Newman：命令行方式执行postman导出的测试脚本</li>
<li>Jenkins：实现测试的自动化</li>
</ul>
<h2 id="Postman的下载"><a href="#Postman的下载" class="headerlink" title="Postman的下载"></a>Postman的下载</h2><p>官网：<br><a target="_blank" rel="noopener" href="https://www.getpostman.com/">https://www.getpostman.com/</a>  </p>
<h2 id="Newman的安装"><a href="#Newman的安装" class="headerlink" title="Newman的安装"></a>Newman的安装</h2><p>Newman可以运行Postman生成的.json测试用例，生成.html格式的测试报告。  </p>
<p>可以直接使用npm进行安装：  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install newman --global;</span><br></pre></td></tr></table></figure>
<p>更多文档，可以参考GitHub：<br><a target="_blank" rel="noopener" href="https://github.com/postmanlabs/newman">https://github.com/postmanlabs/newman</a></p>
<h2 id="测试过程"><a href="#测试过程" class="headerlink" title="测试过程"></a>测试过程</h2><ol>
<li>   使用Postman编写微服务接口的测试用例，并导出json文件。</li>
<li>   Jenkins创建测试项目，使用newman来执行测试脚本，生成测试报告。</li>
<li>   将测试项目与工程构建项目关联，使之在构建发布到测试环境后触发执行。</li>
</ol>
<h2 id="使用Postman编写测试用例"><a href="#使用Postman编写测试用例" class="headerlink" title="使用Postman编写测试用例"></a>使用Postman编写测试用例</h2><ol>
<li><p>根据swagger服务契约，使用Postman工具，传入测试参数并模拟调用。  </p>
</li>
<li><p>调用后，可以点击左侧的文件夹图标，新建一个Collection。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/hvksa.jpg"></p>
</li>
<li><p>点击右侧的Save按钮，将本次测试脚本保存到刚才创建的Collection中。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/2oixb.jpg"></p>
</li>
<li><p>继续进行其它API的调用，并保存至Collection中。<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/859qm.jpg"></p>
</li>
<li><p>点击Collection上的省略号图标，并选择Export，将测试用例导出保存为.json文件。</p>
</li>
<li><p>上传到服务器相应目录下。</p>
</li>
</ol>
<h2 id="配置Jenkins测试项目"><a href="#配置Jenkins测试项目" class="headerlink" title="配置Jenkins测试项目"></a>配置Jenkins测试项目</h2><p>接下来配置Jenkins，用于触发调用newman进行测试。</p>
<ol>
<li>创建一个自由风格的Jenkins项目  </li>
<li>在构建一栏，输入以下脚本，用于触发newman测试<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/ktuvx.jpg">  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newman run /home/deployer/functest/foobar/foobar.json --reporters cli,html,json,junit --reporter-html-export /home/deployer/functest_report/foobar/foobar_report.html</span><br></pre></td></tr></table></figure></li>
<li>可以在主项目的构建配置中，增加构建后操作，构建完成后自动触发执行这个测试项目<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/791n9.jpg"></li>
</ol>
<h2 id="查看测试结果"><a href="#查看测试结果" class="headerlink" title="查看测试结果"></a>查看测试结果</h2><ol>
<li>可以在Jenkins的日志中直接查看结果</li>
<li>也可以用Web容器将生成的.html测试报告暴露出来，直接通过浏览器访问</li>
</ol>
<h2 id="自动化回归测试的必要性"><a href="#自动化回归测试的必要性" class="headerlink" title="自动化回归测试的必要性"></a>自动化回归测试的必要性</h2><p>Postman、Selenium这样的动化的回归测试真的有必要吗，它能够帮助我们发现多少问题，为了实现它我们要多付出多大的代价？<br>说到底，这是一个有关”性价比”的问题。  </p>
<p>首先从组织结构上来看，如果项目的规模大到了有专门的测试团队，那么无疑会大大降低测试团队的工作量。<br>但如果是开发人员兼职做测试，那么多花点心思在controller层的集成测试上，可以会用更少的时间，达到差不多的效果。  </p>
<p>有时间会再写一下关于实践中单元测试、集成测试的一些取舍，以及手工回归测试与swagger参数示例等方面的内容。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/201709/%E5%85%B3%E4%BA%8EFeign%E7%9A%84Fallback%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/201709/%E5%85%B3%E4%BA%8EFeign%E7%9A%84Fallback%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">关于Feign的Fallback处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-26 09:44:33" itemprop="dateCreated datePublished" datetime="2021-01-26T09:44:33+08:00">2021-01-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Feign的不恰当的fallback"><a href="#Feign的不恰当的fallback" class="headerlink" title="Feign的不恰当的fallback"></a>Feign的不恰当的fallback</h2><p>Feign的坑不少，特别与Hystrix集成之后。<br>在微服务引入Feign后，上线不久后便发现，对于一个简单的查询类调用，在下游返回正常的”404-资源不存在”这种业务异常时，Feign也做了fallback，最终导致circuit break，引发平台告警。</p>
<h2 id="REST接口的设计"><a href="#REST接口的设计" class="headerlink" title="REST接口的设计"></a>REST接口的设计</h2><p>为了解释这个问题，首先还是要从REST接口开始谈起。</p>
<p>REST的一个缺点（也有人认为是优势），它只是一种依赖于HTTP的”风格”，而没有明确的”规范”，所以客户端和服务端之间，要自行达成某种”约定”。<br>例如返回码，就要硬往HTTP STATUS上靠。</p>
<p>关于返回码，公认的”最佳实践”大概是这样的：</p>
<ol>
<li>如果业务处理成功，http status返回200、204等。如果有内容，BODY中直接返回内容（对象或数组都可以），不再有RPC时代的code/message这样的状态描述。如果没有内容，BODY直接空白，No News Is Good News。</li>
<li>如果业务处理失败，业务逻辑导致的，则http status返回4XX，BODY中返回报错信息，报错信息的统一格式大概是这样的：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;status&quot;: 409,  &#x2F;&#x2F; 冗余字段，把http status再重复一遍</span><br><span class="line">  &quot;code&quot;: 888,  &#x2F;&#x2F; 自定义的错误码</span><br><span class="line">  &quot;message&quot;: &quot;foobar&quot;  &#x2F;&#x2F; 错误描述</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>如果是其它未知错误，抛5XX，认为是服务器内部错误，而不是逻辑错误。</li>
</ol>
<p>所以对于APP/WEB等客户端来说，很简单，如果发现2XX，则认为成功，直接获取数据。如果非2XX，则是失败，直接取code和message，展现到前台。</p>
<p>但是对于微服务之间的调用，就要区分是”4XX-业务逻辑异常”，还是”5XX-服务器异常”了。。。</p>
<h2 id="REST返回码的选择"><a href="#REST返回码的选择" class="headerlink" title="REST返回码的选择"></a>REST返回码的选择</h2><p>下面详细讲一下HTTP STATUS的选择问题。</p>
<p>关于HTTP返回码，看了很多参考（论战），”大概”可以这样选择：</p>
<p>成功： 2XX系列  </p>
<ul>
<li>200 OK  // 查询、删除成功用这个</li>
<li>201 CREATED  // 新增、修改时用这个。且返回BODY中无任何信息。</li>
</ul>
<p>业务异常： 4XX系列  </p>
<ul>
<li>400 BAD_REQUEST  // 现在有很多人在业务异常时抛这个错。但400要慎重使用。稍后解释。</li>
<li>404 NOT_FOUND  // 查询不到结果时用这个</li>
<li>403 FORBIDDEN  // 这个也慎重使用。</li>
<li>409 CONFLICT   // 业务异常时，可以用这个。</li>
</ul>
<p>主机异常：5XX系列  </p>
<ul>
<li>500 INTERNAL_SERVER_ERROR // 对于未知异常，统一用这个了</li>
<li>503 SERVICE_UNAVAILABLE  // Hystrix异常用这个</li>
</ul>
<h2 id="什么时候应该Fallback"><a href="#什么时候应该Fallback" class="headerlink" title="什么时候应该Fallback"></a>什么时候应该Fallback</h2><p>2XX，成功，这个不用再讨论。<br>5XX，也相当明确，直接Fallback，这个也不用讨论。<br>4XX，可以一律认为是业务逻辑异常（或者更精确的说，可以认为4XX中的某几个是业务异常）。这时候，应该是用if/else来处理这个异常，而不应该动用Hystrix来Fallback。  </p>
<p>Feign在默认情况下，对于非2XX，都认为是异常。这个地方是有问题的。特别是对于404这种非常容易抛出的业务异常来说，没两下就circuit break了。</p>
<p>Feign的Issue里已经有人提过这个问题，后面的版本中已经提供了一个参数:<code>decode404</code>。</p>
<p>可以看一下Feign的代码，位置在：<br>~/.m2/repository/io/github/openfeign/feign-core/9.5.0/feign-core-9.5.0.jar!/feign/SynchronousMethodHandler.class<br><img src="https://bluexiii.oss-cn-beijing.aliyuncs.com/sgqvj.jpg"></p>
<p>所以在Client上可以这样设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@FeignClient(name &#x3D; &quot;marathon-lb&quot;, fallback &#x3D; FooBarClientFallback.class, decode404 &#x3D; true)</span><br><span class="line">@RequestMapping(value &#x3D; &quot;&#x2F;foo&#x2F;bar&quot;)</span><br><span class="line">public interface FooBarClient &#123;</span><br><span class="line">    ... ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只需要加入<code>decode404 = true</code>这一个参数，Feign对于2XX和404 ，都不会走Fallback了。<br>排除404，已经基本上够用了，如果想把409、400等status也加到例外中，可以重写一下Feign的errorDecoder。</p>
<h2 id="关于4XX错误"><a href="#关于4XX错误" class="headerlink" title="关于4XX错误"></a>关于4XX错误</h2><p>刚才提到的，如果把2XX，另外加上4XX，全部认为是正常业务逻辑，都不走Fallback，可不可行？ 我想最好不要这样很笼统的设置，要看情况。</p>
<p>因为http status不全是服务端给出的，如果服务端与消费者之间隔着一些Nginx、HA、Kong这样的网关，那么情况可能就复杂了，网关也有可能抛出status。</p>
<p>例如当某个微服务宕机之后，Kong网关会直接返回400，这种情况下，很明显是应当Fallback的。</p>
<p>所以，在定义错误码时，要尽量避开400、403这种很溃常见的码，像409这样小众的，差不多可以放心使用。<br>这样，调用方就可以有针对性的对某几个4XX的status进行单独配置，配置为业务异常。  </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/12/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/14/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BlueXIII</p>
  <div class="site-description" itemprop="description">IT技术类文章、笔记分享</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">273</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiiiblue" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiiiblue" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/bluexiii" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;bluexiii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18050487号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BlueXIII</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
