<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.bluexiii.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="IT技术类文章、笔记分享">
<meta property="og:type" content="website">
<meta property="og:title" content="BlueXIII&#39;s Blog">
<meta property="og:url" content="http://www.bluexiii.com/page/10/index.html">
<meta property="og:site_name" content="BlueXIII&#39;s Blog">
<meta property="og:description" content="IT技术类文章、笔记分享">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="BlueXIII">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.bluexiii.com/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>BlueXIII's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BlueXIII's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">热爱技术,持续学习</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/SRS%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/SRS%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">SRS配置笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-18 15:15:32" itemprop="dateCreated datePublished" datetime="2020-08-18T15:15:32+08:00">2020-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:04:05" itemprop="dateModified" datetime="2021-01-05T14:04:05+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><ul>
<li><a target="_blank" rel="noopener" href="http://ossrs.net/srs.release/releases/">http://ossrs.net/srs.release/releases/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ossrs/srs">https://github.com/ossrs/srs</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ossrs/srs/wiki/v3_CN_Home">https://github.com/ossrs/srs/wiki/v3_CN_Home</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ossrs/srs/wiki/v3_CN_Docs">https://github.com/ossrs/srs/wiki/v3_CN_Docs</a></li>
</ul>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitee.com/winlinvip/srs.oschina.git srs</span><br><span class="line"><span class="built_in">cd</span> srs/trunk </span><br><span class="line">git remote set-url origin https://github.com/ossrs/srs.git</span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line">./configure --osx</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./objs/srs -c conf/srs.conf</span><br><span class="line">./objs/srs -c conf/hls.conf</span><br><span class="line">./objs/srs -c conf/http.flv.live.conf</span><br><span class="line">./objs/srs -c conf/dash.conf</span><br><span class="line"></span><br><span class="line">[2020-08-19 08:35:47.917][Trace][4124][388] RTMP listen at tcp://0.0.0.0:1935, fd=7</span><br><span class="line">[2020-08-19 08:35:47.917][Trace][4124][388] HTTP-Server listen at tcp://0.0.0.0:8080, fd=8</span><br><span class="line">[2020-08-19 08:35:47.929][Trace][4124][388] signal installed, reload=1, reopen=30, fast_quit=15, grace_quit=3</span><br><span class="line">[2020-08-19 08:35:47.929][Trace][4124][388] http: api mount /console to ./objs/nginx/html/console</span><br></pre></td></tr></table></figure>
<h2 id="模拟推流"><a href="#模拟推流" class="headerlink" title="模拟推流"></a>模拟推流</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>((;;)); <span class="keyword">do</span> \</span><br><span class="line">    ./objs/ffmpeg/bin/ffmpeg -re -i ./doc/source.200kbps.768x320.flv \</span><br><span class="line">    -vcodec copy -acodec copy \</span><br><span class="line">    -f flv -y rtmp://127.0.0.1/live/livestream; \</span><br><span class="line">    sleep 1; \</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<ul>
<li>RTMP流地址 rtmp://127.0.0.1:1935/live/livestream</li>
<li>HLS流地址  <a target="_blank" rel="noopener" href="http://127.0.0.1:8080/live/livestream.m3u8">http://127.0.0.1:8080/live/livestream.m3u8</a></li>
<li>HTTP FLV  <a target="_blank" rel="noopener" href="http://127.0.0.1:8080/live/livestream.flv">http://127.0.0.1:8080/live/livestream.flv</a></li>
<li>DASH流地址 <a target="_blank" rel="noopener" href="http://192.168.1.170:8080/live/livestream.mpd">http://192.168.1.170:8080/live/livestream.mpd</a></li>
</ul>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><ul>
<li>versions    /api/v1/versions    获取服务器版本信息</li>
<li>summaries    /api/v1/summaries    获取服务器的摘要信息</li>
<li>rusages    /api/v1/rusages    获取服务器资源使用信息</li>
<li>self_proc_stats    /api/v1/self_proc_stats    获取服务器进程信息</li>
<li>system_proc_stats    /api/v1/system_proc_stats    获取服务器所有进程情况</li>
<li>meminfos    /api/v1/meminfos    获取服务器内存使用情况</li>
<li>authors    /api/v1/authors    获取作者、版权和License信息</li>
<li>features    /api/v1/features    获取系统支持的功能列表</li>
<li>requests    /api/v1/requests    获取请求的信息，即当前发起的请求的详细信息</li>
<li>vhosts    /api/v1/vhosts    获取服务器上的vhosts信息</li>
<li>streams    /api/v1/streams    获取服务器的streams信息</li>
<li>clients    /api/v1/clients    获取服务器的clients信息，默认获取前10个</li>
<li>configs    /api/v1/configs    CUID配置，RAW API</li>
</ul>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/feixiangsmile/article/details/105881467">使用SRS和Nginx配置HLS、RTMP方式视频直播</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dd3f58392aa0">MAC 搭建RTMP服务器nginx 和 srs</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/ffmpeg&ffplay&ffprobe%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/ffmpeg&ffplay&ffprobe%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">ffmpeg&ffplay&ffprobe常用命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-18 14:24:09" itemprop="dateCreated datePublished" datetime="2020-08-18T14:24:09+08:00">2020-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:03:21" itemprop="dateModified" datetime="2021-01-05T14:03:21+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><ul>
<li><a target="_blank" rel="noopener" href="https://ffmpeg.org/ffmpeg.html">ffmpeg官网</a></li>
</ul>
<h2 id="ffprobe"><a href="#ffprobe" class="headerlink" title="ffprobe"></a>ffprobe</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看媒体文件信息</span></span><br><span class="line">ffprobe test.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出文件的格式信息</span></span><br><span class="line">ffprobe -show_format test.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以json格式输出每个流最详细的信息</span></span><br><span class="line">ffprobe -print_format json -show_streams test.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示帧信息</span></span><br><span class="line">ffprobe  -show_streams test.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看包信息</span></span><br><span class="line">ffprobe -show_packets test.mp4</span><br></pre></td></tr></table></figure>
<h2 id="ffplay"><a href="#ffplay" class="headerlink" title="ffplay"></a>ffplay</h2><h3 id="常用示例"><a href="#常用示例" class="headerlink" title="常用示例"></a>常用示例</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 播放音视频文件</span></span><br><span class="line">ffplay test.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环播放</span></span><br><span class="line">ffplay test.mp4 -loop 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放音频流</span></span><br><span class="line">ffplay test.mp4 -ast 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放视频流</span></span><br><span class="line">ffplay test.mp4 -vst 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放rtmp流</span></span><br><span class="line">ffplay -i rtmp://127.0.0.1:1935/hls/mystream -fflags nobuffer -analyzeduration 1000000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放裸数据音频</span></span><br><span class="line">ffplay 原始文件(pcm文件) -f 格式 -channels 声道数 -ar 采样率</span><br><span class="line"><span class="comment"># 播放裸数据视频</span></span><br><span class="line">ffplay 原始格式(例如-f rawvideo) 格式(例如-pixel_format yuv420p) 宽高(例如-s 480*480) 原始文件(yuv)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放裸数据RGB</span></span><br><span class="line">ffplay -f rawvideo -pixel_format rgb24 -s 480*480 texture.rgb</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通用参数</span></span><br><span class="line">-f fmt	指定格式(音频或视频格式)</span><br><span class="line">-i filename	指定输入文件名，在linux下当然也能指定:0.0(屏幕录制)或摄像头</span><br><span class="line">-y	覆盖已有文件</span><br><span class="line">-t duration	记录时长为</span><br><span class="line">-fs limit_size 设置文件大小上限</span><br><span class="line">-ss time_off	从指定的时间(s)开始， [-]hh:mm:ss[.xxx]的格式也支持</span><br><span class="line">-re 代表按照帧率发送,作为推流工具一定要加入参数,否则ffmpeg会按照最高速率向流媒体服务器不停发送数据</span><br><span class="line"></span><br><span class="line"><span class="comment"># 视频参数</span></span><br><span class="line">-b 指定比特率(bits/s)，似乎ffmpeg是自动VBR的，指定了就大概是平均比特率</span><br><span class="line">-bitexact    使用标准比特率</span><br><span class="line">-vb    指定视频比特率(bits/s)</span><br><span class="line">-vframes number    设置转换多少桢(frame)的视频</span><br><span class="line">-r rate    帧速率(fps) （可以改，确认非标准桢率会导致音画不同步，所以只能设定为15或者29.97）</span><br><span class="line">-s size    指定分辨率 (320x240)</span><br><span class="line">-aspect aspect    设置视频长宽比(4:3, 16:9 or 1.3333, 1.7777)</span><br><span class="line">-croptop size    设置顶部切除尺寸(<span class="keyword">in</span> pixels)</span><br><span class="line">-cropbottom size    设置底部切除尺寸(<span class="keyword">in</span> pixels)</span><br><span class="line">-cropleft size    设置左切除尺寸 (<span class="keyword">in</span> pixels)</span><br><span class="line">-cropright size    设置右切除尺寸 (<span class="keyword">in</span> pixels)</span><br><span class="line">-padtop size    设置顶部补齐尺寸(<span class="keyword">in</span> pixels)</span><br><span class="line">-padbottom size    底补齐(<span class="keyword">in</span> pixels)</span><br><span class="line">-padleft size    左补齐(<span class="keyword">in</span> pixels)</span><br><span class="line">-padright size    右补齐(<span class="keyword">in</span> pixels)</span><br><span class="line">-padcolor color    补齐带颜色(000000-FFFFFF)</span><br><span class="line">-vn    取消视频</span><br><span class="line">-vcodec codec    强制使用codec编解码方式(<span class="string">&#x27;copy&#x27;</span> to copy stream)</span><br><span class="line">-sameq    使用同样视频质量作为源（VBR）</span><br><span class="line">-pass n    选择处理遍数（1或者2）。两遍编码非常有用。第一遍生成统计信息，第二遍生成精确的请求的码率</span><br><span class="line">-passlogfile file    选择两遍的纪录文件名为file</span><br><span class="line">-newvideo    在现在的视频流后面加入新的视频流</span><br><span class="line"></span><br><span class="line"><span class="comment"># 高级视频选项</span></span><br><span class="line">-pix_fmt format    <span class="built_in">set</span> pixel format, <span class="string">&#x27;list&#x27;</span> as argument shows all the pixel formats supported</span><br><span class="line">-intra    仅适用帧内编码</span><br><span class="line">-qscale q    以&lt;数值&gt;质量为基础的VBR，取值0.01-255，约小质量越好</span><br><span class="line">-loop_input    设置输入流的循环数(目前只对图像有效)</span><br><span class="line">-loop_output    设置输出视频的循环数，比如输出gif时设为0表示无限循环</span><br><span class="line">-g int    设置图像组大小</span><br><span class="line">-cutoff int    设置截止频率</span><br><span class="line">-qmin int    设定最小质量，与-qmax（设定最大质量）共用，比如-qmin 10 -qmax 31</span><br><span class="line">-qmax int    设定最大质量</span><br><span class="line">-qdiff int    量化标度间最大偏差 (VBR)</span><br><span class="line">-bf int    使用frames B 帧，支持mpeg1,mpeg2,mpeg4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 音频参数</span></span><br><span class="line">-ab    设置比特率(单位：bit/s，也许老版是kb/s)前面-ac设为立体声时要以一半比特率来设置，比如192kbps的就设成96，转换 默认比特率都较小，要听到较高品质声音的话建议设到160kbps（80）以上。</span><br><span class="line">-aframes number    设置转换多少桢(frame)的音频</span><br><span class="line">-aq quality    设置音频质量 (指定编码)</span><br><span class="line">-ar rate    设置音频采样率 (单位：Hz)，PSP只认24000</span><br><span class="line">-ac channels    设置声道数，1就是单声道，2就是立体声，转换单声道的TVrip可以用1（节省一半容量），高品质的DVDrip就可以用2</span><br><span class="line">-an    取消音频</span><br><span class="line">-acodec codec    指定音频编码(<span class="string">&#x27;copy&#x27;</span> to copy stream)</span><br><span class="line">-vol volume    设置录制音量大小(默认为256) &lt;百分比&gt; ，某些DVDrip的AC3轨音量极小，转换时可以用这个提高音量，比如200就是原来的2倍</span><br><span class="line">-newaudio    在现在的音频流后面加入新的音频流</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字幕参数</span></span><br><span class="line">-sn    取消字幕</span><br><span class="line">-scodec codec    设置字幕编码(<span class="string">&#x27;copy&#x27;</span> to copy stream)</span><br><span class="line">-newsubtitle    在当前字幕后新增</span><br><span class="line">-slang code    设置字幕所用的ISO 639编码(3个字母)</span><br><span class="line">Audio/Video 抓取选项:</span><br><span class="line">-vc channel    设置视频捕获通道(只对DV1394)</span><br><span class="line">-tvstd standard    设置电视标准 NTSC PAL(SECAM)	</span><br></pre></td></tr></table></figure>

<h2 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg"></a>ffmpeg</h2><h3 id="参数格式"><a href="#参数格式" class="headerlink" title="参数格式"></a>参数格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg &#123;1&#125; &#123;2&#125; -i &#123;3&#125; &#123;4&#125; &#123;5&#125;</span><br><span class="line">1. 全局参数</span><br><span class="line">2. 输入文件参数</span><br><span class="line">3. 输入文件</span><br><span class="line">4. 输出文件参数</span><br><span class="line">5. 输出文件</span><br><span class="line"></span><br><span class="line">ffmpeg \</span><br><span class="line">-y \ # 全局参数</span><br><span class="line">-c:a libfdk_aac -c:v libx264 \ # 输入文件参数</span><br><span class="line">-i input.mp4 \ # 输入文件</span><br><span class="line">-c:v libvpx-vp9 -c:a libvorbis \ # 输出文件参数</span><br><span class="line">output.webm # 输出文件</span><br></pre></td></tr></table></figure>
<h3 id="常用参数-1"><a href="#常用参数-1" class="headerlink" title="常用参数"></a>常用参数</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-c：指定编码器</span><br><span class="line">-c copy：直接复制，不经过重新编码（这样比较快）</span><br><span class="line">-c:v：指定视频编码器</span><br><span class="line">-c:a：指定音频编码器</span><br><span class="line">-i：指定输入文件</span><br><span class="line">-an：去除音频流</span><br><span class="line">-vn： 去除视频流</span><br><span class="line">-preset：指定输出的视频质量，会影响文件的生成速度，有以下几个可用的值 ultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow。</span><br><span class="line">-y：不经过确认，输出时直接覆盖同名文件。</span><br></pre></td></tr></table></figure>
<h3 id="常用示例-1"><a href="#常用示例-1" class="headerlink" title="常用示例"></a>常用示例</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 转换编码格式</span></span><br><span class="line">ffmpeg -i input.mp4 -c:v libx264 output.mp4</span><br><span class="line">ffmpeg -i input.mp4 -c:v libx265 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换容器格式</span></span><br><span class="line">ffmpeg -i input.mp4 -c copy output.webm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整码率</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-minrate 964K -maxrate 3856K -bufsize 2000K \</span><br><span class="line">output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变分辨率（transsizing）</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-vf scale=480:-1 \</span><br><span class="line">output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取音频</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-vn -c:a copy \</span><br><span class="line">output.aac</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加音轨</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-i input.aac -i input.mp4 \</span><br><span class="line">output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连续截图1秒钟</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-y \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-ss 00:01:24 -t 00:00:01 \</span><br><span class="line">output_%3d.jpg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定一帧截图</span></span><br><span class="line"><span class="comment"># -vframes 1指定只截取一帧，-q:v 2表示输出的图片质量</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-ss 00:01:24 \</span><br><span class="line">-i input.mp4 \</span><br><span class="line">-vframes 1 -q:v 2 \</span><br><span class="line">output.jpg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 裁剪</span></span><br><span class="line">ffmpeg -ss 00:01:50 -i input.mp4 -t 10.5 -c copy output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为音频添加封面</span></span><br><span class="line"><span class="comment"># -loop 1参数表示图片无限循环，-shortest参数表示音频文件结束，输出视频就结束。</span></span><br><span class="line">ffmpeg \</span><br><span class="line">-loop 1 \</span><br><span class="line">-i cover.jpg -i input.mp3 \</span><br><span class="line">-c:v libx264 -c:a aac -b:a 192k -shortest \</span><br><span class="line">output.mp4</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="其它示例"><a href="#其它示例" class="headerlink" title="其它示例"></a>其它示例</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 列出ffmpeg支持的所有格式</span></span><br><span class="line">ffmpeg -formats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剪切一段媒体文件,将文件从50秒开始剪切20秒,输入到新文件,-ss是指定时间,-t是指定时长 提取一个视频中的音频文件</span></span><br><span class="line"></span><br><span class="line">ffmpeg -i input.mp4 -ss 00:00:50.0 -codec copy -t 20 output,mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取一个视频中的音频文件</span></span><br><span class="line">ffmpeg -i input.mp4 -vn -acodec copy output.m4a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使一个视频中的音频静音</span></span><br><span class="line">ffmpeg -i input.mp4 -an -vcodec copy output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从MP4文件中导出H264裸流</span></span><br><span class="line">ffmpeg -i test.mp4 -an -vcodec copy -bsf:v h264_mp4toannexb output.h264</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用aac和h264文件生成mp4文件</span></span><br><span class="line">ffmpeg -i input.aac -i input.h264 -acodec copy -bsf:a aac_adtstoasc -vcodec copy -f mp4 output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对音频文件的编码做转换</span></span><br><span class="line">ffmpeg -i input.wav -acodec libfdk_aac output.aac</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从wav文件导出pcm裸数据</span></span><br><span class="line">ffmpeg -i input.wav -acodec pcm_s16le -f s16le output.pcm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将mp4导出为gif,参数设置为宽度100,帧率10,只处理前五秒</span></span><br><span class="line">ffmpeg -i test.mp4 -vf sacle=100:-1 -t 5 -r 10 output.gif</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将视频画面生成图片,参数为每四秒截取一张,生成缩略图</span></span><br><span class="line">ffmpeg -i test.mp4 -r 0.25 frames_%04d.png</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将两路声音合并,例如添加背景音乐,输出时间是以较短的为准</span></span><br><span class="line">ffmpeg -i input.wav -i bgm.wav -filter_complex amix=inputs=2:deration=shortest output.wav</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 视频添加水印,视频宽度为100,水印宽度为20</span></span><br><span class="line">ffmpeg -i test.mp4 -i image.png -filter_complex <span class="string">&#x27;[0:v][1:v]overlay=100-20-10:10:1[out]&#x27;</span> -map <span class="string">&#x27;[out]&#x27;</span> output.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将视频推送到流媒体服务器(-re表示实际速度)</span></span><br><span class="line">ffmpeg -re -i test.mp4 -acodec copy -vcodec copy -f flv rtmp://10.30.22.242:1935/hls/mystream</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将流媒体服务器的流dump到本地</span></span><br><span class="line">ffmpeg -i rtmp://10.30.22.242:1935/hls/mystream -acodec copy -vcodec copy -f flv output.flv</span><br></pre></td></tr></table></figure>

<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html">FFmpeg 视频处理入门教程</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903550229676039">ffprobe,ffplay ffmpeg常用的命令行命令</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146359917">FFmpeg常用技巧</a></li>
<li><a target="_blank" rel="noopener" href="https://www.longqi.cf/tools/2015/02/13/ffmpegcn/">ffmpeg中文手册</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/nginx-http-flv%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/nginx-http-flv%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">nginx-http-flv配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-13 16:46:45" itemprop="dateCreated datePublished" datetime="2020-08-13T16:46:45+08:00">2020-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:03:41" itemprop="dateModified" datetime="2021-01-05T14:03:41+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><p><a target="_blank" rel="noopener" href="https://github.com/winshining/nginx-http-flv-module/blob/master/README.CN.md">https://github.com/winshining/nginx-http-flv-module/blob/master/README.CN.md</a></p>
<h2 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/winshining/nginx-http-flv-module">nginx-http-flv</a></li>
<li><a target="_blank" rel="noopener" href="http://nginx.org/en/download.html">nginx</a></li>
<li><a target="_blank" rel="noopener" href="https://www.openssl.org/source/">openssl</a></li>
</ul>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;opt&#x2F;nginx-flv --with-openssl&#x3D;..&#x2F;openssl-1.1.1g --add-module&#x3D;..&#x2F;nginx-http-flv-module-1.2.7 --with-debug</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1; #运行在Windows上时，设置为1，因为Windows不支持Unix domain socket</span><br><span class="line"></span><br><span class="line">error_log logs/error.log error;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  4096;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /opt/nginx-flv/html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /live &#123;</span><br><span class="line">            flv_live on; #打开HTTP播放FLV直播流功能</span><br><span class="line">            chunked_transfer_encoding on; #支持&#x27;Transfer-Encoding: chunked&#x27;方式回复</span><br><span class="line"></span><br><span class="line">            add_header &#x27;Access-Control-Allow-Origin&#x27; &#x27;*&#x27;; #添加额外的HTTP头</span><br><span class="line">            add_header &#x27;Access-Control-Allow-Credentials&#x27; &#x27;true&#x27;; #添加额外的HTTP头</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /hls &#123;</span><br><span class="line">            types &#123;</span><br><span class="line">                application/vnd.apple.mpegurl m3u8;</span><br><span class="line">                video/mp2t ts;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            root /opt/nginx-flv/tmp;</span><br><span class="line">            add_header &#x27;Cache-Control&#x27; &#x27;no-cache&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /dash &#123;</span><br><span class="line">            root /opt/nginx-flv/tmp;</span><br><span class="line">            add_header &#x27;Cache-Control&#x27; &#x27;no-cache&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /stat &#123;</span><br><span class="line">            #推流播放和录制统计数据的配置</span><br><span class="line"></span><br><span class="line">            rtmp_stat all;</span><br><span class="line">            rtmp_stat_stylesheet stat.xsl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /stat.xsl &#123;</span><br><span class="line">            root /opt/nginx-flv/html/rtmp; #指定stat.xsl的位置</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /control &#123;</span><br><span class="line">            rtmp_control all; #rtmp控制模块的配置</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rtmp_auto_push on;</span><br><span class="line">rtmp_auto_push_reconnect 1s;</span><br><span class="line">rtmp_socket_dir /opt/nginx-flv/tmp;</span><br><span class="line"></span><br><span class="line">rtmp &#123;</span><br><span class="line">    out_queue           4096;</span><br><span class="line">    out_cork            8;</span><br><span class="line">    max_streams         128;</span><br><span class="line">    timeout             15s;</span><br><span class="line">    drop_idle_publisher 15s;</span><br><span class="line"></span><br><span class="line">    log_interval 5s; #log模块在access.log中记录日志的间隔时间，对调试非常有用</span><br><span class="line">    log_size     1m; #log模块用来记录日志的缓冲区大小</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935;</span><br><span class="line">        # server_name www.test.*; #用于虚拟主机名后缀通配</span><br><span class="line"></span><br><span class="line">        application myapp &#123;</span><br><span class="line">            live on;</span><br><span class="line">            gop_cache on; #打开GOP缓存，减少首屏等待时间</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        application hls &#123;</span><br><span class="line">            gop_cache on;</span><br><span class="line">            live on;</span><br><span class="line">            hls on;</span><br><span class="line">            hls_path /opt/nginx-flv/tmp/hls;</span><br><span class="line"></span><br><span class="line">            hls_fragment 5s;</span><br><span class="line">            recorder rec &#123;  #启用录制</span><br><span class="line">                record all manual;  #手动控制录制启停</span><br><span class="line">                record_suffix _rec.flv;</span><br><span class="line">                record_path /opt/nginx-flv/tmp/record;  #录制保存地址</span><br><span class="line">                record_unique on;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        application dash &#123;</span><br><span class="line">            gop_cache on;</span><br><span class="line">            live on;</span><br><span class="line">            dash on;</span><br><span class="line">            dash_path /opt/nginx-flv/tmp/dash;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意拷贝stat.xsl到相应目录下</p>
</blockquote>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="rtmp监控"><a href="#rtmp监控" class="headerlink" title="rtmp监控"></a>rtmp监控</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1/stat">http://127.0.0.1/stat</a></p>
<h3 id="rtmp推流"><a href="#rtmp推流" class="headerlink" title="rtmp推流"></a>rtmp推流</h3><p>rtmp://10.30.22.242:1935/hls/mystream<br>rtmp://10.30.22.242:1935/dash/mystream<br>rtmp://10.30.22.242:1935/myapp/mystream</p>
<h3 id="rtmp直播"><a href="#rtmp直播" class="headerlink" title="rtmp直播"></a>rtmp直播</h3><p>rtmp://127.0.0.1:1935/hls/mystream<br>rtmp://127.0.0.1:1935/myapp/mystream</p>
<h3 id="hls直播"><a href="#hls直播" class="headerlink" title="hls直播"></a>hls直播</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1/hls/mystream.m3u8">http://127.0.0.1/hls/mystream.m3u8</a></p>
<h2 id="flv直播"><a href="#flv直播" class="headerlink" title="flv直播"></a>flv直播</h2><p><a target="_blank" rel="noopener" href="http://127.0.0.1/live?port=1935&amp;app=hls&amp;stream=mystream">http://127.0.0.1/live?port=1935&amp;app=hls&amp;stream=mystream</a></p>
<h3 id="dash直播"><a href="#dash直播" class="headerlink" title="dash直播"></a>dash直播</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1/dash/mystream.mpd">http://127.0.0.1/dash/mystream.mpd</a></p>
<h3 id="录制视频"><a href="#录制视频" class="headerlink" title="录制视频"></a>录制视频</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1/control/record/start?app=hls&amp;name=mystream&amp;rec=rec">http://127.0.0.1/control/record/start?app=hls&amp;name=mystream&amp;rec=rec</a><br><a target="_blank" rel="noopener" href="http://127.0.0.1/control/record/stop?app=hls&amp;name=mystream&amp;rec=rec">http://127.0.0.1/control/record/stop?app=hls&amp;name=mystream&amp;rec=rec</a></p>
<h2 id="ffplay"><a href="#ffplay" class="headerlink" title="ffplay"></a>ffplay</h2><p>ffplay -i rtmp://127.0.0.1:1935/hls/mystream -fflags nobuffer -analyzeduration 1000000<br>ffplay “<a target="_blank" rel="noopener" href="http://127.0.0.1/live?port=1935&amp;app=hls&amp;stream=mystream&quot;">http://127.0.0.1/live?port=1935&amp;app=hls&amp;stream=mystream&quot;</a></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/winshining/article/details/74910586">https://blog.csdn.net/winshining/article/details/74910586</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/winshining/article/details/79492099">https://blog.csdn.net/winshining/article/details/79492099</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/winshining/article/details/81512775">https://blog.csdn.net/winshining/article/details/81512775</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/nginx-rtmp%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/nginx-rtmp%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">nginx-rtmp配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-13 13:56:10" itemprop="dateCreated datePublished" datetime="2020-08-13T13:56:10+08:00">2020-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:03:53" itemprop="dateModified" datetime="2021-01-05T14:03:53+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Windows预编译版下载地址"><a href="#Windows预编译版下载地址" class="headerlink" title="Windows预编译版下载地址"></a>Windows预编译版下载地址</h2><p><a target="_blank" rel="noopener" href="http://nginx-win.ecsds.eu/download/">http://nginx-win.ecsds.eu/download/</a><br><a target="_blank" rel="noopener" href="http://nginx-win.ecsds.eu/download/nginx%201.7.11.3%20Gryphon.zip">http://nginx-win.ecsds.eu/download/nginx%201.7.11.3%20Gryphon.zip</a></p>
<blockquote>
<p>直接安装即可，不做赘述</p>
</blockquote>
<h2 id="yamdi"><a href="#yamdi" class="headerlink" title="yamdi"></a>yamdi</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>yamdi用于为rtmp点播文件添加索引</p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p><a target="_blank" rel="noopener" href="http://yamdi.sourceforge.net/">http://yamdi.sourceforge.net/</a><br><a target="_blank" rel="noopener" href="https://github.com/ioppermann/yamdi/releases">https://github.com/ioppermann/yamdi/releases</a></p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc yamdi.c -o yamdi -O2 -Wall</span><br><span class="line">cp yamdi &#x2F;usr&#x2F;local&#x2F;bin</span><br></pre></td></tr></table></figure>
<h2 id="nginx-rtmp"><a href="#nginx-rtmp" class="headerlink" title="nginx-rtmp"></a>nginx-rtmp</h2><ul>
<li><h3 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a>源码下载</h3></li>
<li><a target="_blank" rel="noopener" href="https://github.com/arut/nginx-rtmp-module">nginx-rtmp-module</a></li>
<li><a target="_blank" rel="noopener" href="http://nginx.org/en/download.html">nginx</a></li>
<li><a target="_blank" rel="noopener" href="https://www.openssl.org/source/">openssl</a></li>
</ul>
<h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;opt&#x2F;nginx-rtmp --with-openssl&#x3D;..&#x2F;openssl-1.1.1g --add-module&#x3D;..&#x2F;nginx-rtmp-module-1.2.1 --with-debug</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  logs/error.log debug;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rtmp &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 1935;</span><br><span class="line"></span><br><span class="line">        application hls &#123;</span><br><span class="line">             live on;  <span class="comment">#启用rtmp直播</span></span><br><span class="line">                       <span class="comment">#地址为rtmp://[server]:[rtmp_port]/[app]/[stream]</span></span><br><span class="line">             hls on;   <span class="comment">#启用hls直播</span></span><br><span class="line">                       <span class="comment">#地址为http://[server]:[http_port]/[app]/[stream].m3u8</span></span><br><span class="line">                       <span class="comment">#需要配合下面http段设置使用</span></span><br><span class="line">             hls_path nginx-rtmp-module/tmp/app/;</span><br><span class="line">             hls_fragment 5s;</span><br><span class="line">             recorder rec &#123;  <span class="comment">#启用录制</span></span><br><span class="line">               record all manual;  <span class="comment">#手动控制录制启停</span></span><br><span class="line">               record_suffix _rec.flv;</span><br><span class="line">               record_path nginx-rtmp-module/tmp/rec/;  <span class="comment">#录制保存地址</span></span><br><span class="line">               record_unique on;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       application vod2&#123;  <span class="comment">#rtmp点播</span></span><br><span class="line">       		play nginx-rtmp-module/tmp/rec/;    </span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen      18080;</span><br><span class="line"></span><br><span class="line">        location /<span class="built_in">stat</span> &#123;  <span class="comment">#服务器状态</span></span><br><span class="line">            rtmp_stat all;</span><br><span class="line">            rtmp_stat_stylesheet stat.xsl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /stat.xsl &#123;</span><br><span class="line">            root nginx-rtmp-module/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /control &#123; <span class="comment">#控制器</span></span><br><span class="line">            rtmp_control all;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">	    location /hls/ &#123;  <span class="comment">#hls直播地址</span></span><br><span class="line">           <span class="comment">#server hls fragments</span></span><br><span class="line">           types&#123;</span><br><span class="line">             application/vnd.apple.mpegurl m3u8;</span><br><span class="line">             video/mp2t ts;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="built_in">alias</span> nginx-rtmp-module/tmp/app/;</span><br><span class="line">           expires -1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /vod/&#123;  <span class="comment">#hls点播地址</span></span><br><span class="line">            <span class="built_in">alias</span> nginx-rtmp-module/tmp/rec/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root nginx-rtmp-module/<span class="built_in">test</span>/www/;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意拷贝stat.xsl到相应目录下</p>
</blockquote>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="rtmp监控"><a href="#rtmp监控" class="headerlink" title="rtmp监控"></a>rtmp监控</h3><p><a target="_blank" rel="noopener" href="http://localhost:18080/stat">http://localhost:18080/stat</a></p>
<h3 id="rtmp推流"><a href="#rtmp推流" class="headerlink" title="rtmp推流"></a>rtmp推流</h3><p>地址：<br>rtmp://10.30.22.242:1935/hls/mystream</p>
<h3 id="rtmp直播"><a href="#rtmp直播" class="headerlink" title="rtmp直播"></a>rtmp直播</h3><p>rtmp://127.0.0.1:1935/hls/mystream</p>
<h3 id="hls直播"><a href="#hls直播" class="headerlink" title="hls直播"></a>hls直播</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1:18080/hls/mystream.m3u8">http://127.0.0.1:18080/hls/mystream.m3u8</a></p>
<h3 id="录制视频"><a href="#录制视频" class="headerlink" title="录制视频"></a>录制视频</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1:18080/control/record/start?app=hls&amp;name=mystream&amp;rec=rec">http://127.0.0.1:18080/control/record/start?app=hls&amp;name=mystream&amp;rec=rec</a><br><a target="_blank" rel="noopener" href="http://127.0.0.1:18080/control/record/stop?app=hls&amp;name=mystream&amp;rec=rec">http://127.0.0.1:18080/control/record/stop?app=hls&amp;name=mystream&amp;rec=rec</a></p>
<h3 id="为rtmp点播文件添加索引"><a href="#为rtmp点播文件添加索引" class="headerlink" title="为rtmp点播文件添加索引"></a>为rtmp点播文件添加索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;tmp&#x2F;rec</span><br><span class="line">yamdi -i mystream-1597303714_rec.flv -o mystream-1597303714_rec_idx.flv</span><br></pre></td></tr></table></figure>
<h3 id="rtmp点播"><a href="#rtmp点播" class="headerlink" title="rtmp点播"></a>rtmp点播</h3><p>rtmp://127.0.0.1:1935/vod2/mystream-1597303714_rec_idx.flv</p>
<h3 id="制作hls点播分片文件"><a href="#制作hls点播分片文件" class="headerlink" title="制作hls点播分片文件"></a>制作hls点播分片文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd nginx-rtmp&#x2F;nginx-rtmp-module&#x2F;tmp&#x2F;rec</span><br><span class="line"></span><br><span class="line">ffmpeg -i mystream-1597303714_rec.flv -acodec copy -bsf:a h264_mp4toannexb -g 105 -vcodec libx264 -vprofile baseline -bf 0 -bufsize 850k -bsf:v dump_extra -map 0 -f segment -segment_format mpegts -segment_list &quot;mystream-1597303714_rec.m3u8&quot; -segment_time 10 mystream-1597303714_rec-%d.ts</span><br><span class="line"></span><br><span class="line">ffmpeg -i mystream-1597303714_rec.flv -acodec copy -bsf:a aac_adtstoasc -g 105 -vcodec libx264 -vprofile baseline -bf 0 -bufsize 850k -bsf:v dump_extra -map 0 -f segment -segment_format mpegts -segment_list &quot;mystream-1597303714_rec.m3u8&quot; -segment_time 10 mystream-1597303714_rec-%d.ts</span><br></pre></td></tr></table></figure>
<h3 id="hls点播"><a href="#hls点播" class="headerlink" title="hls点播"></a>hls点播</h3><p><a target="_blank" rel="noopener" href="http://127.0.0.1:18080/vod/mystream-1597303714_rec.m3u8">http://127.0.0.1:18080/vod/mystream-1597303714_rec.m3u8</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/%E5%B8%B8%E7%94%A8%E6%8E%A8%E6%B5%81%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/%E5%B8%B8%E7%94%A8%E6%8E%A8%E6%B5%81%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">常用推流测试工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-13 13:54:54" itemprop="dateCreated datePublished" datetime="2020-08-13T13:54:54+08:00">2020-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:04:17" itemprop="dateModified" datetime="2021-01-05T14:04:17+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Android推流"><a href="#Android推流" class="headerlink" title="Android推流"></a>Android推流</h2><h3 id="RTSP-Camera"><a href="#RTSP-Camera" class="headerlink" title="RTSP Camera"></a>RTSP Camera</h3><p><a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=com.miv.rtspcamera&amp;hl=zh">https://play.google.com/store/apps/details?id=com.miv.rtspcamera&amp;hl=zh</a></p>
<p>播流地址：  </p>
<ul>
<li>RTSP  rtsp://10.10.38.141:5554</li>
<li>HLS   <a target="_blank" rel="noopener" href="http://10.10.38.141:8080/playlist.m3u">http://10.10.38.141:8080/playlist.m3u</a></li>
</ul>
<h3 id="RTMP-Camera"><a href="#RTMP-Camera" class="headerlink" title="RTMP Camera"></a>RTMP Camera</h3><p><a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=com.miv.rtmpcamera&amp;hl=en_US">https://play.google.com/store/apps/details?id=com.miv.rtmpcamera&amp;hl=en_US</a></p>
<p>RTMP推流：<br>rtmp://10.30.22.242:1935/hls/mystream</p>
<blockquote>
<p>需要提前搭建nginx-with-rtmp</p>
</blockquote>
<h2 id="OBS推流"><a href="#OBS推流" class="headerlink" title="OBS推流"></a>OBS推流</h2><p><a target="_blank" rel="noopener" href="https://obsproject.com/">https://obsproject.com/</a></p>
<h2 id="ffmpeg推流"><a href="#ffmpeg推流" class="headerlink" title="ffmpeg推流"></a>ffmpeg推流</h2><h3 id="推视频文件"><a href="#推视频文件" class="headerlink" title="推视频文件"></a>推视频文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i &#x2F;tmp&#x2F;test.mp4 -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br><span class="line">ffmpeg -i &#x2F;tmp&#x2F;test2.flv -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br></pre></td></tr></table></figure>
<h3 id="推USB摄像头"><a href="#推USB摄像头" class="headerlink" title="推USB摄像头"></a>推USB摄像头</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Windows列出设备</span><br><span class="line">ffplay -f dshow -i video&#x3D;&quot;USB2.0 Camera&quot;</span><br><span class="line"></span><br><span class="line"># macOS列出设备</span><br><span class="line">ffmpeg -f avfoundation -list_devices true -i &quot;&quot;</span><br><span class="line"></span><br><span class="line"># 只推摄像头</span><br><span class="line">ffmpeg -f avfoundation -framerate 30 -video_size 1280x720 -i &quot;0&quot; -vcodec libx264 -acodec libfaac -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br><span class="line"></span><br><span class="line"># 推摄像头+麦克风</span><br><span class="line">ffmpeg -f avfoundation -framerate 30 -video_size 1280x720 -i &quot;0:1&quot; -vcodec libx264 -preset ultrafast -acodec libmp3lame -ar 44100 -ac 1 -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br></pre></td></tr></table></figure>
<h3 id="推桌面录屏"><a href="#推桌面录屏" class="headerlink" title="推桌面录屏"></a>推桌面录屏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -f avfoundation -pixel_format uyvy422 -i &quot;1&quot; -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br><span class="line">ffmpeg -f avfoundation -i &quot;1&quot; -vcodec libx264 -preset ultrafast -acodec libfaac -f flv rtmp:&#x2F;&#x2F;10.30.22.242:1935&#x2F;hls&#x2F;mystream</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202008/Anaconda%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202008/Anaconda%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">Anaconda常用操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-08-12 10:25:40" itemprop="dateCreated datePublished" datetime="2020-08-12T10:25:40+08:00">2020-08-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:03:13" itemprop="dateModified" datetime="2021-01-05T14:03:13+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls yes</span><br><span class="line"></span><br><span class="line">conda config --show channels</span><br></pre></td></tr></table></figure>

<h2 id="查看版本等信息"><a href="#查看版本等信息" class="headerlink" title="查看版本等信息"></a>查看版本等信息</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda info</span><br><span class="line">conda -V/--version</span><br></pre></td></tr></table></figure>
<h2 id="环境查看"><a href="#环境查看" class="headerlink" title="环境查看"></a>环境查看</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br><span class="line">conda info -e</span><br></pre></td></tr></table></figure>
<h2 id="环境管理"><a href="#环境管理" class="headerlink" title="环境管理"></a>环境管理</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建新环境</span></span><br><span class="line">conda create --name newenv python=3.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制新环境</span></span><br><span class="line">conda create -n newenv --<span class="built_in">clone</span> base</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除环境</span></span><br><span class="line">conda remove --name newenv --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate newenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出环境</span></span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>
<h2 id="环境导入导出"><a href="#环境导入导出" class="headerlink" title="环境导入导出"></a>环境导入导出</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出</span></span><br><span class="line">conda env <span class="built_in">export</span> &gt; environment.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入</span></span><br><span class="line">conda env create -f .../environment.yaml</span><br></pre></td></tr></table></figure>
<h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">conda list <span class="comment"># 查看已经安装的包</span></span><br><span class="line">conda update conda <span class="comment"># 升级conda自身</span></span><br><span class="line">conda search requests <span class="comment"># 查询某个包</span></span><br><span class="line">conda install requests <span class="comment"># 安装新包</span></span><br><span class="line">conda install -n <span class="built_in">test</span> requests <span class="comment"># 将包安装到指定环境</span></span><br><span class="line">conda update --all <span class="comment"># 更新所有包</span></span><br><span class="line">conda update requests <span class="comment"># 升级包</span></span><br><span class="line">conda remove requests <span class="comment"># 移除包</span></span><br><span class="line">conda remove -n <span class="built_in">test</span> requests <span class="comment"># 从指定环境中移除包</span></span><br></pre></td></tr></table></figure>
<h2 id="requirements-txt导入导出"><a href="#requirements-txt导入导出" class="headerlink" title="requirements.txt导入导出"></a>requirements.txt导入导出</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip批量导出包含环境中所有组件的requirements.txt文件</span></span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># pip批量安装requirements.txt文件中包含的组件依赖</span></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># conda批量导出包含环境中所有组件的requirements.txt文件</span></span><br><span class="line">conda list -e &gt; requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># conda批量安装requirements.txt文件中包含的组件依赖</span></span><br><span class="line">conda install --yes --file requirements.txt</span><br></pre></td></tr></table></figure>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions/">https://jakevdp.github.io/blog/2016/08/25/conda-myths-and-misconceptions/</a></li>
<li><a target="_blank" rel="noopener" href="http://lizhiqiang.me/conda/">http://lizhiqiang.me/conda/</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/Angular%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/Angular%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/" class="post-title-link" itemprop="url">Angular代码片段</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-02 14:38:35" itemprop="dateCreated datePublished" datetime="2020-03-02T14:38:35+08:00">2020-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:01:35" itemprop="dateModified" datetime="2021-01-05T14:01:35+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><p>本文档直接取自GitHub<a target="_blank" rel="noopener" href="https://github.com/30-seconds/30-seconds-of-angular/blob/master/README.md">30-seconds-of-angular</a>项目。</p>
<h2 id="Table-of-contents"><a href="#Table-of-contents" class="headerlink" title="Table of contents"></a>Table of contents</h2><p>Beginner snippets</p>
<ul>
<li><a href="#accessing-enums-in-template">Accessing Enums in template</a></li>
<li><a href="#cheat-sheets-and-checklists">Cheat Sheets and Checklists</a></li>
<li><a href="#component-state-debugging">Component State Debugging</a></li>
<li><a href="#default-viewencapsulation-value">Default ViewEncapsulation value</a></li>
<li><a href="#hammerjs-gestures">hammerjs-gestures</a></li>
<li><a href="#loader-component">Loader Component</a></li>
<li><a href="#ng-content">ng-content</a></li>
<li><a href="#ngif-else">ngIf else</a></li>
<li><a href="#optional-parameters-in-the-middle">Optional parameters in the middle</a></li>
<li><a href="#renaming-inputs-and-outputs">Renaming inputs and outputs</a></li>
<li><a href="#safe-navigation-operator">Safe Navigation Operator</a></li>
<li><a href="#trackby-in-for-loops">trackBy in for loops</a></li>
<li><a href="#understanding-microsyntax">Understanding Microsyntax</a></li>
</ul>
<p>Intermediate snippets</p>
<ul>
<li><a href="#%E6%9D%A5%E6%BA%90">来源</a></li>
<li><a href="#table-of-contents">Table of contents</a></li>
<li><a href="#beginner-snippets">Beginner snippets</a><ul>
<li><a href="#accessing-enums-in-template">Accessing Enums in template</a></li>
<li><a href="#cheat-sheets-and-checklists">Cheat Sheets and Checklists</a><ul>
<li><a href="#links">Links</a></li>
</ul>
</li>
<li><a href="#component-state-debugging">Component State Debugging</a><ul>
<li><a href="#links-1">Links</a></li>
</ul>
</li>
<li><a href="#default-viewencapsulation-value">Default ViewEncapsulation value</a></li>
<li><a href="#hammerjs-gestures">hammerjs-gestures</a><ul>
<li><a href="#links-2">Links</a></li>
</ul>
</li>
<li><a href="#loader-component">Loader Component</a><ul>
<li><a href="#links-3">Links</a></li>
</ul>
</li>
<li><a href="#ng-content">ng-content</a><ul>
<li><a href="#links-4">Links</a></li>
</ul>
</li>
<li><a href="#ngif-else">ngIf else</a></li>
<li><a href="#optional-parameters-in-the-middle">Optional parameters in the middle</a><ul>
<li><a href="#links-5">Links</a></li>
</ul>
</li>
<li><a href="#renaming-inputs-and-outputs">Renaming inputs and outputs</a><ul>
<li><a href="#links-6">Links</a></li>
</ul>
</li>
<li><a href="#safe-navigation-operator">Safe Navigation Operator</a><ul>
<li><a href="#links-7">Links</a></li>
</ul>
</li>
<li><a href="#trackby-in-for-loops">trackBy in for loops</a><ul>
<li><a href="#links-8">Links</a></li>
</ul>
</li>
<li><a href="#understanding-microsyntax">Understanding Microsyntax</a><ul>
<li><a href="#links-9">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#intermediate-snippets">Intermediate snippets</a><ul>
<li><a href="#accessing-all-nested-form-controls">Accessing all nested form controls</a><ul>
<li><a href="#links-10">Links</a></li>
</ul>
</li>
<li><a href="#adding-keyboard-shortcuts-to-elements">Adding keyboard shortcuts to elements</a><ul>
<li><a href="#links-11">Links</a></li>
</ul>
</li>
<li><a href="#bind-to-host-properties-with-host-binding">Bind to host properties with host binding</a></li>
<li><a href="#component-level-providers">Component level providers</a><ul>
<li><a href="#links-12">Links</a></li>
</ul>
</li>
<li><a href="#global-event-listeners">Global event listeners</a></li>
<li><a href="#injecting-document">Injecting document</a><ul>
<li><a href="#links-13">Links</a></li>
</ul>
</li>
<li><a href="#mark-reactive-fields-as-touched">Mark reactive fields as touched</a><ul>
<li><a href="#links-14">Links</a></li>
</ul>
</li>
<li><a href="#observables-as-outputs">Observables as outputs</a></li>
<li><a href="#passing-template-as-an-input">Passing template as an input</a><ul>
<li><a href="#links-15">Links</a></li>
</ul>
</li>
<li><a href="#preseving-whitespaces">Preseving whitespaces</a><ul>
<li><a href="#links-16">Links</a></li>
</ul>
</li>
<li><a href="#reusing-code-in-template">Reusing code in template</a><ul>
<li><a href="#links-17">Links</a></li>
</ul>
</li>
<li><a href="#reusing-existing-custom-pipes">Reusing existing custom pipes</a><ul>
<li><a href="#links-18">Links</a></li>
</ul>
</li>
<li><a href="#style-bindings">Style bindings</a></li>
<li><a href="#two-way-binding-any-property">Two-way binding any property</a></li>
<li><a href="#using-app_initializer-to-delay-app-start">Using APP_INITIALIZER to delay app start</a><ul>
<li><a href="#links-19">Links</a></li>
</ul>
</li>
<li><a href="#window-location-injection">Window Location injection</a><ul>
<li><a href="#links-20">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#advanced-snippets">Advanced snippets</a><ul>
<li><a href="#getting-components-of-different-types-with-viewchild">Getting components of different types with ViewChild</a><ul>
<li><a href="#links-21">Links</a></li>
</ul>
</li>
<li><a href="#router-custom-preloading">Router Custom Preloading</a><ul>
<li><a href="#links-22">Links</a></li>
</ul>
</li>
<li><a href="#svg">SVG</a></li>
</ul>
</li>
</ul>
<p>Advanced snippets</p>
<ul>
<li><a href="#getting-components-of-different-types-with-viewchild">Getting components of different types with ViewChild</a></li>
<li><a href="#router-custom-preloading">Router Custom Preloading</a></li>
<li><a href="#svg">SVG</a></li>
</ul>
<h2 id="Beginner-snippets"><a href="#Beginner-snippets" class="headerlink" title="Beginner snippets"></a>Beginner snippets</h2><h3 id="Accessing-Enums-in-template"><a href="#Accessing-Enums-in-template" class="headerlink" title="Accessing Enums in template"></a>Accessing Enums in template</h3><p>Enums are great but they are not visible in Angular templates by default.<br>With this little trick you can make them accessible.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Animals &#123;</span><br><span class="line">  DOG,</span><br><span class="line">  CAT,</span><br><span class="line">  DOLPHIN</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  animalsEnum: <span class="keyword">typeof</span> Animals = Animals;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/accessing-enums-in-template">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/enums">enums</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Cheat-Sheets-and-Checklists"><a href="#Cheat-Sheets-and-Checklists" class="headerlink" title="Cheat Sheets and Checklists"></a>Cheat Sheets and Checklists</h3><p>Check out <a target="_blank" rel="noopener" href="https://angular.io/guide/cheatsheet">Angular Cheat Sheet</a> or (<a target="_blank" rel="noopener" href="https://malcoded.com/angular-cheat-sheet">alternative version</a>) containing lots of useful information condensed in one place. </p>
<p>Also <a target="_blank" rel="noopener" href="https://angular-checklist.io/">Angular Checklist</a> contains is curated list of common mistakes made when developing Angular applications.</p>
<h4 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://malcoded.com/angular-cheat-sheet/,https://angular.io/guide/cheatsheet,https://angular.io/guide/styleguide">https://malcoded.com/angular-cheat-sheet/,https://angular.io/guide/cheatsheet,https://angular.io/guide/styleguide</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/cheat-sheets-and-checklists">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/cheat-sheet">cheat sheet</a><br><br><br></p>
<h3 id="Component-State-Debugging"><a href="#Component-State-Debugging" class="headerlink" title="Component State Debugging"></a>Component State Debugging</h3><p>Debug the component state in the browser console by running:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng.probe($<span class="number">0</span>).componentInstance</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>$0</code> - is the DOM node currently selected in dev tools (<code>$1</code> for the previous one and so on).</p>
</blockquote>
<details>
<summary>Bonus</summary>

<p>With Ivy renderer engine:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng.getComponent($<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-1"><a href="#Links-1" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://blog.angularindepth.com/everything-you-need-to-know-about-debugging-angular-applications-d308ed8a51b4">https://blog.angularindepth.com/everything-you-need-to-know-about-debugging-angular-applications-d308ed8a51b4</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/component-state-debugging">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a><br><br><br></p>
<h3 id="Default-ViewEncapsulation-value"><a href="#Default-ViewEncapsulation-value" class="headerlink" title="Default ViewEncapsulation value"></a>Default ViewEncapsulation value</h3><p>If you’re using <code>ViewEncapsulation</code> value which is different than default, it might be daunting to set the value manually for every component. </p>
<p>Luckily you can configure it globally when bootstrapping your app:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">platformBrowserDynamic().bootstrapModule(AppModule, [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Use ViewEncapsulation.None only if you know what you&#x27;re doing.</span></span><br><span class="line">    defaultEncapsulation: ViewEncapsulation.None</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/default-viewencapsulation-value">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/configuration">configuration</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/styling">styling</a><br><br><br></p>
<h3 id="hammerjs-gestures"><a href="#hammerjs-gestures" class="headerlink" title="hammerjs-gestures"></a>hammerjs-gestures</h3><p>To act upon swipes, pans, and pinhces as well as the other mobile gestures, you can use <code>hammerjs</code> with <code>HostListener</code> decorator, or an event binding,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hammerjs</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;swiperight&#x27;</span>)</span><br><span class="line"><span class="keyword">public</span> swiperight(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// Run code when a user swipes to the right</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>Here are samples on how to use all of the <code>hammerjs</code> event bindings, you can use these events with a <code>HostListener</code> as well:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pan events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pan</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panstart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panmove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pancancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panleft</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panright</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pandown</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- pinch events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinch</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchstart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchmove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchcancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchin</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchout</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- press events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">press</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pressup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- rotate events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotate</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatestart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatemove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotateend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatecancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- swipe events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipe</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipeleft</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swiperight</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipeup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipedown</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tap event --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">tap</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-2"><a href="#Links-2" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/angular/angular/blob/master/packages/platform-browser/src/dom/events/hammer_gestures.ts,http://hammerjs.github.io/api/#hammer.manager,https://angular.io/api/platform-browser/HammerGestureConfig">https://github.com/angular/angular/blob/master/packages/platform-browser/src/dom/events/hammer_gestures.ts,http://hammerjs.github.io/api/#hammer.manager,https://angular.io/api/platform-browser/HammerGestureConfig</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/hammerjs-gestures">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/gestures">gestures</a><br><br><br></p>
<h3 id="Loader-Component"><a href="#Loader-Component" class="headerlink" title="Loader Component"></a>Loader Component</h3><p>You can create own helper component and use it instead of <code>*ngIf</code>.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;loader&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ng-content *ngIf=&quot;!loading else showLoader&quot;&gt;&lt;/ng-content&gt;</span></span><br><span class="line"><span class="string">    &lt;ng-template #showLoader&gt;🕚 Wait 10 seconds!&lt;/ng-template&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoaderComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() loading: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For usage example:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">loader</span> [<span class="attr">loading</span>]=<span class="string">&quot;isLoading&quot;</span>&gt;</span>🦊 🦄 🐉<span class="tag">&lt;/<span class="name">loader</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that the content will be eagerly evaluated, e.g. in the snippet below <code>destroy-the-world</code> will be created before the loading even starts:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">loader</span> [<span class="attr">loading</span>]=<span class="string">&quot;isLoading&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">destroy-the-world</span>&gt;</span><span class="tag">&lt;/<span class="name">destroy-the-world</span>&gt;</span><span class="tag">&lt;/<span class="name">loader</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-3"><a href="#Links-3" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://medium.com/claritydesignsystem/ng-content-the-hidden-docs-96a29d70d11b,https://blog.angularindepth.com/https-medium-com-thomasburleson-animated-ghosts-bfc045a51fba">https://medium.com/claritydesignsystem/ng-content-the-hidden-docs-96a29d70d11b,https://blog.angularindepth.com/https-medium-com-thomasburleson-animated-ghosts-bfc045a51fba</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/loader-component">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="ng-content"><a href="#ng-content" class="headerlink" title="ng-content"></a>ng-content</h3><p>With <code>ng-content</code> you can pass any elements to a component.<br>This simplifies creating reusable components.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;wrapper&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;wrapper&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;ng-content&gt;&lt;/ng-content&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">wrapper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">wrapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-4"><a href="#Links-4" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://medium.com/p/96a29d70d11b">https://medium.com/p/96a29d70d11b</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/ng-content">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="ngIf-else"><a href="#ngIf-else" class="headerlink" title="ngIf else"></a>ngIf else</h3><p><code>*ngIf</code> directive also supports <code>else</code> statement.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngIf</span>=<span class="string">&quot;isLoading; else notLoading&quot;</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">notLoading</span>&gt;</span>not loading<span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/ngif-else">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/ngif">ngif</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Optional-parameters-in-the-middle"><a href="#Optional-parameters-in-the-middle" class="headerlink" title="Optional parameters in the middle"></a>Optional parameters in the middle</h3><p>Navigate with matrix params:</p>
<p>the router will navigate to <code>/first;name=foo/details</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[&#x27;/&#x27;, &#x27;first&#x27;, &#123;name: &#x27;foo&#x27;&#125;, &#x27;details&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  link with params</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-5"><a href="#Links-5" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://stackblitz.com/edit/angular-xvy5pd">https://stackblitz.com/edit/angular-xvy5pd</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/optional-parameters-in-the-middle">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/routing">routing</a><br><br><br></p>
<h3 id="Renaming-inputs-and-outputs"><a href="#Renaming-inputs-and-outputs" class="headerlink" title="Renaming inputs and outputs"></a>Renaming inputs and outputs</h3><p>In certain cases <code>@Input</code> and <code>@Output</code> properties can be named differently than the actual inputs and outputs.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">pagination</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">paginationShowFirst</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  (<span class="attr">paginationPageChanged</span>)=<span class="string">&quot;onPageChanged($event)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123; <span class="attr">selector</span>: <span class="string">&#x27;[pagination]&#x27;</span>&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaginationComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>(<span class="string">&#x27;paginationShowFirst&#x27;</span>) </span><br><span class="line">  showFirst: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Output</span>(<span class="string">&#x27;paginationPageChanged&#x27;</span>) </span><br><span class="line">  pageChanged = <span class="keyword">new</span> EventEmitter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: Use this wisely, see <a target="_blank" rel="noopener" href="https://angular.io/guide/styleguide#style-05-13">StyleGuide recommedation</a></p>
</blockquote>
<h4 id="Links-6"><a href="#Links-6" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/styleguide#style-05-13">https://angular.io/guide/styleguide#style-05-13</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/renaming-inputs-and-outputs">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Safe-Navigation-Operator"><a href="#Safe-Navigation-Operator" class="headerlink" title="Safe Navigation Operator"></a>Safe Navigation Operator</h3><p>The <a target="_blank" rel="noopener" href="https://angular.io/guide/template-syntax#the-safe-navigation-operator----and-null-property-paths">Safe Navigation Operator</a> helps with preventing null-reference exceptions in component template expressions. It returns object property value if it exists or null otherwise.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> I will work even if student is null or undefined: &#123;&#123;student?.name&#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;a?.b?.c&#125;&#125; </span><br></pre></td></tr></table></figure>
<p>Underneath will be compiled to.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(_co.a == null)? null: ((_co.a.b == null)? null: _co.a.b.c));</span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-7"><a href="#Links-7" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/angular/angular/issues/791">https://github.com/angular/angular/issues/791</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/safe-navigation-operator">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/object-property-handling">object property handling</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="trackBy-in-for-loops"><a href="#trackBy-in-for-loops" class="headerlink" title="trackBy in for loops"></a>trackBy in for loops</h3><p>To avoid the expensive operations, we can help Angular to track which items added or removed i.e. customize the default tracking algorithm by providing a trackBy option to NgForOf.</p>
<p>So you can provide your custom trackBy function that will return unique identifier for each iterated item.<br>For example, some key value of the item. If this key value matches the previous one, then Angular won’t detect changes.</p>
<p><strong>trackBy</strong> takes a function that has <em>index</em> and <em>item</em> args. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;my-app&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li *ngFor=&quot;let item of items; trackBy: trackByFn&quot;&gt;&#123;&#123;item.id&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123; </span><br><span class="line">  <span class="function"><span class="title">trackByFn</span>(<span class="params">index, item</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If trackBy is given, Angular tracks changes by the return value of the function. </p>
<p>Now when you change the collection, Angular can track which items have been added or removed according to the unique identifier and create/destroy only changed items.</p>
<h4 id="Links-8"><a href="#Links-8" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/NgForOf,https://angular.io/api/core/TrackByFunction">https://angular.io/api/common/NgForOf,https://angular.io/api/core/TrackByFunction</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/trackby-in-for-loops">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/performance">performance</a><br><br><br></p>
<h3 id="Understanding-Microsyntax"><a href="#Understanding-Microsyntax" class="headerlink" title="Understanding Microsyntax"></a>Understanding Microsyntax</h3><p>Under the hood Angular compiles structural directives into ng-template elements, e.g.:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- This --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let item of [1,2,3]&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Get expanded into this --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> <span class="attr">ngFor</span> [<span class="attr">ngForOf</span>]=<span class="string">&quot;[1,2,3]&quot;</span> <span class="attr">let-item</span>=<span class="string">&quot;$implicit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The value passed to *ngFor directive is written using microsyntax. You can learn about it <a target="_blank" rel="noopener" href="https://angular.io/guide/structural-directives#microsyntax">in the docs</a>. </p>
<p>Also check out an <a target="_blank" rel="noopener" href="https://alexzuza.github.io/ng-structural-directive-expander/">interactive tool</a> that shows the expansion by <a target="_blank" rel="noopener" href="https://twitter.com/yurzui">Alexey Zuev</a></p>
<h4 id="Links-9"><a href="#Links-9" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/structural-directives#microsyntax,https://alexzuza.github.io/ng-structural-directive-expander/,https://angular.io/guide/structural-directives#inside-ngfor">https://angular.io/guide/structural-directives#microsyntax,https://alexzuza.github.io/ng-structural-directive-expander/,https://angular.io/guide/structural-directives#inside-ngfor</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/understanding-microsyntax">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/structural-directive">structural directive</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/microsyntax">microsyntax</a><br><br><br></p>
<h2 id="Intermediate-snippets"><a href="#Intermediate-snippets" class="headerlink" title="Intermediate snippets"></a>Intermediate snippets</h2><h3 id="Accessing-all-nested-form-controls"><a href="#Accessing-all-nested-form-controls" class="headerlink" title="Accessing all nested form controls"></a>Accessing all nested form controls</h3><p>Sometimes we need to work with every single Control is a form. Here’s how it can be done: </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenControls</span>(<span class="params">form: AbstractControl</span>): <span class="title">AbstractControl</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> extracted: AbstractControl[] = [ form ];</span><br><span class="line">  <span class="keyword">if</span> (form <span class="keyword">instanceof</span> FormArray || form <span class="keyword">instanceof</span> FormGroup) &#123;</span><br><span class="line">    <span class="keyword">const</span> children = <span class="built_in">Object</span>.values(form.controls).map(flattenControls);</span><br><span class="line">    extracted = extracted.concat(...children);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> extracted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For examples use:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// returns all dirty abstract controls</span></span><br><span class="line">flattenControls(form).filter(<span class="function">(<span class="params">control</span>) =&gt;</span> control.dirty);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mark all controls as touched</span></span><br><span class="line">flattenControls(form).forEach(<span class="function">(<span class="params">control</span>) =&gt;</span> </span><br><span class="line">    control.markAsTouched(&#123; <span class="attr">onlySelf</span>: <span class="literal">true</span> &#125;));</span><br></pre></td></tr></table></figure>

<h4 id="Links-10"><a href="#Links-10" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/reactive-forms">https://angular.io/guide/reactive-forms</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/accessing-all-nested-form-controls">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/reactive-forms">reactive forms</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="Adding-keyboard-shortcuts-to-elements"><a href="#Adding-keyboard-shortcuts-to-elements" class="headerlink" title="Adding keyboard shortcuts to elements"></a>Adding keyboard shortcuts to elements</h3><p>It’s really easy to add keyboard shortcuts in the template: </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> (<span class="attr">keydown.ctrl.enter</span>)=<span class="string">&quot;doSomething()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.enter</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.a</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.esc</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.esc</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.control</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.alt</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.meta</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.9</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.tab</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.backspace</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.arrowup</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.arrowdown</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.control.z</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.f4</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-11"><a href="#Links-11" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://alligator.io/angular/binding-keyup-keydown-events">https://alligator.io/angular/binding-keyup-keydown-events</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/adding-keyboard-shortcuts-to-elements">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a><br><br><br></p>
<h3 id="Bind-to-host-properties-with-host-binding"><a href="#Bind-to-host-properties-with-host-binding" class="headerlink" title="Bind to host properties with host binding"></a>Bind to host properties with host binding</h3><p>Every rendered angular component is wrapped in a host element (which is the same as component’s selector).</p>
<p>It is possible to bind properties and attributes of host element using @HostBinding decorators, e.g. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, HostBinding &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">   selector: <span class="string">&#x27;my-app&#x27;</span>, </span><br><span class="line">   template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;Use the input below  to select host background-color:&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;color&quot; [(ngModel)]=&quot;color&quot;&gt; </span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  styles: [</span><br><span class="line">    <span class="string">`:host &#123; display: block; height: 100px; &#125;`</span></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@HostBinding</span>(<span class="string">&#x27;style.background&#x27;</span>) color = <span class="string">&#x27;#ff9900&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/bind-to-host-properties-with-host-binding">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="Component-level-providers"><a href="#Component-level-providers" class="headerlink" title="Component level providers"></a>Component level providers</h3><p>Generally we get one service instance per the whole application.<br>It is also possible to create an instance of service per component or directive. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;provide&#x27;</span>,</span><br><span class="line">  template: <span class="string">&#x27;&lt;ng-content&gt;&lt;/ng-content&gt;&#x27;</span>,</span><br><span class="line">  providers: [ Service ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ProvideComponent</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[provide]&#x27;</span>,</span><br><span class="line">  providers: [ Service ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ProvideDirective</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-12"><a href="#Links-12" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/hierarchical-dependency-injection#component-level-injectors,https://stackblitz.com/edit/angular-cdk-happy-animals">https://angular.io/guide/hierarchical-dependency-injection#component-level-injectors,https://stackblitz.com/edit/angular-cdk-happy-animals</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/component-level-providers">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a><br><br><br></p>
<h3 id="Global-event-listeners"><a href="#Global-event-listeners" class="headerlink" title="Global event listeners"></a>Global event listeners</h3><p>It is possible to add global event listeners in your Components/Directives with <code>HostListener</code>. Angular will take care of unsubscribing once your directive is destroyed.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[rightClicker]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortcutsDirective</span> </span>&#123;</span><br><span class="line">  <span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>)</span><br><span class="line">  <span class="function"><span class="title">doImportantThings</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;You pressed right&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>You can have multiple bindings:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>)</span><br><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.PageDown&#x27;</span>)</span><br><span class="line"><span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Next&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can also pass params:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>, <span class="string">&#x27;$event.target&#x27;</span>)</span><br><span class="line"><span class="function"><span class="title">next</span>(<span class="params">target</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Pressed right on this element: &#x27;</span> + target)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/global-event-listeners">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/events">events</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="Injecting-document"><a href="#Injecting-document" class="headerlink" title="Injecting document"></a>Injecting document</h3><p>Sometimes you need to get access to global <code>document</code>. </p>
<p>To simplify unit-testing, Angular provides it through dependency injection:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DOCUMENT &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Inject &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;my-app&#x27;</span>,</span><br><span class="line">  template: <span class="string">`&lt;h1&gt;Edit me &lt;/h1&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"><span class="meta">@Inject</span>(DOCUMENT) <span class="keyword">private</span> <span class="built_in">document</span>: Document</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Word with document.location, or other things here....</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-13"><a href="#Links-13" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/DOCUMENT">https://angular.io/api/common/DOCUMENT</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/injecting-document">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency injection</a><br><br><br></p>
<h3 id="Mark-reactive-fields-as-touched"><a href="#Mark-reactive-fields-as-touched" class="headerlink" title="Mark reactive fields as touched"></a>Mark reactive fields as touched</h3><p>Here is the way to notify user that there are fields with non-valid values.</p>
<p><code>markFieldsAsTouched</code> function FormGroup or FormArray as an argument. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">markFieldsAsTouched</span>(<span class="params">form: AbstractControl</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  form.markAsTouched(&#123; <span class="attr">onlySelf</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  <span class="keyword">if</span> (form <span class="keyword">instanceof</span> FormArray || form <span class="keyword">instanceof</span> FormGroup) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.values(form.controls).forEach(markFieldsAsTouched);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>It’s very useful to check out more general method <a href="#accessing-all-nested-form-controls">Accessing all nested form controls</a> by <a target="_blank" rel="noopener" href="https://twitter.com/thekiba_io">Thekiba</a> to work with controls.</p>
</details>

<h4 id="Links-14"><a href="#Links-14" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/reactive-forms">https://angular.io/guide/reactive-forms</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/mark-reactive-fields-as-touched">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/reactive-forms-validation">reactive forms validation</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="Observables-as-outputs"><a href="#Observables-as-outputs" class="headerlink" title="Observables as outputs"></a>Observables as outputs</h3><p><code>EventEmitters</code>  used for <code>@Output</code>‘s are just Observables with an emit method. </p>
<p>This means that you can just use <code>Observable</code> instance instead, e.g. we can wire up FormControl value changes directly:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">readonly</span> checkbox = <span class="keyword">new</span> FormControl();</span><br><span class="line"><span class="meta">@Output</span>() <span class="keyword">readonly</span> change = <span class="built_in">this</span>.checkbox.valueChanges;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/observables-as-outputs">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/outputs">outputs</a><br><br><br></p>
<h3 id="Passing-template-as-an-input"><a href="#Passing-template-as-an-input" class="headerlink" title="Passing template as an input"></a>Passing template as an input</h3><p>It’s possible to take a template as <code>@Input</code> for a component to customize the render</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;nav&gt;</span></span><br><span class="line"><span class="string">      &lt;ng-container *ngTemplateOutlet=&quot;template&quot;&gt;&lt;/ng-container&gt;</span></span><br><span class="line"><span class="string">    &lt;/nav&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SiteMenuComponent</span>  </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() template: TemplateRef&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">site-menu</span> [<span class="attr">template</span>]=<span class="string">&quot;menu1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">site-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">menu1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>item1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>item2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: <code>ng-content</code> should be used for most of the cases and it’s simpler and more declarative.<br>Only use this approach if you need extra flexibility that can’t be achieved with ng-content.</p>
</blockquote>
<h4 id="Links-15"><a href="#Links-15" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet">https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/passing-template-as-an-input">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/template">template</a><br><br><br></p>
<h3 id="Preseving-whitespaces"><a href="#Preseving-whitespaces" class="headerlink" title="Preseving whitespaces"></a>Preseving whitespaces</h3><p>By default Angular strips all whitespaces in templates to save bytes. Generally it’s safe.</p>
<p>For rare cases when you need to preserve spaces you can use special <code>ngPreserveWhitespaces</code> attribute:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ngPreserveWhitespaces</span>&gt;</span></span><br><span class="line">             (___()&#x27;`;</span><br><span class="line">             /,    /`</span><br><span class="line">       jgs   \\&quot;--\\</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>You can also use <a target="_blank" rel="noopener" href="https://angular.io/api/core/Component#preserveWhitespaces">preserveWhitespaces</a> option on a component.</p>
</blockquote>
<h4 id="Links-16"><a href="#Links-16" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://twitter.com/mgechev/status/1108913389277839360">https://twitter.com/mgechev/status/1108913389277839360</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/preseving-whitespaces">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a><br><br><br></p>
<h3 id="Reusing-code-in-template"><a href="#Reusing-code-in-template" class="headerlink" title="Reusing code in template"></a>Reusing code in template</h3><p>While the best way of reusing your code is creating a component, it’s also possible to do it in a template.</p>
<p>To do this you can use <code>ng-template</code> along with <code>*ngTemplateOutlet</code> directive.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngTemplateOutlet</span>=<span class="string">&quot;fancyGreeting&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngTemplateOutlet</span>=<span class="string">&quot;fancyGreeting&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">fancyGreeting</span>&gt;</span></span><br><span class="line">  Hello <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-17"><a href="#Links-17" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/NgTemplateOutlet,https://angular.io/guide/structural-directives#the-ng-template">https://angular.io/api/common/NgTemplateOutlet,https://angular.io/guide/structural-directives#the-ng-template</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/reusing-code-in-template">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Reusing-existing-custom-pipes"><a href="#Reusing-existing-custom-pipes" class="headerlink" title="Reusing existing custom pipes"></a>Reusing existing custom pipes</h3><p>If you need a custom <code>pipe</code>, before creating one, consider checking out the <a target="_blank" rel="noopener" href="https://github.com/danrevah/ngx-pipes">NGX Pipes package</a> which has 70+ already implemeted custom pipes.</p>
<p>Here are some examples:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; date | timeAgo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;last week&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; &#x27;foo bar&#x27; | ucfirst &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;Foo bar&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3 &#123;&#123; &#x27;Painting&#x27; | makePluralString: 3 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;3 Paintings&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; [1, 2, 3, 1, 2, 3] | max &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;3&quot; --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-18"><a href="#Links-18" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/danrevah/ngx-pipes">https://github.com/danrevah/ngx-pipes</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/reusing-existing-custom-pipes">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/pipes">pipes</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/library">library</a><br><br><br></p>
<h3 id="Style-bindings"><a href="#Style-bindings" class="headerlink" title="Style bindings"></a>Style bindings</h3><p>You can use advanced property bindings to set specific style values based on component property values: </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> [<span class="attr">style.background-color</span>]=<span class="string">&quot;&#x27;green&#x27;&quot;</span>&gt;</span></span><br><span class="line">  I am in green background</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> [<span class="attr">style.font-size.px</span>]=<span class="string">&quot;isImportant ? &#x27;30&#x27; : &#x27;16&#x27;&quot;</span>&gt;</span></span><br><span class="line">  May be important text.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Width in pixels --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.width.px</span>]=<span class="string">&quot;pxWidth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Font size in percentage relative to the parent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.font-size.</span>%]=<span class="string">&quot;percentageSize&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Height relative to the viewport height --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.height.vh</span>]=<span class="string">&quot;vwHeight&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/style-bindings">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/styles">styles</a><br><br><br></p>
<h3 id="Two-way-binding-any-property"><a href="#Two-way-binding-any-property" class="headerlink" title="Two-way binding any property"></a>Two-way binding any property</h3><p>Similar to how you can two-way bind <code>[(ngModel)]</code> you can two-way bind custom property on a component, for example <code>[(value)]</code>. To do it use appropriate Input/Output naming:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;super-input&#x27;</span>, </span><br><span class="line">  template: <span class="string">`...`</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() value: <span class="built_in">string</span>;</span><br><span class="line">  <span class="meta">@Output</span>() valueChange = <span class="keyword">new</span> EventEmitter&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then you can use it as:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">super-input</span> [(<span class="attr">value</span>)]=<span class="string">&quot;value&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">super-input</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/two-way-binding-any-property">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/binding">binding</a><br><br><br></p>
<h3 id="Using-APP-INITIALIZER-to-delay-app-start"><a href="#Using-APP-INITIALIZER-to-delay-app-start" class="headerlink" title="Using APP_INITIALIZER to delay app start"></a>Using APP_INITIALIZER to delay app start</h3><p>It is possible to execute asynchronous task before the app start by providing a function returning promise using <code>APP_INITIALIZER</code> token.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  providers: [</span><br><span class="line">    &#123;</span><br><span class="line">      provide: APP_INITIALIZER,</span><br><span class="line">      useValue:  functionReturningPromise</span><br><span class="line">      multi: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Links-19"><a href="#Links-19" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://hackernoon.com/hook-into-angular-initialization-process-add41a6b7e,https://angular.io/api/core/APP_INITIALIZER">https://hackernoon.com/hook-into-angular-initialization-process-add41a6b7e,https://angular.io/api/core/APP_INITIALIZER</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/using-app_initializer-to-delay-app-start">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a><br><br><br></p>
<h3 id="Window-Location-injection"><a href="#Window-Location-injection" class="headerlink" title="Window Location injection"></a>Window Location injection</h3><p>For testing purposes you might want to inject <code>window.location</code> object in your component.<br>You can achieve this with custom <code>InjectionToken</code> mechanism provided by Angular.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> LOCATION_TOKEN = <span class="keyword">new</span> InjectionToken&lt;Location&gt;(<span class="string">&#x27;Window location object&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  providers: [</span><br><span class="line">    &#123; <span class="attr">provide</span>: LOCATION_TOKEN, <span class="attr">useValue</span>: <span class="built_in">window</span>.location &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SharedModule</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="title">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="meta">@Inject</span>(LOCATION_TOKEN) <span class="keyword">public</span> location: Location</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-20"><a href="#Links-20" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://itnext.io/testing-browser-window-location-in-angular-application-e4e8388508ff,https://angular.io/guide/dependency-injection">https://itnext.io/testing-browser-window-location-in-angular-application-e4e8388508ff,https://angular.io/guide/dependency-injection</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/window-location-injection">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/testing">testing</a><br><br><br></p>
<h2 id="Advanced-snippets"><a href="#Advanced-snippets" class="headerlink" title="Advanced snippets"></a>Advanced snippets</h2><h3 id="Getting-components-of-different-types-with-ViewChild"><a href="#Getting-components-of-different-types-with-ViewChild" class="headerlink" title="Getting components of different types with ViewChild"></a>Getting components of different types with ViewChild</h3><p>It’s possible to use <code>@ViewChild</code> (also <code>@ViewChildren</code> and <code>@ContentChild/Children</code>) to query for components of different types using dependency injection. </p>
<p>In the example below we can use <code>@ViewChildren(Base)</code> to get instances of <code>Foo</code> and <code>Bar</code>.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">  providers: [&#123; <span class="attr">provide</span>: Base, <span class="attr">useExisting</span>: Foo &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">  providers: [&#123; <span class="attr">provide</span>: Base, <span class="attr">useExisting</span>: Bar &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now we can require both types of components using Base.</span></span><br><span class="line"><span class="meta">@Component</span>(&#123; <span class="attr">template</span>: <span class="string">`&lt;foo&gt;&lt;/foo&gt;&lt;bar&gt;&lt;/bar&gt;`</span> &#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@ViewChildren</span>(Base) components: QueryList&lt;Base&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-21"><a href="#Links-21" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PRRgo6F0cjs">https://www.youtube.com/watch?v=PRRgo6F0cjs</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/getting-components-of-different-types-with-viewchild">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a><br><br><br></p>
<h3 id="Router-Custom-Preloading"><a href="#Router-Custom-Preloading" class="headerlink" title="Router Custom Preloading"></a>Router Custom Preloading</h3><p>Angular allows us to control the way module preloading is handled.</p>
<p>There are 2 strategies provided by <strong>@angular/router</strong>: <code>PreloadAllModules</code> and <code>NoPreloading</code>. The latter enabled by default, only preloading lazy modules on demand.</p>
<p>We can override this behavior by providing custom preloading strategy: In the example below we preload all included modules if the connection is good.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable, <span class="keyword">of</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomPreloading</span> <span class="title">implements</span> <span class="title">PreloadingStrategy</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> preload(route: Route, <span class="attr">load</span>: <span class="function">() =&gt;</span> Observable&lt;<span class="built_in">any</span>&gt;): Observable&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> preloadingConnection() ? load() : <span class="keyword">of</span>(<span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routing: ModuleWithProviders = RouterModule.forRoot(routes, &#123;</span><br><span class="line">  preloadingStrategy: CustomPreloading</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that that the example above would not be very efficient for larger apps, as it’ll preload all the modules.</p>
</blockquote>
<h4 id="Links-22"><a href="#Links-22" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/router/PreloadingStrategy,https://vsavkin.com/angular-router-preloading-modules-ba3c75e424cb,https://medium.com/@adrianfaciu/custom-preloading-strategy-for-angular-modules-b3b5c873681a,https://coryrylan.com/blog/custom-preloading-and-lazy-loading-strategies-with-angular">https://angular.io/api/router/PreloadingStrategy,https://vsavkin.com/angular-router-preloading-modules-ba3c75e424cb,https://medium.com/@adrianfaciu/custom-preloading-strategy-for-angular-modules-b3b5c873681a,https://coryrylan.com/blog/custom-preloading-and-lazy-loading-strategies-with-angular</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/router-custom-preloading">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/router">router</a><br><br><br></p>
<h3 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h3><p>It is possible to use SVG tags in your Angular component, to create beautiful graphs and visualizations. There are 3 things you need to know: </p>
<ol>
<li>When binding an SVG attribute, use <code>attr</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">circle</span> [<span class="attr">attr.cx</span>]=<span class="string">&quot;x&quot;</span> [<span class="attr">attr.cy</span>]=<span class="string">&quot;y&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>When creating sub-components, use attribute and not tag selector:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Not: <span class="tag">&lt;<span class="name">child-component</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span> <span class="attr">child-component</span>&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;<span class="attr">selector</span>: <span class="string">&#x27;[child-component]&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure></li>
<li>When using SVG tags in sub-components use svg prefix:<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[child-component]&#x27;</span>,</span><br><span class="line">  template: <span class="string">`&lt;svg:circle&gt;&lt;/svg:circle&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


</li>
</ol>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/svg">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/svg">SVG</a><br><br><br></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/%E4%BD%BF%E7%94%A8GitHubGist%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/%E4%BD%BF%E7%94%A8GitHubGist%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/" class="post-title-link" itemprop="url">使用GitHubGist管理代码片断</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-02 14:20:11" itemprop="dateCreated datePublished" datetime="2020-03-02T14:20:11+08:00">2020-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:02:21" itemprop="dateModified" datetime="2021-01-05T14:02:21+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>Gist</strong>是Github的一个子服务. 最简单的功能就是分享代码片段，例如把一些小型脚本放到Gist方便分享和管理. 不同于大型项目使用repository进行管理, Gist就是小型代码片段的分享. 类似的服务还有如 <strong>Pastebin</strong> 和 <strong>Pastie</strong>, 但明显出生于Github的Gist更有优势了.</p>
<h2 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h2><p><a target="_blank" rel="noopener" href="https://gist.github.com/">https://gist.github.com/</a></p>
<h2 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h2><ul>
<li><a target="_blank" rel="noopener" href="https://gohom.win/2015/11/26/gist/">https://gohom.win/2015/11/26/gist/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21343711">https://www.zhihu.com/question/21343711</a></li>
</ul>
<h2 id="Gisto-客户端工具"><a href="#Gisto-客户端工具" class="headerlink" title="Gisto 客户端工具"></a>Gisto 客户端工具</h2><p><a target="_blank" rel="noopener" href="https://www.gistoapp.com/">https://www.gistoapp.com/</a></p>
<h2 id="Intellij-IDEA默认支持"><a href="#Intellij-IDEA默认支持" class="headerlink" title="Intellij IDEA默认支持"></a>Intellij IDEA默认支持</h2><p><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/idea/share-code-with-gists.html">https://www.jetbrains.com/help/idea/share-code-with-gists.html</a></p>
<h2 id="Intellij-IDEA插件"><a href="#Intellij-IDEA插件" class="headerlink" title="Intellij IDEA插件"></a>Intellij IDEA插件</h2><p><a target="_blank" rel="noopener" href="https://plugins.jetbrains.com/plugin/7236-get-gist-beta-">https://plugins.jetbrains.com/plugin/7236-get-gist-beta-</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-MybatisPageHelper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-MybatisPageHelper/" class="post-title-link" itemprop="url">研发工具-MybatisPageHelper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-02 13:29:34" itemprop="dateCreated datePublished" datetime="2020-03-02T13:29:34+08:00">2020-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:02:30" itemprop="dateModified" datetime="2021-01-05T14:02:30+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">https://github.com/pagehelper/Mybatis-PageHelper</a></li>
</ul>
<h2 id="pom-xml整合"><a href="#pom-xml整合" class="headerlink" title="pom.xml整合"></a>pom.xml整合</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意需要更新至最新版，以支持SQL排序</p>
</blockquote>
<h2 id="配置拦截器插件"><a href="#配置拦截器插件" class="headerlink" title="配置拦截器插件"></a>配置拦截器插件</h2><p>公司框架中<code>MyBatisConfigure.class</code>已配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PageInterceptor <span class="title">pageInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageInterceptor pageInterceptor = <span class="keyword">new</span> PageInterceptor();</span><br><span class="line">    Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">    p.setProperty(<span class="string">&quot;offsetAsPageNum&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;rowBoundsWithCount&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;reasonable&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;pageSizeZero&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    pageInterceptor.setProperties(p);</span><br><span class="line">    <span class="keyword">return</span> pageInterceptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(</span></span><br><span class="line"><span class="meta">    name = &#123;&quot;sqlSessionFactory&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> SqlSessionFactoryBean <span class="title">sqlSessionFactory</span><span class="params">(<span class="meta">@Qualifier(&quot;dataSourceRouter&quot;)</span> DataSource dataSourceRouter)</span> </span>&#123;</span><br><span class="line">    ... ...</span><br><span class="line">    sqlSessionFactory.setPlugins(<span class="keyword">new</span> Interceptor[]&#123;<span class="keyword">this</span>.pageInterceptor()&#125;);</span><br><span class="line">    ... ...</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基本使用示例"><a href="#基本使用示例" class="headerlink" title="基本使用示例"></a>基本使用示例</h2><p>推荐使用<code>PageHelper.startPage</code>方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;ThreedutyCheckRecord&gt; <span class="title">findByUnitCode</span><span class="params">(String unitCode, <span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, String orderBy)</span> </span>&#123;</span><br><span class="line">    PageHelper.&lt;ThreedutyCheckRecord&gt;startPage(pageNum, pageSize, orderBy);</span><br><span class="line">    List&lt;ThreedutyCheckRecord&gt; result = threedutyCheckRecordMapper.findByUnitCode(unitCode);</span><br><span class="line">    PageInfo&lt;ThreedutyCheckRecord&gt; page = <span class="keyword">new</span> PageInfo&lt;&gt;(result);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用方式详解"><a href="#使用方式详解" class="headerlink" title="使用方式详解"></a>使用方式详解</h2><p><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md">https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-ModelMapper%E5%AF%B9%E5%83%8F%E6%98%A0%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-ModelMapper%E5%AF%B9%E5%83%8F%E6%98%A0%E5%B0%84/" class="post-title-link" itemprop="url">研发规约-ModelMapper对像映射</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-02 11:48:18" itemprop="dateCreated datePublished" datetime="2020-03-02T11:48:18+08:00">2020-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-05 14:02:50" itemprop="dateModified" datetime="2021-01-05T14:02:50+08:00">2021-01-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>项目中经常需要将Model和DTO互转，产生很多<code>getXXX/setXXX</code>的模板化代码。使用ModelMapper可以简化转换步骤。</p>
<h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><p><a target="_blank" rel="noopener" href="http://modelmapper.org/">http://modelmapper.org/</a></p>
<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.modelmapper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>modelmapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象示例"><a href="#对象示例" class="headerlink" title="对象示例"></a>对象示例</h2><p>源对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume getters and setters on each class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">  Customer customer;</span><br><span class="line">  Address billingAddress;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">  Name name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Name</span> </span>&#123;</span><br><span class="line">  String firstName;</span><br><span class="line">  String lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">  String street;</span><br><span class="line">  String city;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>目标对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume getters and setters</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderDTO</span> </span>&#123;</span><br><span class="line">  String customerFirstName;</span><br><span class="line">  String customerLastName;</span><br><span class="line">  String billingStreet;</span><br><span class="line">  String billingCity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自动转换"><a href="#自动转换" class="headerlink" title="自动转换"></a>自动转换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ModelMapper modelMapper = <span class="keyword">new</span> ModelMapper();</span><br><span class="line">OrderDTO orderDTO = modelMapper.map(order, OrderDTO.class);</span><br></pre></td></tr></table></figure>
<h2 id="自定义转换"><a href="#自定义转换" class="headerlink" title="自定义转换"></a>自定义转换</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">modelMapper.typeMap(Order.class, OrderDTO.class).addMappings(mapper -&gt; &#123;</span><br><span class="line">  mapper.map(src -&gt; src.getBillingAddress().getStreet(),</span><br><span class="line">      Destination::setBillingStreet);</span><br><span class="line">  mapper.map(src -&gt; src.getBillingAddress().getCity(),</span><br><span class="line">      Destination::setBillingCity);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="转换配置"><a href="#转换配置" class="headerlink" title="转换配置"></a>转换配置</h2><p>ModelMapper有Standard、Loose、Strict 3种模式： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modelMapper.getConfiguration().setMatchingStrategy(MatchingStrategies.LOOSE);</span><br></pre></td></tr></table></figure>
<p>参考文档：<br><a target="_blank" rel="noopener" href="http://modelmapper.org/user-manual/configuration/#matching-strategies">http://modelmapper.org/user-manual/configuration/#matching-strategies</a></p>
<h2 id="转换校验"><a href="#转换校验" class="headerlink" title="转换校验"></a>转换校验</h2><p>assert手工校验：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assertEquals(order.getCustomer().getName().getFirstName(), orderDTO.getCustomerFirstName());</span><br></pre></td></tr></table></figure>
<p>ModelMapper自动校验：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modelMapper.createTypeMap(Order.class, OrderDTO.class);</span><br><span class="line">modelMapper.addMappings(<span class="keyword">new</span> OrderMap());</span><br><span class="line">modelMapper.validate();</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BlueXIII</p>
  <div class="site-description" itemprop="description">IT技术类文章、笔记分享</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">231</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiiiblue" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiiiblue" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/bluexiii" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;bluexiii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18050487号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BlueXIII</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
