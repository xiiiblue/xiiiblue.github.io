<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.bluexiii.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="IT技术类文章、笔记分享">
<meta property="og:type" content="website">
<meta property="og:title" content="BlueXIII&#39;s Blog">
<meta property="og:url" content="http://www.bluexiii.com/page/18/index.html">
<meta property="og:site_name" content="BlueXIII&#39;s Blog">
<meta property="og:description" content="IT技术类文章、笔记分享">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="BlueXIII">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.bluexiii.com/page/18/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>BlueXIII's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BlueXIII's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">热爱技术,持续学习</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-MybatisPageHelper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-MybatisPageHelper/" class="post-title-link" itemprop="url">研发工具-MybatisPageHelper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:02:30" itemprop="dateCreated datePublished" datetime="2021-01-05T14:02:30+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">https://github.com/pagehelper/Mybatis-PageHelper</a></li>
</ul>
<h2 id="pom-xml整合"><a href="#pom-xml整合" class="headerlink" title="pom.xml整合"></a>pom.xml整合</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意需要更新至最新版，以支持SQL排序</p>
</blockquote>
<h2 id="配置拦截器插件"><a href="#配置拦截器插件" class="headerlink" title="配置拦截器插件"></a>配置拦截器插件</h2><p>公司框架中<code>MyBatisConfigure.class</code>已配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PageInterceptor <span class="title">pageInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageInterceptor pageInterceptor = <span class="keyword">new</span> PageInterceptor();</span><br><span class="line">    Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">    p.setProperty(<span class="string">&quot;offsetAsPageNum&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;rowBoundsWithCount&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;reasonable&quot;</span>, <span class="string">&quot;false&quot;</span>);</span><br><span class="line">    p.setProperty(<span class="string">&quot;pageSizeZero&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    pageInterceptor.setProperties(p);</span><br><span class="line">    <span class="keyword">return</span> pageInterceptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(</span></span><br><span class="line"><span class="meta">    name = &#123;&quot;sqlSessionFactory&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> SqlSessionFactoryBean <span class="title">sqlSessionFactory</span><span class="params">(<span class="meta">@Qualifier(&quot;dataSourceRouter&quot;)</span> DataSource dataSourceRouter)</span> </span>&#123;</span><br><span class="line">    ... ...</span><br><span class="line">    sqlSessionFactory.setPlugins(<span class="keyword">new</span> Interceptor[]&#123;<span class="keyword">this</span>.pageInterceptor()&#125;);</span><br><span class="line">    ... ...</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基本使用示例"><a href="#基本使用示例" class="headerlink" title="基本使用示例"></a>基本使用示例</h2><p>推荐使用<code>PageHelper.startPage</code>方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PageInfo&lt;ThreedutyCheckRecord&gt; <span class="title">findByUnitCode</span><span class="params">(String unitCode, <span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize, String orderBy)</span> </span>&#123;</span><br><span class="line">    PageHelper.&lt;ThreedutyCheckRecord&gt;startPage(pageNum, pageSize, orderBy);</span><br><span class="line">    List&lt;ThreedutyCheckRecord&gt; result = threedutyCheckRecordMapper.findByUnitCode(unitCode);</span><br><span class="line">    PageInfo&lt;ThreedutyCheckRecord&gt; page = <span class="keyword">new</span> PageInfo&lt;&gt;(result);</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用方式详解"><a href="#使用方式详解" class="headerlink" title="使用方式详解"></a>使用方式详解</h2><p><a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md">https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/%E4%BD%BF%E7%94%A8GitHubGist%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/%E4%BD%BF%E7%94%A8GitHubGist%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/" class="post-title-link" itemprop="url">使用GitHubGist管理代码片断</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:02:21" itemprop="dateCreated datePublished" datetime="2021-01-05T14:02:21+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>Gist</strong>是Github的一个子服务. 最简单的功能就是分享代码片段，例如把一些小型脚本放到Gist方便分享和管理. 不同于大型项目使用repository进行管理, Gist就是小型代码片段的分享. 类似的服务还有如 <strong>Pastebin</strong> 和 <strong>Pastie</strong>, 但明显出生于Github的Gist更有优势了.</p>
<h2 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h2><p><a target="_blank" rel="noopener" href="https://gist.github.com/">https://gist.github.com/</a></p>
<h2 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h2><ul>
<li><a target="_blank" rel="noopener" href="https://gohom.win/2015/11/26/gist/">https://gohom.win/2015/11/26/gist/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/21343711">https://www.zhihu.com/question/21343711</a></li>
</ul>
<h2 id="Gisto-客户端工具"><a href="#Gisto-客户端工具" class="headerlink" title="Gisto 客户端工具"></a>Gisto 客户端工具</h2><p><a target="_blank" rel="noopener" href="https://www.gistoapp.com/">https://www.gistoapp.com/</a></p>
<h2 id="Intellij-IDEA默认支持"><a href="#Intellij-IDEA默认支持" class="headerlink" title="Intellij IDEA默认支持"></a>Intellij IDEA默认支持</h2><p><a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/idea/share-code-with-gists.html">https://www.jetbrains.com/help/idea/share-code-with-gists.html</a></p>
<h2 id="Intellij-IDEA插件"><a href="#Intellij-IDEA插件" class="headerlink" title="Intellij IDEA插件"></a>Intellij IDEA插件</h2><p><a target="_blank" rel="noopener" href="https://plugins.jetbrains.com/plugin/7236-get-gist-beta-">https://plugins.jetbrains.com/plugin/7236-get-gist-beta-</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/TypeScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/TypeScript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">TypeScript学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:02:16" itemprop="dateCreated datePublished" datetime="2021-01-05T14:02:16+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/home.html">https://www.typescriptlang.org/docs/home.html</a><br><a target="_blank" rel="noopener" href="https://ts.xcatliu.com/">https://ts.xcatliu.com</a><br><a target="_blank" rel="noopener" href="https://zhongsp.gitbook.io/typescript-handbook/tutorials">https://zhongsp.gitbook.io/typescript-handbook/tutorials</a></p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://rxjs-cn.github.io/RxJS-Ultimate-CN/content/observable.html">Observable vs Promise</a></li>
</ul>
<h2 id="安装TypeScript"><a href="#安装TypeScript" class="headerlink" title="安装TypeScript"></a>安装TypeScript</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
<h2 id="Hello-TS"><a href="#Hello-TS" class="headerlink" title="Hello TS"></a>Hello TS</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">person: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, &#x27;</span> + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sayHello(user));</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc hello.ts</span><br></pre></td></tr></table></figure>
<h2 id="原始数据类型"><a href="#原始数据类型" class="headerlink" title="原始数据类型"></a>原始数据类型</h2><ul>
<li>boolean</li>
<li>number</li>
<li>null</li>
<li>undefined</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用构造函数 Boolean 创造的对象不是布尔值，而是一个 Boolean 对象</span></span><br><span class="line"><span class="keyword">let</span> createdByNewBoolean: <span class="built_in">boolean</span> = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> createdByBoolean: <span class="built_in">boolean</span> = <span class="built_in">Boolean</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decLiteral: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> hexLiteral: <span class="built_in">number</span> = <span class="number">0xf00d</span>;</span><br><span class="line"><span class="comment">// ES6 中的二进制表示法</span></span><br><span class="line"><span class="keyword">let</span> binaryLiteral: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"><span class="comment">// ES6 中的八进制表示法</span></span><br><span class="line"><span class="keyword">let</span> octalLiteral: <span class="built_in">number</span> = <span class="number">0o744</span>;</span><br><span class="line"><span class="keyword">let</span> notANumber: <span class="built_in">number</span> = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> infinityNumber: <span class="built_in">number</span> = <span class="literal">Infinity</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myName: <span class="built_in">string</span> = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> myAge: <span class="built_in">number</span> = <span class="number">25</span>;</span><br><span class="line"><span class="comment">// 模板字符串</span></span><br><span class="line"><span class="keyword">let</span> sentence: <span class="built_in">string</span> = <span class="string">`Hello, my name is <span class="subst">$&#123;myName&#125;</span>.</span></span><br><span class="line"><span class="string">I&#x27;ll be <span class="subst">$&#123;myAge + <span class="number">1</span>&#125;</span> years old next month.`</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一个 void 类型的变量没有什么用，因为你只能将它赋值为 undefined 和 null：</span></span><br><span class="line"><span class="keyword">let</span> unusable: <span class="built_in">void</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与 void 的区别是，undefined 和 null 是所有类型的子类型。也就是说 undefined 类型的变量，可以赋值给 number 类型的变量</span></span><br><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> num: <span class="built_in">number</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> num: <span class="built_in">number</span> = u;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 而 void 类型的变量不能赋值给 number 类型的变量：</span></span><br><span class="line"><span class="keyword">let</span> u: <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">let</span> num: <span class="built_in">number</span> = u; <span class="comment">// ERROR Type &#x27;void&#x27; is not assignable to type &#x27;number&#x27;.</span></span><br></pre></td></tr></table></figure>
<h2 id="任意值"><a href="#任意值" class="headerlink" title="任意值"></a>任意值</h2><p>在任意值上访问任何属性都是允许的</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myFavoriteNumber: <span class="built_in">any</span> = <span class="string">&#x27;seven&#x27;</span>;</span><br><span class="line">myFavoriteNumber = <span class="number">7</span>;</span><br></pre></td></tr></table></figure>
<p>也允许调用任何方法</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> anyThing: <span class="built_in">any</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(anyThing.myName);</span><br><span class="line"><span class="built_in">console</span>.log(anyThing.myName.firstName);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> anyThing: <span class="built_in">any</span> = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line">anyThing.setName(<span class="string">&#x27;Jerry&#x27;</span>);</span><br><span class="line">anyThing.setName(<span class="string">&#x27;Jerry&#x27;</span>).sayHello();</span><br><span class="line">anyThing.myName.setFirstName(<span class="string">&#x27;Cat&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>变量如果在声明的时候，未指定其类型，那么它会被识别为任意值类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> something;</span><br><span class="line">something = <span class="string">&#x27;seven&#x27;</span>;</span><br><span class="line">something = <span class="number">7</span>;</span><br><span class="line">something.setName(<span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="类型推论"><a href="#类型推论" class="headerlink" title="类型推论"></a>类型推论</h2><p>TypeScript 会在没有明确的指定类型的时候推测出一个类型，这就是类型推论。<br>如果定义的时候没有赋值，不管之后有没有赋值，都会被推断成 any 类型而完全不被类型检查。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myFavoriteNumber = <span class="string">&#x27;seven&#x27;</span>;</span><br><span class="line">myFavoriteNumber = <span class="number">7</span>;</span><br></pre></td></tr></table></figure>
<h2 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h2><p>联合类型（Union Types）表示取值可以为多种类型中的一种。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myFavoriteNumber: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line">myFavoriteNumber = <span class="string">&#x27;seven&#x27;</span>;</span><br><span class="line">myFavoriteNumber = <span class="number">7</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// length 不是 string 和 number 的共有属性，所以会报错</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLength</span>(<span class="params">something: <span class="built_in">string</span> | <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> something.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: Person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    age: <span class="number">25</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>可选属性的含义是该属性可以不存在</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: Person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>有时候我们希望一个接口允许有任意的属性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">    [propName: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: Person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    gender: <span class="string">&#x27;male&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>一旦定义了任意属性，那么确定属性和可选属性的类型都必须是它的类型的子集</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">    [propName: <span class="built_in">string</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: Person = &#123;</span><br><span class="line">    name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    age: <span class="number">25</span>,</span><br><span class="line">    gender: <span class="string">&#x27;male&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ERROR Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br></pre></td></tr></table></figure>
<p>有时候我们希望对象中的一些字段只能在创建的时候被赋值，那么可以用<code>readonly</code>定义只读属性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    <span class="keyword">readonly</span> id: <span class="built_in">number</span>;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">    [propName: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: Person = &#123;</span><br><span class="line">    id: <span class="number">89757</span>,</span><br><span class="line">    name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">    gender: <span class="string">&#x27;male&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">tom.id = <span class="number">9527</span>;</span><br><span class="line"><span class="comment">// ERROR TS2540: Cannot assign to &#x27;id&#x27; because it is a constant or a read-only property.</span></span><br></pre></td></tr></table></figure>
<h2 id="数组的类型"><a href="#数组的类型" class="headerlink" title="数组的类型"></a>数组的类型</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fibonacci: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure>
<p>数组的项中不允许出现其他的类型</p>
<p>数组泛型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fibonacci: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure>
<p>用接口表示数组<br>虽然接口也可以用来描述数组，但是我们一般不会这么做，因为这种方式比前两种方式复杂多了。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> NumberArray &#123;</span><br><span class="line">    [index: <span class="built_in">number</span>]: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fibonacci: NumberArray = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure>
<p>类数组</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> args: <span class="built_in">number</span>[] = <span class="built_in">arguments</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>any在数组中的应用</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: <span class="built_in">any</span>[] = [<span class="string">&#x27;xcatliu&#x27;</span>, <span class="number">25</span>, &#123; <span class="attr">website</span>: <span class="string">&#x27;http://xcatliu.com&#x27;</span> &#125;];</span><br></pre></td></tr></table></figure>
<h2 id="函数的类型"><a href="#函数的类型" class="headerlink" title="函数的类型"></a>函数的类型</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数表达式</span></span><br><span class="line"><span class="keyword">let</span> mySum: <span class="function">(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function"><span class="keyword">function</span> (<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在 TypeScript 的类型定义中，=&gt; 用来表示函数的定义，左边是输入类型，需要用括号括起来，右边是输出类型。</p>
<p>用接口定义函数的形状</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> SearchFunc &#123;</span><br><span class="line">    (source: <span class="built_in">string</span>, <span class="attr">subString</span>: <span class="built_in">string</span>): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySearch: SearchFunc;</span><br><span class="line">mySearch = <span class="function"><span class="keyword">function</span>(<span class="params">source: <span class="built_in">string</span>, subString: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> source.search(subString) !== -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可选参数<br>可选参数后面不允许再出现必需参数了  </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName?: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lastName) &#123;</span><br><span class="line">        <span class="keyword">return</span> firstName + <span class="string">&#x27; &#x27;</span> + lastName;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> firstName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tomcat = buildName(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Cat&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> tom = buildName(<span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>参数默认值</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName: <span class="built_in">string</span> = <span class="string">&#x27;Cat&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&#x27; &#x27;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tomcat = buildName(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Cat&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> tom = buildName(<span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="类型断言"><a href="#类型断言" class="headerlink" title="类型断言"></a>类型断言</h2><p>类型断言（Type Assertion）可以用来手动指定一个值的类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;类型&gt;值</span><br><span class="line">或</span><br><span class="line">值 as 类型</span><br></pre></td></tr></table></figure>
<p>类型断言不是类型转换，断言成一个联合类型中不存在的类型是不允许的：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLength</span>(<span class="params">something: <span class="built_in">string</span> | <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((&lt;<span class="built_in">string</span>&gt;something).length) &#123;</span><br><span class="line">        <span class="keyword">return</span> (&lt;<span class="built_in">string</span>&gt;something).length;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> something.toString().length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="声明文件"><a href="#声明文件" class="headerlink" title="声明文件"></a>声明文件</h2><ul>
<li>declare var 声明全局变量</li>
<li>declare function 声明全局方法</li>
<li>declare class 声明全局类</li>
<li>declare enum 声明全局枚举类型</li>
<li>declare namespace 声明（含有子属性的）全局对象</li>
<li>interface 和 type 声明全局类型</li>
<li>export 导出变量</li>
<li>export namespace 导出（含有子属性的）对象</li>
<li>export default ES6 默认导出</li>
<li>export = commonjs 导出模块</li>
<li>export as namespace UMD 库声明全局变量</li>
<li>declare global 扩展全局变量</li>
<li>declare module 扩展模块</li>
<li>/// <reference /> 三斜线指令</li>
</ul>
<p>npm包的声明文件可能存在于两个地方：<br>-与该 npm 包绑定在一起。判断依据是 package.json 中有 types 字段，或者有一个 index.d.ts 声明文件。这种模式不需要额外安装其他包，是最为推荐的，所以以后我们自己创建 npm 包的时候，最好也将声明文件与 npm 包绑定在一起。</p>
<ul>
<li>发布到 @types 里。我们只需要尝试安装一下对应的 @types 包就知道是否存在该声明文件，安装命令是 npm install @types/foo –save-dev。这种模式一般是由于 npm 包的维护者没有提供声明文件，所以只能由其他人将声明文件发布到 @types 里了。</li>
</ul>
<p>npm 包的声明文件主要有以下几种语法：</p>
<ul>
<li>export 导出变量</li>
<li>export namespace 导出（含有子属性的）对象</li>
<li>export default ES6 默认导出</li>
<li>export = commonjs 导出模块</li>
</ul>
<h2 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h2><ul>
<li>Boolean</li>
<li>Error</li>
<li>Date</li>
<li>RegExp</li>
</ul>
<h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Name = <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> NameResolver = <span class="function">() =&gt;</span> <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> NameOrResolver = Name | NameResolver;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">n: NameOrResolver</span>): <span class="title">Name</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> n === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="字符串字面量类型"><a href="#字符串字面量类型" class="headerlink" title="字符串字面量类型"></a>字符串字面量类型</h2><p>字符串字面量类型用来约束取值只能是某几个字符串中的一个。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> EventNames = <span class="string">&#x27;click&#x27;</span> | <span class="string">&#x27;scroll&#x27;</span> | <span class="string">&#x27;mousemove&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">ele: Element, event: EventNames</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleEvent(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;hello&#x27;</span>), <span class="string">&#x27;scroll&#x27;</span>);  <span class="comment">// 没问题</span></span><br><span class="line">handleEvent(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;world&#x27;</span>), <span class="string">&#x27;dbclick&#x27;</span>); <span class="comment">// 报错，event 不能为 &#x27;dbclick&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>数组合并了相同类型的对象，而元组（Tuple）合并了不同类型的对象。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tom: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&#x27;Tom&#x27;</span>, <span class="number">25</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tom: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line">tom[<span class="number">0</span>] = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line">tom[<span class="number">1</span>] = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line">tom[<span class="number">0</span>].slice(<span class="number">1</span>);</span><br><span class="line">tom[<span class="number">1</span>].toFixed(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Days &#123;Sun, Mon, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Sun&quot;</span>] === <span class="number">0</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Mon&quot;</span>] === <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Tue&quot;</span>] === <span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Sat&quot;</span>] === <span class="number">6</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="number">0</span>] === <span class="string">&quot;Sun&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="number">1</span>] === <span class="string">&quot;Mon&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="number">2</span>] === <span class="string">&quot;Tue&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="number">6</span>] === <span class="string">&quot;Sat&quot;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>手动赋值</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Days &#123;Sun = <span class="number">7</span>, Mon = <span class="number">1</span>, Tue, Wed, Thu, Fri, Sat&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Sun&quot;</span>] === <span class="number">7</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Mon&quot;</span>] === <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Tue&quot;</span>] === <span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(Days[<span class="string">&quot;Sat&quot;</span>] === <span class="number">6</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h3 id="public-private-和-protected"><a href="#public-private-和-protected" class="headerlink" title="public private 和 protected"></a>public private 和 protected</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> Animal(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.name); <span class="comment">// Jack</span></span><br><span class="line">a.name = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a.name); <span class="comment">// Tom</span></span><br></pre></td></tr></table></figure>
<h3 id="参数属性"><a href="#参数属性" class="headerlink" title="参数属性"></a>参数属性</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="comment">// public name: string;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title">constructor</span> (<span class="params"><span class="keyword">public</span> name</span>) &#123;</span><br><span class="line">        <span class="comment">// this.name = name;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">readonly</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> Animal(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.name); <span class="comment">// Jack</span></span><br><span class="line">a.name = <span class="string">&#x27;Tom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts(10,3): TS2540: Cannot assign to &#x27;name&#x27; because it is a read-only property.</span></span><br></pre></td></tr></table></figure>
<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> name;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> sayHi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="title">sayHi</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`Meow, My name is <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cat = <span class="keyword">new</span> Cat(<span class="string">&#x27;Tom&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="类的类型"><a href="#类的类型" class="headerlink" title="类的类型"></a>类的类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    sayHi(): <span class="built_in">string</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`My name is <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a: Animal = <span class="keyword">new</span> Animal(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a.sayHi()); <span class="comment">// My name is Jack</span></span><br></pre></td></tr></table></figure>

<h2 id="类与接口"><a href="#类与接口" class="headerlink" title="类与接口"></a>类与接口</h2><h3 id="类实现接口"><a href="#类实现接口" class="headerlink" title="类实现接口"></a>类实现接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Door</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecurityDoor</span> <span class="keyword">extends</span> <span class="title">Door</span> <span class="title">implements</span> <span class="title">Alarm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">alert</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;SecurityDoor alert&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="title">implements</span> <span class="title">Alarm</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">alert</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Car alert&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="一个类可以实现多个接口"><a href="#一个类可以实现多个接口" class="headerlink" title="一个类可以实现多个接口"></a>一个类可以实现多个接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Light &#123;</span><br><span class="line">    lightOn();</span><br><span class="line">    lightOff();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="title">implements</span> <span class="title">Alarm</span>, <span class="title">Light</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">alert</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Car alert&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">lightOn</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Car light on&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">lightOff</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Car light off&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口继承接口"><a href="#接口继承接口" class="headerlink" title="接口继承接口"></a>接口继承接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Alarm &#123;</span><br><span class="line">    alert();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> LightableAlarm <span class="keyword">extends</span> Alarm &#123;</span><br><span class="line">    lightOn();</span><br><span class="line">    lightOff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="接口继承类"><a href="#接口继承类" class="headerlink" title="接口继承类"></a>接口继承类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    x: <span class="built_in">number</span>;</span><br><span class="line">    y: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Point3d <span class="keyword">extends</span> Point &#123;</span><br><span class="line">    z: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> point3d: Point3d = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>泛型（Generics）是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createArray</span>(<span class="params">length: <span class="built_in">number</span>, value: <span class="built_in">any</span></span>): <span class="title">Array</span>&lt;<span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(<span class="number">3</span>, <span class="string">&#x27;x&#x27;</span>); <span class="comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createArray</span>&lt;<span class="title">T</span>&gt;(<span class="params">length: <span class="built_in">number</span>, value: T</span>): <span class="title">Array</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result: T[] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray&lt;<span class="built_in">string</span>&gt;(<span class="number">3</span>, <span class="string">&#x27;x&#x27;</span>); <span class="comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="自动推算"><a href="#自动推算" class="headerlink" title="自动推算"></a>自动推算</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createArray</span>&lt;<span class="title">T</span>&gt;(<span class="params">length: <span class="built_in">number</span>, value: T</span>): <span class="title">Array</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result: T[] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(<span class="number">3</span>, <span class="string">&#x27;x&#x27;</span>); <span class="comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="多个类型参数"><a href="#多个类型参数" class="headerlink" title="多个类型参数"></a>多个类型参数</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>&lt;<span class="title">T</span>, <span class="title">U</span>&gt;(<span class="params">tuple: [T, U]</span>): [<span class="title">U</span>, <span class="title">T</span>] </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">swap([<span class="number">7</span>, <span class="string">&#x27;seven&#x27;</span>]); <span class="comment">// [&#x27;seven&#x27;, 7]</span></span><br></pre></td></tr></table></figure>
<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> CreateArrayFunc&lt;T&gt; &#123;</span><br><span class="line">    (length: <span class="built_in">number</span>, <span class="attr">value</span>: T): <span class="built_in">Array</span>&lt;T&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> createArray: CreateArrayFunc&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">createArray = <span class="function"><span class="keyword">function</span>&lt;<span class="title">T</span>&gt;(<span class="params">length: <span class="built_in">number</span>, value: T</span>): <span class="title">Array</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result: T[] = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        result[i] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createArray(<span class="number">3</span>, <span class="string">&#x27;x&#x27;</span>); <span class="comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericNumber</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    zeroValue: T;</span><br><span class="line">    add: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGenericNumber = <span class="keyword">new</span> GenericNumber&lt;<span class="built_in">number</span>&gt;();</span><br><span class="line">myGenericNumber.zeroValue = <span class="number">0</span>;</span><br><span class="line">myGenericNumber.add = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123; <span class="keyword">return</span> x + y; &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="声明合并"><a href="#声明合并" class="headerlink" title="声明合并"></a>声明合并</h2><ul>
<li>函数的合并</li>
<li>接口的合并</li>
<li>类的合并</li>
</ul>
<h2 id="代码检查"><a href="#代码检查" class="headerlink" title="代码检查"></a>代码检查</h2><p>由于 ESLint 默认使用 Espree 进行语法解析，无法识别 TypeScript 的一些语法，故我们需要安装 @typescript-eslint/parser，替代掉默认的解析器</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev eslint</span><br><span class="line">npm install --save-dev typescript <span class="meta">@typescript</span>-eslint/parser</span><br></pre></td></tr></table></figure>
<p>.eslintrc.js配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    parser: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">    plugins: [<span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">    rules: &#123;</span><br><span class="line">        <span class="comment">// 禁止使用 var</span></span><br><span class="line">        <span class="string">&#x27;no-var&#x27;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        <span class="comment">// 优先使用 interface 而不是 type</span></span><br><span class="line">        <span class="string">&#x27;@typescript-eslint/consistent-type-definitions&#x27;</span>: [</span><br><span class="line">            <span class="string">&quot;error&quot;</span>,</span><br><span class="line">            <span class="string">&quot;interface&quot;</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>手动检查一个ts文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./node_modules/.bin/eslint index.ts</span><br></pre></td></tr></table></figure>

<p>自动检查一个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi package.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;scripts&quot;: &#123;</span><br><span class="line">        &quot;eslint&quot;: &quot;eslint index.ts&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run eslint</span><br></pre></td></tr></table></figure>
<p>检查整个项目的ts文件<br>vi package.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;eslint&quot;</span>: <span class="string">&quot;eslint src --ext .ts&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Prettier修复格式错误"><a href="#使用Prettier修复格式错误" class="headerlink" title="使用Prettier修复格式错误"></a>使用Prettier修复格式错误</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev prettier</span><br></pre></td></tr></table></figure>
<p>prettier.config.js配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// prettier.config.js or .prettierrc.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 一行最多 100 字符</span></span><br><span class="line">    printWidth: <span class="number">100</span>,</span><br><span class="line">    <span class="comment">// 使用 4 个空格缩进</span></span><br><span class="line">    tabWidth: <span class="number">4</span>,</span><br><span class="line">    <span class="comment">// 不使用缩进符，而使用空格</span></span><br><span class="line">    useTabs: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 行尾需要有分号</span></span><br><span class="line">    semi: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 使用单引号</span></span><br><span class="line">    singleQuote: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 对象的 key 仅在必要时用引号</span></span><br><span class="line">    quoteProps: <span class="string">&#x27;as-needed&#x27;</span>,</span><br><span class="line">    <span class="comment">// jsx 不使用单引号，而使用双引号</span></span><br><span class="line">    jsxSingleQuote: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 末尾不需要逗号</span></span><br><span class="line">    trailingComma: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="comment">// 大括号内的首尾需要空格</span></span><br><span class="line">    bracketSpacing: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// jsx 标签的反尖括号需要换行</span></span><br><span class="line">    jsxBracketSameLine: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 箭头函数，只有一个参数的时候，也需要括号</span></span><br><span class="line">    arrowParens: <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">    <span class="comment">// 每个文件格式化的范围是文件的全部内容</span></span><br><span class="line">    rangeStart: <span class="number">0</span>,</span><br><span class="line">    rangeEnd: <span class="literal">Infinity</span>,</span><br><span class="line">    <span class="comment">// 不需要写文件开头的 @prettier</span></span><br><span class="line">    requirePragma: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 不需要自动在文件开头插入 @prettier</span></span><br><span class="line">    insertPragma: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 使用默认的折行标准</span></span><br><span class="line">    proseWrap: <span class="string">&#x27;preserve&#x27;</span>,</span><br><span class="line">    <span class="comment">// 根据显示样式决定 html 要不要折行</span></span><br><span class="line">    htmlWhitespaceSensitivity: <span class="string">&#x27;css&#x27;</span>,</span><br><span class="line">    <span class="comment">// 换行符使用 lf</span></span><br><span class="line">    endOfLine: <span class="string">&#x27;lf&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>修改 .vscode/settings.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;files.eol&quot;</span>: <span class="string">&quot;\n&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;eslint.autoFixOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;eslint.validate&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">        <span class="string">&quot;javascriptreact&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;language&quot;</span>: <span class="string">&quot;typescript&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;autoFix&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;typescript.tsdk&quot;</span>: <span class="string">&quot;node_modules/typescript/lib&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="TS编码规范"><a href="#TS编码规范" class="headerlink" title="TS编码规范"></a>TS编码规范</h2><ul>
<li><a target="_blank" rel="noopener" href="https://acexking.github.io/2019/08/14/typescript/">https://acexking.github.io/2019/08/14/typescript/</a></li>
</ul>
<h2 id="Lodash库"><a href="#Lodash库" class="headerlink" title="Lodash库"></a>Lodash库</h2><p><a target="_blank" rel="noopener" href="https://www.lodashjs.com/">https://www.lodashjs.com/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-jUnit%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-jUnit%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">研发规约-jUnit测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:02:02" itemprop="dateCreated datePublished" datetime="2021-01-05T14:02:02+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>工程必须编写Junit单元测试，只有通过所有测试并达到指定覆盖率之后，才允许构建。</p>
<blockquote>
<p>初期不强制要求，视团队接受/排斥情况而定</p>
</blockquote>
<h2 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h2><h3 id="存放及命名"><a href="#存放及命名" class="headerlink" title="存放及命名"></a>存放及命名</h3><p>所有单元测试均放在src/test/java文件夹下，命名为类名+Test(s).java，即对于某个类的所有单元测试均放在同一个文件内</p>
<h3 id="Jacoco代码覆盖率"><a href="#Jacoco代码覆盖率" class="headerlink" title="Jacoco代码覆盖率"></a>Jacoco代码覆盖率</h3><p>工程必须配置Jacoco插件，以进行代码测试覆盖率的检查，只有覆盖率达到一定比例才能通过构建。更多细节请参考<code>Sonar代码检测.md</code>。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><p>修改zorrodemo.service模块的<code>pom.xml</code>，添加mockito依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mockito<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mockito-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10.19<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Service层单元测试DEMO"><a href="#Service层单元测试DEMO" class="headerlink" title="Service层单元测试DEMO"></a>Service层单元测试DEMO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AttachmentServiceUnitTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(AttachmentServiceUnitTest.class);</span><br><span class="line">    <span class="meta">@InjectMocks</span></span><br><span class="line">    <span class="keyword">private</span> AttachmentService attachmentService = <span class="keyword">new</span> AttachmentService();</span><br><span class="line">    <span class="meta">@Mock</span></span><br><span class="line">    <span class="keyword">private</span> AttachmentMapper attachmentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MockitoAnnotations.initMocks(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Attachment&gt; attachmentList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Attachment attachment = <span class="keyword">new</span> Attachment();</span><br><span class="line">        attachment.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        attachment.setName(<span class="string">&quot;attachmentName&quot;</span>);</span><br><span class="line">        attachmentList.add(attachment);</span><br><span class="line"></span><br><span class="line">        given(attachmentMapper.query(Mockito.any(String.class))).willReturn(attachmentList);</span><br><span class="line"></span><br><span class="line">        PageInfo&lt;Attachment&gt; result = attachmentService.query(<span class="string">&quot;1.docx&quot;</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertTrue(result.getTotal() &gt; <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Service层集成测试DEMO"><a href="#Service层集成测试DEMO" class="headerlink" title="Service层集成测试DEMO"></a>Service层集成测试DEMO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = RootApplicationContextConfigForTest.class)</span></span><br><span class="line"><span class="meta">@Transactional</span> <span class="comment">//事务默认回滚</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AttachmentServiceIntegrationTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(AttachmentServiceIntegrationTest.class);</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AttachmentService attachmentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Attachment attachment = <span class="keyword">new</span> Attachment();</span><br><span class="line">        attachment.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        attachment.setName(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line">        attachment.setPath(<span class="string">&quot;/tmp&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = attachmentService.save(attachment);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertEquals(<span class="number">1</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(expected = DataIntegrityViolationException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveWithException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Attachment attachment = <span class="keyword">new</span> Attachment();</span><br><span class="line">        attachment.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = attachmentService.save(attachment);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertEquals(<span class="number">1</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PageInfo&lt;Attachment&gt; result = attachmentService.query(<span class="string">&quot;1.docx&quot;</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertTrue(result.getTotal() &gt; <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryWithNotExistName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PageInfo&lt;Attachment&gt; result = attachmentService.query(<span class="string">&quot;notexist&quot;</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertEquals(<span class="number">0</span>, result.getTotal());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Attachment attachment = <span class="keyword">new</span> Attachment();</span><br><span class="line">        attachment.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        attachment.setName(<span class="string">&quot;test0&quot;</span>);</span><br><span class="line">        attachment.setPath(<span class="string">&quot;/tmp&quot;</span>);</span><br><span class="line">        attachmentService.save(attachment);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = attachmentService.delete(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;result: &#123;&#125;&quot;</span>, result);</span><br><span class="line"></span><br><span class="line">        assertTrue(result &gt; <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Controller层集成测试"><a href="#Controller层集成测试" class="headerlink" title="Controller层集成测试"></a>Controller层集成测试</h3><ul>
<li>无法使用<code>@SpringBootTest</code>，不容易实现</li>
<li>公司框架中controller层基本上无业务逻辑，仅是rest接口的定义。本层测试省略后影响较小。</li>
</ul>
<h2 id="关于回归测试"><a href="#关于回归测试" class="headerlink" title="关于回归测试"></a>关于回归测试</h2><ul>
<li>方式1: 利用IDEA自带的HTTP client实现。</li>
<li>方式2: 使用更通用的postman+newman编写测试脚本并测试</li>
<li>不强制回归测试</li>
<li>更多细节参考<code>接口回归测试.md</code></li>
</ul>
<h2 id="其它说明"><a href="#其它说明" class="headerlink" title="其它说明"></a>其它说明</h2><ul>
<li>尽量简化开发流程，降低上手难度，除公司标准框架外，不引入新的复杂度</li>
<li>不做TDD，不做每个层级的单元测试</li>
<li>仅做service层的集成测试</li>
<li>为避免数据不一致造成的测试失效，后期可考虑引入H2 Database(会小幅度增加开发复杂度，根据情况权衡)</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-RESTful%E6%8E%A5%E5%8F%A3%E7%BA%A6%E5%AE%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/%E7%A0%94%E5%8F%91%E8%A7%84%E7%BA%A6-RESTful%E6%8E%A5%E5%8F%A3%E7%BA%A6%E5%AE%9A/" class="post-title-link" itemprop="url">研发规约-RESTful接口约定</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:01:48" itemprop="dateCreated datePublished" datetime="2021-01-05T14:01:48+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="RESTful风格简介"><a href="#RESTful风格简介" class="headerlink" title="RESTful风格简介"></a>RESTful风格简介</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>REST = REpresentational State Transfer = 表现层状态转移</p>
<p>REST描述的是在网络中Client/Server的一种交互风格，并非强制性规范。</p>
<h3 id="名词-amp-资源"><a href="#名词-amp-资源" class="headerlink" title="名词&amp;资源"></a>名词&amp;资源</h3><p>URL中只使用名词来指定资源，原则上不使用动词，“资源”是REST的核心。</p>
<p>例如: <a target="_blank" rel="noopener" href="http://localhost/profiles/1">http://localhost/profiles/1</a>  获取个人资料</p>
<h3 id="动词-amp-操作"><a href="#动词-amp-操作" class="headerlink" title="动词&amp;操作"></a>动词&amp;操作</h3><p>用HTTP协议里的动词来实现资源的添加，修改，删除等操作。</p>
<ul>
<li>GET    用来获取资源</li>
<li>POST  新建资源</li>
<li>PUT    更新资源</li>
<li>DELETE  删除资源</li>
</ul>
<p>例如:  </p>
<ul>
<li>DELETE <a target="_blank" rel="noopener" href="http://localhost/friends/1">http://localhost/friends/1</a>  删除好友 </li>
<li>POST <a target="_blank" rel="noopener" href="http://localhost/friends/1">http://localhost/friends/1</a>  添加好友</li>
<li>UPDATE <a target="_blank" rel="noopener" href="http://localhost/profiles/1">http://localhost/profiles/1</a>  更新个人资料</li>
</ul>
<h3 id="状态-amp-结果"><a href="#状态-amp-结果" class="headerlink" title="状态&amp;结果"></a>状态&amp;结果</h3><p>用HTTP Status Code传递Server的状态信息。例如<code>200</code>表示成功，<code>500</code>表示服务器内部错误等。</p>
<h2 id="RESTful接口约定"><a href="#RESTful接口约定" class="headerlink" title="RESTful接口约定"></a>RESTful接口约定</h2><h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><p>举例:<br><a href="http://ip:port/{domain}/{service_name}/{version}/{api_name}?{pathparam}={somevalue}&amp;{pathparam}={somevalue}">http://ip:port/{domain}/{service_name}/{version}/{api_name}?{pathparam}={somevalue}&amp;{pathparam}={somevalue}</a><br><a target="_blank" rel="noopener" href="http://10.161.66.60/act/resourceremain/v1/resources?serialNumber=18601969575&amp;netTypeCode=50&amp;xAcceptMode=2">http://10.161.66.60/act/resourceremain/v1/resources?serialNumber=18601969575&amp;netTypeCode=50&amp;xAcceptMode=2</a>  </p>
<ul>
<li>{domain}：服务所属域信息，如<code>act</code>。小型工程可省略。</li>
<li>{service_name}：服务名，如<code>resourceremain</code>。小型工程可省略。</li>
<li>{version}: API版本号，如<code>v1</code>。小型工程可省略。</li>
<li>{api_name}: 接口名称，如<code>resources</code>。</li>
</ul>
<p>说明: </p>
<ul>
<li>URL中字母都是小写。</li>
<li>每个URL代表一种资源，URL不能有动词，只能是名词。如show，get，update，query，delete等不能出现在URL中。</li>
<li>利用HTTP请求的动词表示对资源操作的行为。</li>
<li>对于资源的描述的名词应该是层级嵌套的方式，比如/companys/departments/projects。通过这种对于信息层级描述的方式，更利于实体的抽象。</li>
<li>路径终点的命名使用复数形式，比如/books。一般一个URL路径表示的资源会映射为数据库一系列表的记录的集合，因此使用复数更直观。</li>
</ul>
<h3 id="HTTP方法"><a href="#HTTP方法" class="headerlink" title="HTTP方法"></a>HTTP方法</h3><p>对于资源的具体操作类型，由HTTP动词表示，常用的HTTP动词有下面五个:  </p>
<ul>
<li>GET方法    从服务器取出资源(一项或多项)</li>
<li>POST方法    在服务器新建一个资源</li>
<li>PUT方法    在服务器更新资源（客户端提供改变后的完整资源）</li>
<li>PATCH方法    在服务器更新资源（客户端提供改变的属性）</li>
<li>DELETE方法    从服务器删除资源</li>
</ul>
<p>示例:    </p>
<ul>
<li>GET /books：列出所有书</li>
<li>POST /books：新建一个书</li>
<li>GET /books/{id}  获取某本书的信息</li>
<li>PUT /books/{id}  更新某本书的信息（提供该书的全部属性）</li>
<li>PUT /books/{id}  更新某本书的信息（仅提供该书需要改变的属性）</li>
<li>DELETE /books/{id}  删除某个书</li>
<li>GET /books/{id}/notes  列出本书的所有笔记</li>
<li>DELETE /books/{id}/notes/{id}  删除某本书的某条笔记</li>
</ul>
<h3 id="过滤信息"><a href="#过滤信息" class="headerlink" title="过滤信息"></a>过滤信息</h3><p>如果记录数量很多，API应该提供参数，过滤返回结果。参数名仅做参考。</p>
<ul>
<li>?limit=10：指定返回记录的数量</li>
<li>?offset=10：指定返回记录的开始位置。</li>
<li>?page=2&amp;per_page=100：指定第几页，以及每页的记录数。</li>
<li>?start_size&amp;file_size：指定请求的起始条数，以及请求记录条数。</li>
<li>?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</li>
<li>?animal_type_id=1：指定筛选条件。<blockquote>
<p>参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，GET /zoo/ID/animals 与 GET /animals?zoo_id=ID 的含义是相同的。</p>
</blockquote>
</li>
</ul>
<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><p>服务器向用户返回的状态码和提示信息，常见的有以下一些:  </p>
<ul>
<li>200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。</li>
<li>201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。</li>
<li>202 Accepted - [ * ]：表示一个请求已经进入后台排队（异步任务）</li>
<li>204 NO CONTENT - [DELETE]：用户删除数据成功。</li>
<li>400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。</li>
<li>401 Unauthorized - [ * ]：表示用户没有权限（令牌、用户名、密码错误）。</li>
<li>403 Forbidden - [ * ]：表示用户得到授权（与401错误相对），但是访问是被禁止的。</li>
<li>404 NOT FOUND - [ * ]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。</li>
<li>406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</li>
<li>408 REQUEST_TIMEOUT - 请求超时</li>
<li>409 CONFLICT - 冲突，大部分业务异常可以选择使用此状态</li>
<li>410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。</li>
<li>422 Unprocesable entity - [POST/PUT/PATCH]：当创建一个对象时，发生一个验证错误。</li>
<li>500 INTERNAL SERVER ERROR - [ * ]：服务器发生错误，用户将无法判断发出的请求是否成功。</li>
</ul>
<h3 id="成功-amp-异常处理"><a href="#成功-amp-异常处理" class="headerlink" title="成功&amp;异常处理"></a>成功&amp;异常处理</h3><h4 id="2XX"><a href="#2XX" class="headerlink" title="2XX"></a>2XX</h4><p>状态码200/201，表示成功。响应报文中，直接返回业务信息，不需要添加冗余的code/message等表示状态字段。例如:  </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;1.docx&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/tmp/1.docx&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>状态码204，表示成功，且不需要返回任何信息。响应报文为空即可。</p>
<blockquote>
<p>公司框架中，响应报文强制包含状态信息，可无视以本条约定</p>
</blockquote>
<h3 id="4XX"><a href="#4XX" class="headerlink" title="4XX"></a>4XX</h3><p>状态码是4xx，表示普通的业务异常。应向用户返回出错信息。例如:  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot; &quot;9999&quot;,</span><br><span class="line">    &quot;message&quot;: &quot;可向用户展示的错误信息&quot;,</span><br><span class="line">    &quot;devMessage&quot;: &quot;更详细报错信息，用于前端调试&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所有可捕获的业务异常，都应该使用4xx来表示，具体分类细节可自由定义。常用的错误码有: </p>
<ul>
<li>404 NOT_FOUND</li>
<li>408 REQUEST_TIMEOUT</li>
<li>409 CONFLICT</li>
<li>422 UNPROCESSABLE_ENTITY</li>
</ul>
<h3 id="5XX"><a href="#5XX" class="headerlink" title="5XX"></a>5XX</h3><p>状态码5xx，表示服务内部异常。如服务积压、数据库连接异常等。</p>
<p>此类异常应在框架的公共异常处理部分统一处理，业务代码中无须进行实现。</p>
<p>一般统一归类到500 INTERNAL SERVER ERROR 下即可。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202005/Angular%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202005/Angular%E4%BB%A3%E7%A0%81%E7%89%87%E6%96%AD/" class="post-title-link" itemprop="url">Angular代码片段</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:01:35" itemprop="dateCreated datePublished" datetime="2021-01-05T14:01:35+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><p>本文档直接取自GitHub<a target="_blank" rel="noopener" href="https://github.com/30-seconds/30-seconds-of-angular/blob/master/README.md">30-seconds-of-angular</a>项目。</p>
<h2 id="Table-of-contents"><a href="#Table-of-contents" class="headerlink" title="Table of contents"></a>Table of contents</h2><p>Beginner snippets</p>
<ul>
<li><a href="#accessing-enums-in-template">Accessing Enums in template</a></li>
<li><a href="#cheat-sheets-and-checklists">Cheat Sheets and Checklists</a></li>
<li><a href="#component-state-debugging">Component State Debugging</a></li>
<li><a href="#default-viewencapsulation-value">Default ViewEncapsulation value</a></li>
<li><a href="#hammerjs-gestures">hammerjs-gestures</a></li>
<li><a href="#loader-component">Loader Component</a></li>
<li><a href="#ng-content">ng-content</a></li>
<li><a href="#ngif-else">ngIf else</a></li>
<li><a href="#optional-parameters-in-the-middle">Optional parameters in the middle</a></li>
<li><a href="#renaming-inputs-and-outputs">Renaming inputs and outputs</a></li>
<li><a href="#safe-navigation-operator">Safe Navigation Operator</a></li>
<li><a href="#trackby-in-for-loops">trackBy in for loops</a></li>
<li><a href="#understanding-microsyntax">Understanding Microsyntax</a></li>
</ul>
<p>Intermediate snippets</p>
<ul>
<li><a href="#%E6%9D%A5%E6%BA%90">来源</a></li>
<li><a href="#table-of-contents">Table of contents</a></li>
<li><a href="#beginner-snippets">Beginner snippets</a><ul>
<li><a href="#accessing-enums-in-template">Accessing Enums in template</a></li>
<li><a href="#cheat-sheets-and-checklists">Cheat Sheets and Checklists</a><ul>
<li><a href="#links">Links</a></li>
</ul>
</li>
<li><a href="#component-state-debugging">Component State Debugging</a><ul>
<li><a href="#links-1">Links</a></li>
</ul>
</li>
<li><a href="#default-viewencapsulation-value">Default ViewEncapsulation value</a></li>
<li><a href="#hammerjs-gestures">hammerjs-gestures</a><ul>
<li><a href="#links-2">Links</a></li>
</ul>
</li>
<li><a href="#loader-component">Loader Component</a><ul>
<li><a href="#links-3">Links</a></li>
</ul>
</li>
<li><a href="#ng-content">ng-content</a><ul>
<li><a href="#links-4">Links</a></li>
</ul>
</li>
<li><a href="#ngif-else">ngIf else</a></li>
<li><a href="#optional-parameters-in-the-middle">Optional parameters in the middle</a><ul>
<li><a href="#links-5">Links</a></li>
</ul>
</li>
<li><a href="#renaming-inputs-and-outputs">Renaming inputs and outputs</a><ul>
<li><a href="#links-6">Links</a></li>
</ul>
</li>
<li><a href="#safe-navigation-operator">Safe Navigation Operator</a><ul>
<li><a href="#links-7">Links</a></li>
</ul>
</li>
<li><a href="#trackby-in-for-loops">trackBy in for loops</a><ul>
<li><a href="#links-8">Links</a></li>
</ul>
</li>
<li><a href="#understanding-microsyntax">Understanding Microsyntax</a><ul>
<li><a href="#links-9">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#intermediate-snippets">Intermediate snippets</a><ul>
<li><a href="#accessing-all-nested-form-controls">Accessing all nested form controls</a><ul>
<li><a href="#links-10">Links</a></li>
</ul>
</li>
<li><a href="#adding-keyboard-shortcuts-to-elements">Adding keyboard shortcuts to elements</a><ul>
<li><a href="#links-11">Links</a></li>
</ul>
</li>
<li><a href="#bind-to-host-properties-with-host-binding">Bind to host properties with host binding</a></li>
<li><a href="#component-level-providers">Component level providers</a><ul>
<li><a href="#links-12">Links</a></li>
</ul>
</li>
<li><a href="#global-event-listeners">Global event listeners</a></li>
<li><a href="#injecting-document">Injecting document</a><ul>
<li><a href="#links-13">Links</a></li>
</ul>
</li>
<li><a href="#mark-reactive-fields-as-touched">Mark reactive fields as touched</a><ul>
<li><a href="#links-14">Links</a></li>
</ul>
</li>
<li><a href="#observables-as-outputs">Observables as outputs</a></li>
<li><a href="#passing-template-as-an-input">Passing template as an input</a><ul>
<li><a href="#links-15">Links</a></li>
</ul>
</li>
<li><a href="#preseving-whitespaces">Preseving whitespaces</a><ul>
<li><a href="#links-16">Links</a></li>
</ul>
</li>
<li><a href="#reusing-code-in-template">Reusing code in template</a><ul>
<li><a href="#links-17">Links</a></li>
</ul>
</li>
<li><a href="#reusing-existing-custom-pipes">Reusing existing custom pipes</a><ul>
<li><a href="#links-18">Links</a></li>
</ul>
</li>
<li><a href="#style-bindings">Style bindings</a></li>
<li><a href="#two-way-binding-any-property">Two-way binding any property</a></li>
<li><a href="#using-app_initializer-to-delay-app-start">Using APP_INITIALIZER to delay app start</a><ul>
<li><a href="#links-19">Links</a></li>
</ul>
</li>
<li><a href="#window-location-injection">Window Location injection</a><ul>
<li><a href="#links-20">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#advanced-snippets">Advanced snippets</a><ul>
<li><a href="#getting-components-of-different-types-with-viewchild">Getting components of different types with ViewChild</a><ul>
<li><a href="#links-21">Links</a></li>
</ul>
</li>
<li><a href="#router-custom-preloading">Router Custom Preloading</a><ul>
<li><a href="#links-22">Links</a></li>
</ul>
</li>
<li><a href="#svg">SVG</a></li>
</ul>
</li>
</ul>
<p>Advanced snippets</p>
<ul>
<li><a href="#getting-components-of-different-types-with-viewchild">Getting components of different types with ViewChild</a></li>
<li><a href="#router-custom-preloading">Router Custom Preloading</a></li>
<li><a href="#svg">SVG</a></li>
</ul>
<h2 id="Beginner-snippets"><a href="#Beginner-snippets" class="headerlink" title="Beginner snippets"></a>Beginner snippets</h2><h3 id="Accessing-Enums-in-template"><a href="#Accessing-Enums-in-template" class="headerlink" title="Accessing Enums in template"></a>Accessing Enums in template</h3><p>Enums are great but they are not visible in Angular templates by default.<br>With this little trick you can make them accessible.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Animals &#123;</span><br><span class="line">  DOG,</span><br><span class="line">  CAT,</span><br><span class="line">  DOLPHIN</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  animalsEnum: <span class="keyword">typeof</span> Animals = Animals;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/accessing-enums-in-template">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/enums">enums</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Cheat-Sheets-and-Checklists"><a href="#Cheat-Sheets-and-Checklists" class="headerlink" title="Cheat Sheets and Checklists"></a>Cheat Sheets and Checklists</h3><p>Check out <a target="_blank" rel="noopener" href="https://angular.io/guide/cheatsheet">Angular Cheat Sheet</a> or (<a target="_blank" rel="noopener" href="https://malcoded.com/angular-cheat-sheet">alternative version</a>) containing lots of useful information condensed in one place. </p>
<p>Also <a target="_blank" rel="noopener" href="https://angular-checklist.io/">Angular Checklist</a> contains is curated list of common mistakes made when developing Angular applications.</p>
<h4 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://malcoded.com/angular-cheat-sheet/,https://angular.io/guide/cheatsheet,https://angular.io/guide/styleguide">https://malcoded.com/angular-cheat-sheet/,https://angular.io/guide/cheatsheet,https://angular.io/guide/styleguide</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/cheat-sheets-and-checklists">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/cheat-sheet">cheat sheet</a><br><br><br></p>
<h3 id="Component-State-Debugging"><a href="#Component-State-Debugging" class="headerlink" title="Component State Debugging"></a>Component State Debugging</h3><p>Debug the component state in the browser console by running:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng.probe($<span class="number">0</span>).componentInstance</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>$0</code> - is the DOM node currently selected in dev tools (<code>$1</code> for the previous one and so on).</p>
</blockquote>
<details>
<summary>Bonus</summary>

<p>With Ivy renderer engine:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng.getComponent($<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-1"><a href="#Links-1" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://blog.angularindepth.com/everything-you-need-to-know-about-debugging-angular-applications-d308ed8a51b4">https://blog.angularindepth.com/everything-you-need-to-know-about-debugging-angular-applications-d308ed8a51b4</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/component-state-debugging">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a><br><br><br></p>
<h3 id="Default-ViewEncapsulation-value"><a href="#Default-ViewEncapsulation-value" class="headerlink" title="Default ViewEncapsulation value"></a>Default ViewEncapsulation value</h3><p>If you’re using <code>ViewEncapsulation</code> value which is different than default, it might be daunting to set the value manually for every component. </p>
<p>Luckily you can configure it globally when bootstrapping your app:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">platformBrowserDynamic().bootstrapModule(AppModule, [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> Use ViewEncapsulation.None only if you know what you&#x27;re doing.</span></span><br><span class="line">    defaultEncapsulation: ViewEncapsulation.None</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/default-viewencapsulation-value">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/configuration">configuration</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/styling">styling</a><br><br><br></p>
<h3 id="hammerjs-gestures"><a href="#hammerjs-gestures" class="headerlink" title="hammerjs-gestures"></a>hammerjs-gestures</h3><p>To act upon swipes, pans, and pinhces as well as the other mobile gestures, you can use <code>hammerjs</code> with <code>HostListener</code> decorator, or an event binding,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hammerjs</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;swiperight&#x27;</span>)</span><br><span class="line"><span class="keyword">public</span> swiperight(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// Run code when a user swipes to the right</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>Here are samples on how to use all of the <code>hammerjs</code> event bindings, you can use these events with a <code>HostListener</code> as well:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pan events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pan</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panstart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panmove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pancancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panleft</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panright</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">panup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pandown</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- pinch events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinch</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchstart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchmove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchcancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchin</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pinchout</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- press events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">press</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">pressup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- rotate events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotate</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatestart</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatemove</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotateend</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">rotatecancel</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- swipe events --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipe</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipeleft</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swiperight</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipeup</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">swipedown</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tap event --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> (<span class="attr">tap</span>)=<span class="string">&quot;logEvent($event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-2"><a href="#Links-2" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/angular/angular/blob/master/packages/platform-browser/src/dom/events/hammer_gestures.ts,http://hammerjs.github.io/api/#hammer.manager,https://angular.io/api/platform-browser/HammerGestureConfig">https://github.com/angular/angular/blob/master/packages/platform-browser/src/dom/events/hammer_gestures.ts,http://hammerjs.github.io/api/#hammer.manager,https://angular.io/api/platform-browser/HammerGestureConfig</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/hammerjs-gestures">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/gestures">gestures</a><br><br><br></p>
<h3 id="Loader-Component"><a href="#Loader-Component" class="headerlink" title="Loader Component"></a>Loader Component</h3><p>You can create own helper component and use it instead of <code>*ngIf</code>.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;loader&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ng-content *ngIf=&quot;!loading else showLoader&quot;&gt;&lt;/ng-content&gt;</span></span><br><span class="line"><span class="string">    &lt;ng-template #showLoader&gt;🕚 Wait 10 seconds!&lt;/ng-template&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoaderComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() loading: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For usage example:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">loader</span> [<span class="attr">loading</span>]=<span class="string">&quot;isLoading&quot;</span>&gt;</span>🦊 🦄 🐉<span class="tag">&lt;/<span class="name">loader</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that the content will be eagerly evaluated, e.g. in the snippet below <code>destroy-the-world</code> will be created before the loading even starts:</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">loader</span> [<span class="attr">loading</span>]=<span class="string">&quot;isLoading&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">destroy-the-world</span>&gt;</span><span class="tag">&lt;/<span class="name">destroy-the-world</span>&gt;</span><span class="tag">&lt;/<span class="name">loader</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-3"><a href="#Links-3" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://medium.com/claritydesignsystem/ng-content-the-hidden-docs-96a29d70d11b,https://blog.angularindepth.com/https-medium-com-thomasburleson-animated-ghosts-bfc045a51fba">https://medium.com/claritydesignsystem/ng-content-the-hidden-docs-96a29d70d11b,https://blog.angularindepth.com/https-medium-com-thomasburleson-animated-ghosts-bfc045a51fba</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/loader-component">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="ng-content"><a href="#ng-content" class="headerlink" title="ng-content"></a>ng-content</h3><p>With <code>ng-content</code> you can pass any elements to a component.<br>This simplifies creating reusable components.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;wrapper&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;wrapper&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;ng-content&gt;&lt;/ng-content&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">wrapper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">wrapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-4"><a href="#Links-4" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://medium.com/p/96a29d70d11b">https://medium.com/p/96a29d70d11b</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/ng-content">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="ngIf-else"><a href="#ngIf-else" class="headerlink" title="ngIf else"></a>ngIf else</h3><p><code>*ngIf</code> directive also supports <code>else</code> statement.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngIf</span>=<span class="string">&quot;isLoading; else notLoading&quot;</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">notLoading</span>&gt;</span>not loading<span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/ngif-else">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/ngif">ngif</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Optional-parameters-in-the-middle"><a href="#Optional-parameters-in-the-middle" class="headerlink" title="Optional parameters in the middle"></a>Optional parameters in the middle</h3><p>Navigate with matrix params:</p>
<p>the router will navigate to <code>/first;name=foo/details</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[&#x27;/&#x27;, &#x27;first&#x27;, &#123;name: &#x27;foo&#x27;&#125;, &#x27;details&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  link with params</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-5"><a href="#Links-5" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://stackblitz.com/edit/angular-xvy5pd">https://stackblitz.com/edit/angular-xvy5pd</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/optional-parameters-in-the-middle">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/routing">routing</a><br><br><br></p>
<h3 id="Renaming-inputs-and-outputs"><a href="#Renaming-inputs-and-outputs" class="headerlink" title="Renaming inputs and outputs"></a>Renaming inputs and outputs</h3><p>In certain cases <code>@Input</code> and <code>@Output</code> properties can be named differently than the actual inputs and outputs.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">pagination</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">paginationShowFirst</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  (<span class="attr">paginationPageChanged</span>)=<span class="string">&quot;onPageChanged($event)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123; <span class="attr">selector</span>: <span class="string">&#x27;[pagination]&#x27;</span>&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaginationComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>(<span class="string">&#x27;paginationShowFirst&#x27;</span>) </span><br><span class="line">  showFirst: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Output</span>(<span class="string">&#x27;paginationPageChanged&#x27;</span>) </span><br><span class="line">  pageChanged = <span class="keyword">new</span> EventEmitter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: Use this wisely, see <a target="_blank" rel="noopener" href="https://angular.io/guide/styleguide#style-05-13">StyleGuide recommedation</a></p>
</blockquote>
<h4 id="Links-6"><a href="#Links-6" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/styleguide#style-05-13">https://angular.io/guide/styleguide#style-05-13</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/renaming-inputs-and-outputs">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Safe-Navigation-Operator"><a href="#Safe-Navigation-Operator" class="headerlink" title="Safe Navigation Operator"></a>Safe Navigation Operator</h3><p>The <a target="_blank" rel="noopener" href="https://angular.io/guide/template-syntax#the-safe-navigation-operator----and-null-property-paths">Safe Navigation Operator</a> helps with preventing null-reference exceptions in component template expressions. It returns object property value if it exists or null otherwise.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> I will work even if student is null or undefined: &#123;&#123;student?.name&#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;a?.b?.c&#125;&#125; </span><br></pre></td></tr></table></figure>
<p>Underneath will be compiled to.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(_co.a == null)? null: ((_co.a.b == null)? null: _co.a.b.c));</span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-7"><a href="#Links-7" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/angular/angular/issues/791">https://github.com/angular/angular/issues/791</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/safe-navigation-operator">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/object-property-handling">object property handling</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="trackBy-in-for-loops"><a href="#trackBy-in-for-loops" class="headerlink" title="trackBy in for loops"></a>trackBy in for loops</h3><p>To avoid the expensive operations, we can help Angular to track which items added or removed i.e. customize the default tracking algorithm by providing a trackBy option to NgForOf.</p>
<p>So you can provide your custom trackBy function that will return unique identifier for each iterated item.<br>For example, some key value of the item. If this key value matches the previous one, then Angular won’t detect changes.</p>
<p><strong>trackBy</strong> takes a function that has <em>index</em> and <em>item</em> args. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;my-app&#x27;</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ul&gt;</span></span><br><span class="line"><span class="string">      &lt;li *ngFor=&quot;let item of items; trackBy: trackByFn&quot;&gt;&#123;&#123;item.id&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123; </span><br><span class="line">  <span class="function"><span class="title">trackByFn</span>(<span class="params">index, item</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If trackBy is given, Angular tracks changes by the return value of the function. </p>
<p>Now when you change the collection, Angular can track which items have been added or removed according to the unique identifier and create/destroy only changed items.</p>
<h4 id="Links-8"><a href="#Links-8" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/NgForOf,https://angular.io/api/core/TrackByFunction">https://angular.io/api/common/NgForOf,https://angular.io/api/core/TrackByFunction</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/trackby-in-for-loops">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/performance">performance</a><br><br><br></p>
<h3 id="Understanding-Microsyntax"><a href="#Understanding-Microsyntax" class="headerlink" title="Understanding Microsyntax"></a>Understanding Microsyntax</h3><p>Under the hood Angular compiles structural directives into ng-template elements, e.g.:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- This --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let item of [1,2,3]&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Get expanded into this --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> <span class="attr">ngFor</span> [<span class="attr">ngForOf</span>]=<span class="string">&quot;[1,2,3]&quot;</span> <span class="attr">let-item</span>=<span class="string">&quot;$implicit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The value passed to *ngFor directive is written using microsyntax. You can learn about it <a target="_blank" rel="noopener" href="https://angular.io/guide/structural-directives#microsyntax">in the docs</a>. </p>
<p>Also check out an <a target="_blank" rel="noopener" href="https://alexzuza.github.io/ng-structural-directive-expander/">interactive tool</a> that shows the expansion by <a target="_blank" rel="noopener" href="https://twitter.com/yurzui">Alexey Zuev</a></p>
<h4 id="Links-9"><a href="#Links-9" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/structural-directives#microsyntax,https://alexzuza.github.io/ng-structural-directive-expander/,https://angular.io/guide/structural-directives#inside-ngfor">https://angular.io/guide/structural-directives#microsyntax,https://alexzuza.github.io/ng-structural-directive-expander/,https://angular.io/guide/structural-directives#inside-ngfor</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/understanding-microsyntax">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/structural-directive">structural directive</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/microsyntax">microsyntax</a><br><br><br></p>
<h2 id="Intermediate-snippets"><a href="#Intermediate-snippets" class="headerlink" title="Intermediate snippets"></a>Intermediate snippets</h2><h3 id="Accessing-all-nested-form-controls"><a href="#Accessing-all-nested-form-controls" class="headerlink" title="Accessing all nested form controls"></a>Accessing all nested form controls</h3><p>Sometimes we need to work with every single Control is a form. Here’s how it can be done: </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenControls</span>(<span class="params">form: AbstractControl</span>): <span class="title">AbstractControl</span>[] </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> extracted: AbstractControl[] = [ form ];</span><br><span class="line">  <span class="keyword">if</span> (form <span class="keyword">instanceof</span> FormArray || form <span class="keyword">instanceof</span> FormGroup) &#123;</span><br><span class="line">    <span class="keyword">const</span> children = <span class="built_in">Object</span>.values(form.controls).map(flattenControls);</span><br><span class="line">    extracted = extracted.concat(...children);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> extracted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For examples use:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// returns all dirty abstract controls</span></span><br><span class="line">flattenControls(form).filter(<span class="function">(<span class="params">control</span>) =&gt;</span> control.dirty);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mark all controls as touched</span></span><br><span class="line">flattenControls(form).forEach(<span class="function">(<span class="params">control</span>) =&gt;</span> </span><br><span class="line">    control.markAsTouched(&#123; <span class="attr">onlySelf</span>: <span class="literal">true</span> &#125;));</span><br></pre></td></tr></table></figure>

<h4 id="Links-10"><a href="#Links-10" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/reactive-forms">https://angular.io/guide/reactive-forms</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/accessing-all-nested-form-controls">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/reactive-forms">reactive forms</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="Adding-keyboard-shortcuts-to-elements"><a href="#Adding-keyboard-shortcuts-to-elements" class="headerlink" title="Adding keyboard shortcuts to elements"></a>Adding keyboard shortcuts to elements</h3><p>It’s really easy to add keyboard shortcuts in the template: </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> (<span class="attr">keydown.ctrl.enter</span>)=<span class="string">&quot;doSomething()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.enter</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.a</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.esc</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.esc</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.control</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.alt</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.meta</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.9</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.tab</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.backspace</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.arrowup</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.arrowdown</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.shift.control.z</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> (<span class="attr">keydown.f4</span>)=<span class="string">&quot;...&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>

<h4 id="Links-11"><a href="#Links-11" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://alligator.io/angular/binding-keyup-keydown-events">https://alligator.io/angular/binding-keyup-keydown-events</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/adding-keyboard-shortcuts-to-elements">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a><br><br><br></p>
<h3 id="Bind-to-host-properties-with-host-binding"><a href="#Bind-to-host-properties-with-host-binding" class="headerlink" title="Bind to host properties with host binding"></a>Bind to host properties with host binding</h3><p>Every rendered angular component is wrapped in a host element (which is the same as component’s selector).</p>
<p>It is possible to bind properties and attributes of host element using @HostBinding decorators, e.g. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, HostBinding &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">   selector: <span class="string">&#x27;my-app&#x27;</span>, </span><br><span class="line">   template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;Use the input below  to select host background-color:&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;color&quot; [(ngModel)]=&quot;color&quot;&gt; </span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  styles: [</span><br><span class="line">    <span class="string">`:host &#123; display: block; height: 100px; &#125;`</span></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@HostBinding</span>(<span class="string">&#x27;style.background&#x27;</span>) color = <span class="string">&#x27;#ff9900&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/bind-to-host-properties-with-host-binding">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="Component-level-providers"><a href="#Component-level-providers" class="headerlink" title="Component level providers"></a>Component level providers</h3><p>Generally we get one service instance per the whole application.<br>It is also possible to create an instance of service per component or directive. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;provide&#x27;</span>,</span><br><span class="line">  template: <span class="string">&#x27;&lt;ng-content&gt;&lt;/ng-content&gt;&#x27;</span>,</span><br><span class="line">  providers: [ Service ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ProvideComponent</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[provide]&#x27;</span>,</span><br><span class="line">  providers: [ Service ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ProvideDirective</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-12"><a href="#Links-12" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/hierarchical-dependency-injection#component-level-injectors,https://stackblitz.com/edit/angular-cdk-happy-animals">https://angular.io/guide/hierarchical-dependency-injection#component-level-injectors,https://stackblitz.com/edit/angular-cdk-happy-animals</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/component-level-providers">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a><br><br><br></p>
<h3 id="Global-event-listeners"><a href="#Global-event-listeners" class="headerlink" title="Global event listeners"></a>Global event listeners</h3><p>It is possible to add global event listeners in your Components/Directives with <code>HostListener</code>. Angular will take care of unsubscribing once your directive is destroyed.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Directive</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[rightClicker]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortcutsDirective</span> </span>&#123;</span><br><span class="line">  <span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>)</span><br><span class="line">  <span class="function"><span class="title">doImportantThings</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;You pressed right&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>You can have multiple bindings:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>)</span><br><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.PageDown&#x27;</span>)</span><br><span class="line"><span class="function"><span class="title">next</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Next&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can also pass params:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@HostListener</span>(<span class="string">&#x27;window:keydown.ArrowRight&#x27;</span>, <span class="string">&#x27;$event.target&#x27;</span>)</span><br><span class="line"><span class="function"><span class="title">next</span>(<span class="params">target</span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Pressed right on this element: &#x27;</span> + target)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/global-event-listeners">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/events">events</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a><br><br><br></p>
<h3 id="Injecting-document"><a href="#Injecting-document" class="headerlink" title="Injecting document"></a>Injecting document</h3><p>Sometimes you need to get access to global <code>document</code>. </p>
<p>To simplify unit-testing, Angular provides it through dependency injection:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DOCUMENT &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Inject &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;my-app&#x27;</span>,</span><br><span class="line">  template: <span class="string">`&lt;h1&gt;Edit me &lt;/h1&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"><span class="meta">@Inject</span>(DOCUMENT) <span class="keyword">private</span> <span class="built_in">document</span>: Document</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Word with document.location, or other things here....</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-13"><a href="#Links-13" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/DOCUMENT">https://angular.io/api/common/DOCUMENT</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/injecting-document">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency injection</a><br><br><br></p>
<h3 id="Mark-reactive-fields-as-touched"><a href="#Mark-reactive-fields-as-touched" class="headerlink" title="Mark reactive fields as touched"></a>Mark reactive fields as touched</h3><p>Here is the way to notify user that there are fields with non-valid values.</p>
<p><code>markFieldsAsTouched</code> function FormGroup or FormArray as an argument. </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">markFieldsAsTouched</span>(<span class="params">form: AbstractControl</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  form.markAsTouched(&#123; <span class="attr">onlySelf</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  <span class="keyword">if</span> (form <span class="keyword">instanceof</span> FormArray || form <span class="keyword">instanceof</span> FormGroup) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.values(form.controls).forEach(markFieldsAsTouched);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<p>It’s very useful to check out more general method <a href="#accessing-all-nested-form-controls">Accessing all nested form controls</a> by <a target="_blank" rel="noopener" href="https://twitter.com/thekiba_io">Thekiba</a> to work with controls.</p>
</details>

<h4 id="Links-14"><a href="#Links-14" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/guide/reactive-forms">https://angular.io/guide/reactive-forms</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/mark-reactive-fields-as-touched">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/reactive-forms-validation">reactive forms validation</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good to know</a><br><br><br></p>
<h3 id="Observables-as-outputs"><a href="#Observables-as-outputs" class="headerlink" title="Observables as outputs"></a>Observables as outputs</h3><p><code>EventEmitters</code>  used for <code>@Output</code>‘s are just Observables with an emit method. </p>
<p>This means that you can just use <code>Observable</code> instance instead, e.g. we can wire up FormControl value changes directly:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">readonly</span> checkbox = <span class="keyword">new</span> FormControl();</span><br><span class="line"><span class="meta">@Output</span>() <span class="keyword">readonly</span> change = <span class="built_in">this</span>.checkbox.valueChanges;</span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/observables-as-outputs">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/outputs">outputs</a><br><br><br></p>
<h3 id="Passing-template-as-an-input"><a href="#Passing-template-as-an-input" class="headerlink" title="Passing template as an input"></a>Passing template as an input</h3><p>It’s possible to take a template as <code>@Input</code> for a component to customize the render</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;nav&gt;</span></span><br><span class="line"><span class="string">      &lt;ng-container *ngTemplateOutlet=&quot;template&quot;&gt;&lt;/ng-container&gt;</span></span><br><span class="line"><span class="string">    &lt;/nav&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SiteMenuComponent</span>  </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() template: TemplateRef&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">site-menu</span> [<span class="attr">template</span>]=<span class="string">&quot;menu1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">site-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">menu1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>item1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>item2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: <code>ng-content</code> should be used for most of the cases and it’s simpler and more declarative.<br>Only use this approach if you need extra flexibility that can’t be achieved with ng-content.</p>
</blockquote>
<h4 id="Links-15"><a href="#Links-15" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet">https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/passing-template-as-an-input">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/template">template</a><br><br><br></p>
<h3 id="Preseving-whitespaces"><a href="#Preseving-whitespaces" class="headerlink" title="Preseving whitespaces"></a>Preseving whitespaces</h3><p>By default Angular strips all whitespaces in templates to save bytes. Generally it’s safe.</p>
<p>For rare cases when you need to preserve spaces you can use special <code>ngPreserveWhitespaces</code> attribute:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ngPreserveWhitespaces</span>&gt;</span></span><br><span class="line">             (___()&#x27;`;</span><br><span class="line">             /,    /`</span><br><span class="line">       jgs   \\&quot;--\\</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>You can also use <a target="_blank" rel="noopener" href="https://angular.io/api/core/Component#preserveWhitespaces">preserveWhitespaces</a> option on a component.</p>
</blockquote>
<h4 id="Links-16"><a href="#Links-16" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://twitter.com/mgechev/status/1108913389277839360">https://twitter.com/mgechev/status/1108913389277839360</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/preseving-whitespaces">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a><br><br><br></p>
<h3 id="Reusing-code-in-template"><a href="#Reusing-code-in-template" class="headerlink" title="Reusing code in template"></a>Reusing code in template</h3><p>While the best way of reusing your code is creating a component, it’s also possible to do it in a template.</p>
<p>To do this you can use <code>ng-template</code> along with <code>*ngTemplateOutlet</code> directive.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngTemplateOutlet</span>=<span class="string">&quot;fancyGreeting&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ng-container</span> *<span class="attr">ngTemplateOutlet</span>=<span class="string">&quot;fancyGreeting&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-container</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">fancyGreeting</span>&gt;</span></span><br><span class="line">  Hello <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-17"><a href="#Links-17" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/common/NgTemplateOutlet,https://angular.io/guide/structural-directives#the-ng-template">https://angular.io/api/common/NgTemplateOutlet,https://angular.io/guide/structural-directives#the-ng-template</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/reusing-code-in-template">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/templates">templates</a><br><br><br></p>
<h3 id="Reusing-existing-custom-pipes"><a href="#Reusing-existing-custom-pipes" class="headerlink" title="Reusing existing custom pipes"></a>Reusing existing custom pipes</h3><p>If you need a custom <code>pipe</code>, before creating one, consider checking out the <a target="_blank" rel="noopener" href="https://github.com/danrevah/ngx-pipes">NGX Pipes package</a> which has 70+ already implemeted custom pipes.</p>
<p>Here are some examples:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; date | timeAgo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;last week&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; &#x27;foo bar&#x27; | ucfirst &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;Foo bar&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>3 &#123;&#123; &#x27;Painting&#x27; | makePluralString: 3 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;3 Paintings&quot; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; [1, 2, 3, 1, 2, 3] | max &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Output: &quot;3&quot; --&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Links-18"><a href="#Links-18" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://github.com/danrevah/ngx-pipes">https://github.com/danrevah/ngx-pipes</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/reusing-existing-custom-pipes">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/pipes">pipes</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/library">library</a><br><br><br></p>
<h3 id="Style-bindings"><a href="#Style-bindings" class="headerlink" title="Style bindings"></a>Style bindings</h3><p>You can use advanced property bindings to set specific style values based on component property values: </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> [<span class="attr">style.background-color</span>]=<span class="string">&quot;&#x27;green&#x27;&quot;</span>&gt;</span></span><br><span class="line">  I am in green background</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> [<span class="attr">style.font-size.px</span>]=<span class="string">&quot;isImportant ? &#x27;30&#x27; : &#x27;16&#x27;&quot;</span>&gt;</span></span><br><span class="line">  May be important text.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<details>
<summary>Bonus</summary>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Width in pixels --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.width.px</span>]=<span class="string">&quot;pxWidth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Font size in percentage relative to the parent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.font-size.</span>%]=<span class="string">&quot;percentageSize&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Height relative to the viewport height --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> [<span class="attr">style.height.vh</span>]=<span class="string">&quot;vwHeight&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</details>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/style-bindings">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/styles">styles</a><br><br><br></p>
<h3 id="Two-way-binding-any-property"><a href="#Two-way-binding-any-property" class="headerlink" title="Two-way binding any property"></a>Two-way binding any property</h3><p>Similar to how you can two-way bind <code>[(ngModel)]</code> you can two-way bind custom property on a component, for example <code>[(value)]</code>. To do it use appropriate Input/Output naming:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;super-input&#x27;</span>, </span><br><span class="line">  template: <span class="string">`...`</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Input</span>() value: <span class="built_in">string</span>;</span><br><span class="line">  <span class="meta">@Output</span>() valueChange = <span class="keyword">new</span> EventEmitter&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then you can use it as:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">super-input</span> [(<span class="attr">value</span>)]=<span class="string">&quot;value&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">super-input</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/two-way-binding-any-property">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/binding">binding</a><br><br><br></p>
<h3 id="Using-APP-INITIALIZER-to-delay-app-start"><a href="#Using-APP-INITIALIZER-to-delay-app-start" class="headerlink" title="Using APP_INITIALIZER to delay app start"></a>Using APP_INITIALIZER to delay app start</h3><p>It is possible to execute asynchronous task before the app start by providing a function returning promise using <code>APP_INITIALIZER</code> token.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  providers: [</span><br><span class="line">    &#123;</span><br><span class="line">      provide: APP_INITIALIZER,</span><br><span class="line">      useValue:  functionReturningPromise</span><br><span class="line">      multi: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Links-19"><a href="#Links-19" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://hackernoon.com/hook-into-angular-initialization-process-add41a6b7e,https://angular.io/api/core/APP_INITIALIZER">https://hackernoon.com/hook-into-angular-initialization-process-add41a6b7e,https://angular.io/api/core/APP_INITIALIZER</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/using-app_initializer-to-delay-app-start">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a><br><br><br></p>
<h3 id="Window-Location-injection"><a href="#Window-Location-injection" class="headerlink" title="Window Location injection"></a>Window Location injection</h3><p>For testing purposes you might want to inject <code>window.location</code> object in your component.<br>You can achieve this with custom <code>InjectionToken</code> mechanism provided by Angular.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> LOCATION_TOKEN = <span class="keyword">new</span> InjectionToken&lt;Location&gt;(<span class="string">&#x27;Window location object&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  providers: [</span><br><span class="line">    &#123; <span class="attr">provide</span>: LOCATION_TOKEN, <span class="attr">useValue</span>: <span class="built_in">window</span>.location &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">SharedModule</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="title">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="meta">@Inject</span>(LOCATION_TOKEN) <span class="keyword">public</span> location: Location</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-20"><a href="#Links-20" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://itnext.io/testing-browser-window-location-in-angular-application-e4e8388508ff,https://angular.io/guide/dependency-injection">https://itnext.io/testing-browser-window-location-in-angular-application-e4e8388508ff,https://angular.io/guide/dependency-injection</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/window-location-injection">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/testing">testing</a><br><br><br></p>
<h2 id="Advanced-snippets"><a href="#Advanced-snippets" class="headerlink" title="Advanced snippets"></a>Advanced snippets</h2><h3 id="Getting-components-of-different-types-with-ViewChild"><a href="#Getting-components-of-different-types-with-ViewChild" class="headerlink" title="Getting components of different types with ViewChild"></a>Getting components of different types with ViewChild</h3><p>It’s possible to use <code>@ViewChild</code> (also <code>@ViewChildren</code> and <code>@ContentChild/Children</code>) to query for components of different types using dependency injection. </p>
<p>In the example below we can use <code>@ViewChildren(Base)</code> to get instances of <code>Foo</code> and <code>Bar</code>.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">  providers: [&#123; <span class="attr">provide</span>: Base, <span class="attr">useExisting</span>: Foo &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">  providers: [&#123; <span class="attr">provide</span>: Base, <span class="attr">useExisting</span>: Bar &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now we can require both types of components using Base.</span></span><br><span class="line"><span class="meta">@Component</span>(&#123; <span class="attr">template</span>: <span class="string">`&lt;foo&gt;&lt;/foo&gt;&lt;bar&gt;&lt;/bar&gt;`</span> &#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@ViewChildren</span>(Base) components: QueryList&lt;Base&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Links-21"><a href="#Links-21" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PRRgo6F0cjs">https://www.youtube.com/watch?v=PRRgo6F0cjs</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/getting-components-of-different-types-with-viewchild">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/good-to-know">good-to-know</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tips">tips</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/components">components</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/dependency-injection">dependency-injection</a><br><br><br></p>
<h3 id="Router-Custom-Preloading"><a href="#Router-Custom-Preloading" class="headerlink" title="Router Custom Preloading"></a>Router Custom Preloading</h3><p>Angular allows us to control the way module preloading is handled.</p>
<p>There are 2 strategies provided by <strong>@angular/router</strong>: <code>PreloadAllModules</code> and <code>NoPreloading</code>. The latter enabled by default, only preloading lazy modules on demand.</p>
<p>We can override this behavior by providing custom preloading strategy: In the example below we preload all included modules if the connection is good.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable, <span class="keyword">of</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomPreloading</span> <span class="title">implements</span> <span class="title">PreloadingStrategy</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> preload(route: Route, <span class="attr">load</span>: <span class="function">() =&gt;</span> Observable&lt;<span class="built_in">any</span>&gt;): Observable&lt;<span class="built_in">any</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> preloadingConnection() ? load() : <span class="keyword">of</span>(<span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routing: ModuleWithProviders = RouterModule.forRoot(routes, &#123;</span><br><span class="line">  preloadingStrategy: CustomPreloading</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note that that the example above would not be very efficient for larger apps, as it’ll preload all the modules.</p>
</blockquote>
<h4 id="Links-22"><a href="#Links-22" class="headerlink" title="Links"></a>Links</h4><p><a target="_blank" rel="noopener" href="https://angular.io/api/router/PreloadingStrategy,https://vsavkin.com/angular-router-preloading-modules-ba3c75e424cb,https://medium.com/@adrianfaciu/custom-preloading-strategy-for-angular-modules-b3b5c873681a,https://coryrylan.com/blog/custom-preloading-and-lazy-loading-strategies-with-angular">https://angular.io/api/router/PreloadingStrategy,https://vsavkin.com/angular-router-preloading-modules-ba3c75e424cb,https://medium.com/@adrianfaciu/custom-preloading-strategy-for-angular-modules-b3b5c873681a,https://coryrylan.com/blog/custom-preloading-and-lazy-loading-strategies-with-angular</a></p>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/router-custom-preloading">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/router">router</a><br><br><br></p>
<h3 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h3><p>It is possible to use SVG tags in your Angular component, to create beautiful graphs and visualizations. There are 3 things you need to know: </p>
<ol>
<li>When binding an SVG attribute, use <code>attr</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">circle</span> [<span class="attr">attr.cx</span>]=<span class="string">&quot;x&quot;</span> [<span class="attr">attr.cy</span>]=<span class="string">&quot;y&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>When creating sub-components, use attribute and not tag selector:<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Not: <span class="tag">&lt;<span class="name">child-component</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">g</span> <span class="attr">child-component</span>&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;<span class="attr">selector</span>: <span class="string">&#x27;[child-component]&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure></li>
<li>When using SVG tags in sub-components use svg prefix:<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">&#x27;[child-component]&#x27;</span>,</span><br><span class="line">  template: <span class="string">`&lt;svg:circle&gt;&lt;/svg:circle&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


</li>
</ol>
<p><br><a target="_blank" rel="noopener" href="https://30.codelab.fun/svg">⭐ Interactive demo of this snippet</a> | <a href="#table-of-contents">⬆ Back to top</a> | tags: <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/tip">tip</a> <a target="_blank" rel="noopener" href="https://30.codelab.fun/tags/svg">SVG</a><br><br><br></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-SwaggerEditor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-SwaggerEditor/" class="post-title-link" itemprop="url">研发工具-SwaggerEditor</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:00:10" itemprop="dateCreated datePublished" datetime="2021-01-05T14:00:10+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p><a target="_blank" rel="noopener" href="https://github.com/swagger-api/swagger-editor">https://github.com/swagger-api/swagger-editor</a></p>
<h2 id="在线版本"><a href="#在线版本" class="headerlink" title="在线版本"></a>在线版本</h2><p><a target="_blank" rel="noopener" href="https://editor.swagger.io/">https://editor.swagger.io/</a></p>
<h2 id="离线版本"><a href="#离线版本" class="headerlink" title="离线版本"></a>离线版本</h2><h3 id="Docker方式"><a href="#Docker方式" class="headerlink" title="Docker方式"></a>Docker方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull swaggerapi&#x2F;swagger-editor</span><br><span class="line">docker run -d -p 4400:8080 swaggerapi&#x2F;swagger-editor</span><br></pre></td></tr></table></figure>
<h3 id="下载方式"><a href="#下载方式" class="headerlink" title="下载方式"></a>下载方式</h3><p>下载并解压:<br><a target="_blank" rel="noopener" href="https://github.com/swagger-api/swagger-editor/releases">https://github.com/swagger-api/swagger-editor/releases</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g http-server</span><br><span class="line">http-server -p4400</span><br></pre></td></tr></table></figure>
<h2 id="代码生成"><a href="#代码生成" class="headerlink" title="代码生成"></a>代码生成</h2><p>通过顶部菜单: </p>
<ul>
<li>生成服务端Mock</li>
<li>生成客户端代码</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-HMR%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7-HMR%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">研发工具-HMR代理配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 14:00:01" itemprop="dateCreated datePublished" datetime="2021-01-05T14:00:01+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>使用公司框架开发时，在HMR开发模式，前端如果使用自已封装的HttpClient，无法调用@delon/mock。</p>
<p>如果省略mock，直接与后端API一起联调，则需要将页面打进后端war包中，在Tomcat中测试。由于无法使用HMR，每次页面改动都要刷新页面，浪费一些时间。</p>
<p>通过配置HMR代理，可以将后端Tomcat 9090端口下的服务，代理到HMR 4200端口下，提升前端开发效率。</p>
<h2 id="service模块配置"><a href="#service模块配置" class="headerlink" title="service模块配置"></a>service模块配置</h2><p>临时将<code>/api/*</code>添加到CAS例外</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">&lt;!-- begin CAS ignorePattern --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>ignorePattern<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span></span><br><span class="line">		/api/*|.*.js|/assets/.*|.*.menu.*|/publicConfig/.*|.*./user/.*|.*.assets/i18n/[a-z]&#123;2&#125;\.json</span><br><span class="line">	<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>临时将<code>/api/*</code>添加到JWT例外</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- begin JWT ValidationWithoutCas Filter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>JWT ValidationWithoutCas Filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></span><br><span class="line">		com.yourcompany.common.authentication.filter.JwtValidationFilter</span><br><span class="line">	<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>ignorePattern<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span></span><br><span class="line">           	.*/cale/api/.*,.*.assets.*,.*.publicConfig.*,.*.css,.*.js,.*.html,.*.htm,.*.json,.*.svg,.*.cale/;jsessionid=.*,.*.cale/,.*.png,.*.login/user.*,.*.login/logout.*</span><br><span class="line">           <span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意仅在本地修改，不要提交到git上</p>
</blockquote>
<h2 id="web模块配置"><a href="#web模块配置" class="headerlink" title="web模块配置"></a>web模块配置</h2><p>新建<code>proxy.conf.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;/api&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;http://10.30.22.xx:9090/cale&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;secure&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;logLevel&quot;</span>: <span class="string">&quot;debug&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意target中的ip地址不要填写localhsot或127.0.0.1，否则可能无法正确转发<br>映射关系为: <a target="_blank" rel="noopener" href="http://localhost:4200/api/attachment">http://localhost:4200/api/attachment</a> -&gt; <a target="_blank" rel="noopener" href="http://10.30.22.242:9090/cale/api/attachment">http://10.30.22.242:9090/cale/api/attachment</a></p>
</blockquote>
<p>修改<code>package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;hmr&quot;: &quot;ng serve -c=hmr --proxy-config=proxy.conf.json&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="启动前端"><a href="#启动前端" class="headerlink" title="启动前端"></a>启动前端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run hmr</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/Yarn%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/Yarn%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Yarn学习笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 13:59:40" itemprop="dateCreated datePublished" datetime="2021-01-05T13:59:40+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Yarn作为一个新的包管理器，用于替代现有的npm客户端或者其他兼容npm仓库的包管理工具。</p>
<p>可以解决<code>npm</code>拉取依赖包较慢，依赖重复，以及<code>cnpm</code>容易丢失依赖的痛点。</p>
<p>特性:  </p>
<ul>
<li>离线模式（Offline Mode）：如果你之前安装过某个包，那么你可以在没有互联网连接的情况下，对这个包进行重新安装。</li>
<li>确定性（Deterministic）：不管安装顺序如何，相同的依赖在每台机器上会以完全相同的方式进行安装。</li>
<li>网络性能：Yarn会对请求进行高效地排队，避免出现请求瀑布（waterfall），便于将网络的使用效率达到最大化。</li>
<li>网络弹性（Network Resilience）：单个请求的失败不会导致整个安装的失败，请求会基于故障进行重试。</li>
<li>扁平模式（Flat Mode）：将不匹配的依赖版本都会解析为同一个版本，避免重复创建。</li>
</ul>
<h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><ul>
<li><a target="_blank" rel="noopener" href="https://classic.yarnpkg.com/zh-Hans/">https://classic.yarnpkg.com/zh-Hans/</a></li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>npm方式:  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yarn</span><br></pre></td></tr></table></figure>
<p>brew方式:  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install yarn</span><br></pre></td></tr></table></figure>
<h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><table>
<thead>
<tr>
<th>npm</th>
<th>yarn</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>npm init</td>
<td>yarn init</td>
<td>初始化包的开发环境</td>
</tr>
<tr>
<td>npm install</td>
<td>yarn install</td>
<td>安装package文件里定义的所有依赖</td>
</tr>
<tr>
<td>npm install xxx —save</td>
<td>yarn add xxx</td>
<td>安装某个依赖，默认保存到package中</td>
</tr>
<tr>
<td>npm uninstall xxx —save</td>
<td>yarn remove xxx</td>
<td>移除某个依赖项目</td>
</tr>
<tr>
<td>npm install xxx —save-dev</td>
<td>yarn add xxx —dev</td>
<td>安装某个开发时依赖项目</td>
</tr>
<tr>
<td>npm update xxx —save</td>
<td>yarn upgrade xxx</td>
<td>更新某个依赖项目</td>
</tr>
<tr>
<td>npm install xxx –global</td>
<td>yarn global add xxx</td>
<td>安装某个全局依赖项目</td>
</tr>
<tr>
<td>npm run/test</td>
<td>yarn run/test</td>
<td>运行某个命令</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://www.bluexiii.com/202002/Postgres%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BlueXIII">
      <meta itemprop="description" content="IT技术类文章、笔记分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BlueXIII's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/202002/Postgres%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Postgres运维笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 13:59:31" itemprop="dateCreated datePublished" datetime="2021-01-05T13:59:31+08:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h2><p><a target="_blank" rel="noopener" href="https://www.postgresql.org/">https://www.postgresql.org/</a><br>版本选择: 12.1, 11.6, 10.11, 9.6.16, 9.5.20, 9.4.25</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.codementor.io/engineerapart/getting-started-with-postgresql-on-mac-osx-are8jcopb">Getting Started with PostgreSQL on Mac OSX</a></li>
<li><a target="_blank" rel="noopener" href="https://postgresapp.com/documentation/gui-tools.html">GUI Client Apps</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mchina/archive/2013/04/26/3040440.html">PostgreSQL角色管理</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/10ced5145d39">Mac安装PostgreSQL</a></li>
</ul>
<h2 id="电子书"><a href="#电子书" class="headerlink" title="电子书"></a>电子书</h2><ul>
<li>PostgreSQL实战    </li>
<li>PostgreSQL10.1中文手册</li>
<li>数据架构师的PostgreSQL修炼</li>
</ul>
<h2 id="macos下brew安装"><a href="#macos下brew安装" class="headerlink" title="macos下brew安装"></a>macos下brew安装</h2><blockquote>
<p>暂时选择较流行的10.11版本</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres.old</span><br><span class="line"></span><br><span class="line">brew install postgresql@10</span><br><span class="line"></span><br><span class="line">echo &#39;export PATH&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;opt&#x2F;postgresql@10&#x2F;bin:$PATH&quot;&#39; &gt;&gt; ~&#x2F;.zshrc</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">默认端口 5431，默认数据库 postgres，默认用户密码同与macos当前用户相同</span><br><span class="line">查看版本号: pg_ctl -V</span><br><span class="line">二进制路径: &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;postgresql@10&#x2F;10.11</span><br><span class="line">数据库路径: initdb &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres</span><br></pre></td></tr></table></figure>
<h3 id="brew服务启停"><a href="#brew服务启停" class="headerlink" title="brew服务启停"></a>brew服务启停</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew services run postgresql@10</span><br><span class="line">brew services start postgresql@10</span><br><span class="line">brew services stop postgresql@10</span><br></pre></td></tr></table></figure>
<h3 id="手工启停"><a href="#手工启停" class="headerlink" title="手工启停"></a>手工启停</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pg_ctl -D &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres -l &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres&#x2F;server.log start</span><br><span class="line">pg_ctl -D &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres -l &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres&#x2F;server.log status</span><br><span class="line">pg_ctl -D &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres -l &#x2F;usr&#x2F;local&#x2F;var&#x2F;postgres&#x2F;server.log stop -s -m fast</span><br></pre></td></tr></table></figure>
<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="psql"><a href="#psql" class="headerlink" title="psql"></a>psql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">psql -h 127.0.0.1 -p 5432 -d postgres -U yourname</span><br><span class="line">psql -d postgres</span><br></pre></td></tr></table></figure>
<h3 id="pgcli"><a href="#pgcli" class="headerlink" title="pgcli"></a>pgcli</h3><p><a target="_blank" rel="noopener" href="https://www.pgcli.com/">https://www.pgcli.com/</a></p>
<p>一个增强的psql命令行工具，提供高亮与代码补全，可替代psql</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pgcli</span><br><span class="line"></span><br><span class="line">pgcli -d postgres</span><br></pre></td></tr></table></figure>
<h3 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h3><ul>
<li>pgAdmin4 WEB版UI较差，可适用于数据库管理，界面逻辑清晰，可显示DDL便于学习</li>
<li>Navicat 老版本对PG支持差需使用V15.X，UI较好但隐藏过多细节，可适用于数据库管理与SQL编写</li>
<li>DataGrip 仅适用于SQL编写，全平台，在IDEA中已集成，对PG支持略差</li>
<li>DBeaver 仅适用于SQL编写，全平台，对PG支持略好，UI较差<blockquote>
<p>没有特别突出的方案。大而全选Navicat，偏重管理选择pgAdmin4，偏重开发运维选择DataGrip</p>
</blockquote>
</li>
</ul>
<h2 id="psql控制台命令"><a href="#psql控制台命令" class="headerlink" title="psql控制台命令"></a>psql控制台命令</h2><p>\password：设置当前登录用户的密码<br>\h：查看SQL命令的解释，比如\h select。<br>?：查看psql命令列表。<br>\l：列出所有数据库。<br>\c [database_name]：连接其他数据库。<br>\d：列出当前数据库的所有表格。<br>\d [table_name]：列出某一张表格的结构。<br>\du：列出所有用户。<br>\e：打开文本编辑器。<br>\conninfo：列出当前数据库和连接的信息。<br>\password [user]: 修改用户密码<br>\q：退出</p>
<h2 id="常用管理SQL"><a href="#常用管理SQL" class="headerlink" title="常用管理SQL"></a>常用管理SQL</h2><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER testuser WITH PASSWORD &#39;testuser&#39;;</span><br><span class="line">CREATE ROLE testuser WITH LOGIN PASSWORD &#39;testuser&#39;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在PG中，用户和角色的概念相同</p>
</blockquote>
<h3 id="创建删除数据库"><a href="#创建删除数据库" class="headerlink" title="创建删除数据库"></a>创建删除数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE testdb OWNER testuser;</span><br><span class="line">DROP DATABASE testdb;</span><br></pre></td></tr></table></figure>
<h3 id="创建SCHEMA"><a href="#创建SCHEMA" class="headerlink" title="创建SCHEMA"></a>创建SCHEMA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE SCHEMA testschema2 AUTHORIZATION zorrouser;</span><br></pre></td></tr></table></figure>
<h3 id="将DB权限赋予用户"><a href="#将DB权限赋予用户" class="headerlink" title="将DB权限赋予用户"></a>将DB权限赋予用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON DATABASE testdb to testuser;</span><br></pre></td></tr></table></figure>
<h3 id="用户赋权限"><a href="#用户赋权限" class="headerlink" title="用户赋权限"></a>用户赋权限</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER ROLE testuser CREATEDB;</span><br><span class="line">ALTER ROLE testuser WITH LOGIN;</span><br></pre></td></tr></table></figure>
<h3 id="其它赋权语句"><a href="#其它赋权语句" class="headerlink" title="其它赋权语句"></a>其它赋权语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER SCHEMA public OWNER TO testuser;</span><br><span class="line">ALTER ROLE testuser WITH PASSWORD &#39;testuser&#39;;</span><br></pre></td></tr></table></figure>
<h2 id="常用数据类型"><a href="#常用数据类型" class="headerlink" title="常用数据类型"></a>常用数据类型</h2><p><a target="_blank" rel="noopener" href="http://www.postgres.cn/docs/9.3/datatype.html">http://www.postgres.cn/docs/9.3/datatype.html</a></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>解释</th>
<th>长度</th>
</tr>
</thead>
<tbody><tr>
<td>integer</td>
<td>存储整数</td>
<td>4字节</td>
</tr>
<tr>
<td>bigint</td>
<td>存储整数，大范围</td>
<td>8字节</td>
</tr>
<tr>
<td>numeric</td>
<td>用户指定的精度，精确</td>
<td>可自定</td>
</tr>
<tr>
<td>serial</td>
<td>自动递增整数</td>
<td>4字节</td>
</tr>
<tr>
<td>bigserial</td>
<td>大的自动递增整数</td>
<td>8字节</td>
</tr>
<tr>
<td>varchar(size)</td>
<td>字符串</td>
<td></td>
</tr>
<tr>
<td>text</td>
<td>可变长度字符串</td>
<td></td>
</tr>
<tr>
<td>timestamp</td>
<td>日期和时间(无时区)</td>
<td>8字节</td>
</tr>
<tr>
<td>boolean</td>
<td>它指定true或false的状态</td>
<td>1字节</td>
</tr>
</tbody></table>
<h2 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vi postgresql.conf</span><br><span class="line">listen_addresses &#x3D; &#39;*&#39;</span><br><span class="line"></span><br><span class="line">vi pg_hba.conf</span><br><span class="line"># TYPE  DATABASE  USER  CIDR-ADDRESS  METHOD</span><br><span class="line">host  all  all 0.0.0.0&#x2F;0 md5</span><br><span class="line"></span><br><span class="line">sudo service postgresql restart</span><br></pre></td></tr></table></figure>


<h2 id="数据导入导出"><a href="#数据导入导出" class="headerlink" title="数据导入导出"></a>数据导入导出</h2><h2 id="备份与恢复"><a href="#备份与恢复" class="headerlink" title="备份与恢复"></a>备份与恢复</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/17/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/19/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BlueXIII</p>
  <div class="site-description" itemprop="description">IT技术类文章、笔记分享</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">273</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiiiblue" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiiiblue" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/bluexiii" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;bluexiii" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">鲁ICP备18050487号-1 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BlueXIII</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
